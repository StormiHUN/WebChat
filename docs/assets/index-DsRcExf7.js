(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();var Nh={exports:{}},Ka={},Dh={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Og;function vT(){if(Og)return je;Og=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.iterator;function I(M){return M===null||typeof M!="object"?null:(M=T&&M[T]||M["@@iterator"],typeof M=="function"?M:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,B={};function F(M,X,Ee){this.props=M,this.context=X,this.refs=B,this.updater=Ee||C}F.prototype.isReactComponent={},F.prototype.setState=function(M,X){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,X,"setState")},F.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function W(){}W.prototype=F.prototype;function Y(M,X,Ee){this.props=M,this.context=X,this.refs=B,this.updater=Ee||C}var J=Y.prototype=new W;J.constructor=Y,b(J,F.prototype),J.isPureReactComponent=!0;var oe=Array.isArray,V=Object.prototype.hasOwnProperty,de={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function S(M,X,Ee){var Ve,Le={},ze=null,Ze=null;if(X!=null)for(Ve in X.ref!==void 0&&(Ze=X.ref),X.key!==void 0&&(ze=""+X.key),X)V.call(X,Ve)&&!x.hasOwnProperty(Ve)&&(Le[Ve]=X[Ve]);var et=arguments.length-2;if(et===1)Le.children=Ee;else if(1<et){for(var Fe=Array(et),ft=0;ft<et;ft++)Fe[ft]=arguments[ft+2];Le.children=Fe}if(M&&M.defaultProps)for(Ve in et=M.defaultProps,et)Le[Ve]===void 0&&(Le[Ve]=et[Ve]);return{$$typeof:n,type:M,key:ze,ref:Ze,props:Le,_owner:de.current}}function R(M,X){return{$$typeof:n,type:M.type,key:X,ref:M.ref,props:M.props,_owner:M._owner}}function k(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function L(M){var X={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(Ee){return X[Ee]})}var j=/\/+/g;function P(M,X){return typeof M=="object"&&M!==null&&M.key!=null?L(""+M.key):X.toString(36)}function dt(M,X,Ee,Ve,Le){var ze=typeof M;(ze==="undefined"||ze==="boolean")&&(M=null);var Ze=!1;if(M===null)Ze=!0;else switch(ze){case"string":case"number":Ze=!0;break;case"object":switch(M.$$typeof){case n:case e:Ze=!0}}if(Ze)return Ze=M,Le=Le(Ze),M=Ve===""?"."+P(Ze,0):Ve,oe(Le)?(Ee="",M!=null&&(Ee=M.replace(j,"$&/")+"/"),dt(Le,X,Ee,"",function(ft){return ft})):Le!=null&&(k(Le)&&(Le=R(Le,Ee+(!Le.key||Ze&&Ze.key===Le.key?"":(""+Le.key).replace(j,"$&/")+"/")+M)),X.push(Le)),1;if(Ze=0,Ve=Ve===""?".":Ve+":",oe(M))for(var et=0;et<M.length;et++){ze=M[et];var Fe=Ve+P(ze,et);Ze+=dt(ze,X,Ee,Fe,Le)}else if(Fe=I(M),typeof Fe=="function")for(M=Fe.call(M),et=0;!(ze=M.next()).done;)ze=ze.value,Fe=Ve+P(ze,et++),Ze+=dt(ze,X,Ee,Fe,Le);else if(ze==="object")throw X=String(M),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return Ze}function Ge(M,X,Ee){if(M==null)return M;var Ve=[],Le=0;return dt(M,Ve,"","",function(ze){return X.call(Ee,ze,Le++)}),Ve}function Ct(M){if(M._status===-1){var X=M._result;X=X(),X.then(function(Ee){(M._status===0||M._status===-1)&&(M._status=1,M._result=Ee)},function(Ee){(M._status===0||M._status===-1)&&(M._status=2,M._result=Ee)}),M._status===-1&&(M._status=0,M._result=X)}if(M._status===1)return M._result.default;throw M._result}var Qe={current:null},ae={transition:null},Ie={ReactCurrentDispatcher:Qe,ReactCurrentBatchConfig:ae,ReactCurrentOwner:de};function he(){throw Error("act(...) is not supported in production builds of React.")}return je.Children={map:Ge,forEach:function(M,X,Ee){Ge(M,function(){X.apply(this,arguments)},Ee)},count:function(M){var X=0;return Ge(M,function(){X++}),X},toArray:function(M){return Ge(M,function(X){return X})||[]},only:function(M){if(!k(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},je.Component=F,je.Fragment=t,je.Profiler=o,je.PureComponent=Y,je.StrictMode=i,je.Suspense=p,je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ie,je.act=he,je.cloneElement=function(M,X,Ee){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var Ve=b({},M.props),Le=M.key,ze=M.ref,Ze=M._owner;if(X!=null){if(X.ref!==void 0&&(ze=X.ref,Ze=de.current),X.key!==void 0&&(Le=""+X.key),M.type&&M.type.defaultProps)var et=M.type.defaultProps;for(Fe in X)V.call(X,Fe)&&!x.hasOwnProperty(Fe)&&(Ve[Fe]=X[Fe]===void 0&&et!==void 0?et[Fe]:X[Fe])}var Fe=arguments.length-2;if(Fe===1)Ve.children=Ee;else if(1<Fe){et=Array(Fe);for(var ft=0;ft<Fe;ft++)et[ft]=arguments[ft+2];Ve.children=et}return{$$typeof:n,type:M.type,key:Le,ref:ze,props:Ve,_owner:Ze}},je.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:l,_context:M},M.Consumer=M},je.createElement=S,je.createFactory=function(M){var X=S.bind(null,M);return X.type=M,X},je.createRef=function(){return{current:null}},je.forwardRef=function(M){return{$$typeof:h,render:M}},je.isValidElement=k,je.lazy=function(M){return{$$typeof:v,_payload:{_status:-1,_result:M},_init:Ct}},je.memo=function(M,X){return{$$typeof:y,type:M,compare:X===void 0?null:X}},je.startTransition=function(M){var X=ae.transition;ae.transition={};try{M()}finally{ae.transition=X}},je.unstable_act=he,je.useCallback=function(M,X){return Qe.current.useCallback(M,X)},je.useContext=function(M){return Qe.current.useContext(M)},je.useDebugValue=function(){},je.useDeferredValue=function(M){return Qe.current.useDeferredValue(M)},je.useEffect=function(M,X){return Qe.current.useEffect(M,X)},je.useId=function(){return Qe.current.useId()},je.useImperativeHandle=function(M,X,Ee){return Qe.current.useImperativeHandle(M,X,Ee)},je.useInsertionEffect=function(M,X){return Qe.current.useInsertionEffect(M,X)},je.useLayoutEffect=function(M,X){return Qe.current.useLayoutEffect(M,X)},je.useMemo=function(M,X){return Qe.current.useMemo(M,X)},je.useReducer=function(M,X,Ee){return Qe.current.useReducer(M,X,Ee)},je.useRef=function(M){return Qe.current.useRef(M)},je.useState=function(M){return Qe.current.useState(M)},je.useSyncExternalStore=function(M,X,Ee){return Qe.current.useSyncExternalStore(M,X,Ee)},je.useTransition=function(){return Qe.current.useTransition()},je.version="18.3.1",je}var Vg;function Cf(){return Vg||(Vg=1,Dh.exports=vT()),Dh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg;function wT(){if(Mg)return Ka;Mg=1;var n=Cf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(h,p,y){var v,T={},I=null,C=null;y!==void 0&&(I=""+y),p.key!==void 0&&(I=""+p.key),p.ref!==void 0&&(C=p.ref);for(v in p)i.call(p,v)&&!l.hasOwnProperty(v)&&(T[v]=p[v]);if(h&&h.defaultProps)for(v in p=h.defaultProps,p)T[v]===void 0&&(T[v]=p[v]);return{$$typeof:e,type:h,key:I,ref:C,props:T,_owner:o.current}}return Ka.Fragment=t,Ka.jsx=c,Ka.jsxs=c,Ka}var Fg;function ET(){return Fg||(Fg=1,Nh.exports=wT()),Nh.exports}var le=ET(),Hu={},bh={exports:{}},Nn={},Lh={exports:{}},Oh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug;function TT(){return Ug||(Ug=1,function(n){function e(ae,Ie){var he=ae.length;ae.push(Ie);e:for(;0<he;){var M=he-1>>>1,X=ae[M];if(0<o(X,Ie))ae[M]=Ie,ae[he]=X,he=M;else break e}}function t(ae){return ae.length===0?null:ae[0]}function i(ae){if(ae.length===0)return null;var Ie=ae[0],he=ae.pop();if(he!==Ie){ae[0]=he;e:for(var M=0,X=ae.length,Ee=X>>>1;M<Ee;){var Ve=2*(M+1)-1,Le=ae[Ve],ze=Ve+1,Ze=ae[ze];if(0>o(Le,he))ze<X&&0>o(Ze,Le)?(ae[M]=Ze,ae[ze]=he,M=ze):(ae[M]=Le,ae[Ve]=he,M=Ve);else if(ze<X&&0>o(Ze,he))ae[M]=Ze,ae[ze]=he,M=ze;else break e}}return Ie}function o(ae,Ie){var he=ae.sortIndex-Ie.sortIndex;return he!==0?he:ae.id-Ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var p=[],y=[],v=1,T=null,I=3,C=!1,b=!1,B=!1,F=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function J(ae){for(var Ie=t(y);Ie!==null;){if(Ie.callback===null)i(y);else if(Ie.startTime<=ae)i(y),Ie.sortIndex=Ie.expirationTime,e(p,Ie);else break;Ie=t(y)}}function oe(ae){if(B=!1,J(ae),!b)if(t(p)!==null)b=!0,Ct(V);else{var Ie=t(y);Ie!==null&&Qe(oe,Ie.startTime-ae)}}function V(ae,Ie){b=!1,B&&(B=!1,W(S),S=-1),C=!0;var he=I;try{for(J(Ie),T=t(p);T!==null&&(!(T.expirationTime>Ie)||ae&&!L());){var M=T.callback;if(typeof M=="function"){T.callback=null,I=T.priorityLevel;var X=M(T.expirationTime<=Ie);Ie=n.unstable_now(),typeof X=="function"?T.callback=X:T===t(p)&&i(p),J(Ie)}else i(p);T=t(p)}if(T!==null)var Ee=!0;else{var Ve=t(y);Ve!==null&&Qe(oe,Ve.startTime-Ie),Ee=!1}return Ee}finally{T=null,I=he,C=!1}}var de=!1,x=null,S=-1,R=5,k=-1;function L(){return!(n.unstable_now()-k<R)}function j(){if(x!==null){var ae=n.unstable_now();k=ae;var Ie=!0;try{Ie=x(!0,ae)}finally{Ie?P():(de=!1,x=null)}}else de=!1}var P;if(typeof Y=="function")P=function(){Y(j)};else if(typeof MessageChannel<"u"){var dt=new MessageChannel,Ge=dt.port2;dt.port1.onmessage=j,P=function(){Ge.postMessage(null)}}else P=function(){F(j,0)};function Ct(ae){x=ae,de||(de=!0,P())}function Qe(ae,Ie){S=F(function(){ae(n.unstable_now())},Ie)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ae){ae.callback=null},n.unstable_continueExecution=function(){b||C||(b=!0,Ct(V))},n.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<ae?Math.floor(1e3/ae):5},n.unstable_getCurrentPriorityLevel=function(){return I},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(ae){switch(I){case 1:case 2:case 3:var Ie=3;break;default:Ie=I}var he=I;I=Ie;try{return ae()}finally{I=he}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ae,Ie){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var he=I;I=ae;try{return Ie()}finally{I=he}},n.unstable_scheduleCallback=function(ae,Ie,he){var M=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?M+he:M):he=M,ae){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=he+X,ae={id:v++,callback:Ie,priorityLevel:ae,startTime:he,expirationTime:X,sortIndex:-1},he>M?(ae.sortIndex=he,e(y,ae),t(p)===null&&ae===t(y)&&(B?(W(S),S=-1):B=!0,Qe(oe,he-M))):(ae.sortIndex=X,e(p,ae),b||C||(b=!0,Ct(V))),ae},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(ae){var Ie=I;return function(){var he=I;I=Ie;try{return ae.apply(this,arguments)}finally{I=he}}}}(Oh)),Oh}var jg;function IT(){return jg||(jg=1,Lh.exports=TT()),Lh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zg;function ST(){if(zg)return Nn;zg=1;var n=Cf(),e=IT();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(r,s){c(r,s),c(r+"Capture",s)}function c(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},T={};function I(r){return p.call(T,r)?!0:p.call(v,r)?!1:y.test(r)?T[r]=!0:(v[r]=!0,!1)}function C(r,s,a,d){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return d?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function b(r,s,a,d){if(s===null||typeof s>"u"||C(r,s,a,d))return!0;if(d)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function B(r,s,a,d,f,g,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=d,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=r,this.type=s,this.sanitizeURL=g,this.removeEmptyString=w}var F={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){F[r]=new B(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];F[s]=new B(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){F[r]=new B(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){F[r]=new B(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){F[r]=new B(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){F[r]=new B(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){F[r]=new B(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){F[r]=new B(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){F[r]=new B(r,5,!1,r.toLowerCase(),null,!1,!1)});var W=/[\-:]([a-z])/g;function Y(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(W,Y);F[s]=new B(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(W,Y);F[s]=new B(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(W,Y);F[s]=new B(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){F[r]=new B(r,1,!1,r.toLowerCase(),null,!1,!1)}),F.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){F[r]=new B(r,1,!1,r.toLowerCase(),null,!0,!0)});function J(r,s,a,d){var f=F.hasOwnProperty(s)?F[s]:null;(f!==null?f.type!==0:d||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(b(s,a,f,d)&&(a=null),d||f===null?I(s)&&(a===null?r.removeAttribute(s):r.setAttribute(s,""+a)):f.mustUseProperty?r[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,d=f.attributeNamespace,a===null?r.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,d?r.setAttributeNS(d,s,a):r.setAttribute(s,a))))}var oe=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,V=Symbol.for("react.element"),de=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),L=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),dt=Symbol.for("react.suspense_list"),Ge=Symbol.for("react.memo"),Ct=Symbol.for("react.lazy"),Qe=Symbol.for("react.offscreen"),ae=Symbol.iterator;function Ie(r){return r===null||typeof r!="object"?null:(r=ae&&r[ae]||r["@@iterator"],typeof r=="function"?r:null)}var he=Object.assign,M;function X(r){if(M===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);M=s&&s[1]||""}return`
`+M+r}var Ee=!1;function Ve(r,s){if(!r||Ee)return"";Ee=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(K){var d=K}Reflect.construct(r,[],s)}else{try{s.call()}catch(K){d=K}r.call(s.prototype)}else{try{throw Error()}catch(K){d=K}r()}}catch(K){if(K&&d&&typeof K.stack=="string"){for(var f=K.stack.split(`
`),g=d.stack.split(`
`),w=f.length-1,A=g.length-1;1<=w&&0<=A&&f[w]!==g[A];)A--;for(;1<=w&&0<=A;w--,A--)if(f[w]!==g[A]){if(w!==1||A!==1)do if(w--,A--,0>A||f[w]!==g[A]){var N=`
`+f[w].replace(" at new "," at ");return r.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",r.displayName)),N}while(1<=w&&0<=A);break}}}finally{Ee=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?X(r):""}function Le(r){switch(r.tag){case 5:return X(r.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return r=Ve(r.type,!1),r;case 11:return r=Ve(r.type.render,!1),r;case 1:return r=Ve(r.type,!0),r;default:return""}}function ze(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case x:return"Fragment";case de:return"Portal";case R:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case dt:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case L:return(r.displayName||"Context")+".Consumer";case k:return(r._context.displayName||"Context")+".Provider";case j:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Ge:return s=r.displayName||null,s!==null?s:ze(r.type)||"Memo";case Ct:s=r._payload,r=r._init;try{return ze(r(s))}catch{}}return null}function Ze(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ze(s);case 8:return s===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function et(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Fe(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ft(r){var s=Fe(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),d=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){d=""+w,g.call(this,w)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return d},setValue:function(w){d=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Hn(r){r._valueTracker||(r._valueTracker=ft(r))}function Ii(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),d="";return r&&(d=Fe(r)?r.checked?"true":"false":r.value),r=d,r!==a?(s.setValue(r),!0):!1}function rn(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Qr(r,s){var a=s.checked;return he({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function Si(r,s){var a=s.defaultValue==null?"":s.defaultValue,d=s.checked!=null?s.checked:s.defaultChecked;a=et(s.value!=null?s.value:a),r._wrapperState={initialChecked:d,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Ri(r,s){s=s.checked,s!=null&&J(r,"checked",s,!1)}function Ss(r,s){Ri(r,s);var a=et(s.value),d=s.type;if(a!=null)d==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(d==="submit"||d==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?Ai(r,s.type,a):s.hasOwnProperty("defaultValue")&&Ai(r,s.type,et(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function uo(r,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var d=s.type;if(!(d!=="submit"&&d!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,a||s===r.value||(r.value=s),r.defaultValue=s}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function Ai(r,s,a){(s!=="number"||rn(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var er=Array.isArray;function qt(r,s,a,d){if(r=r.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<r.length;a++)f=s.hasOwnProperty("$"+r[a].value),r[a].selected!==f&&(r[a].selected=f),f&&d&&(r[a].defaultSelected=!0)}else{for(a=""+et(a),s=null,f=0;f<r.length;f++){if(r[f].value===a){r[f].selected=!0,d&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function tr(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return he({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Yr(r,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(er(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}r._wrapperState={initialValue:et(a)}}function Rr(r,s){var a=et(s.value),d=et(s.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),s.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),d!=null&&(r.defaultValue=""+d)}function En(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function lt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function St(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?lt(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Ln,Rs=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,d,f){MSApp.execUnsafeLocalFunction(function(){return r(s,a,d,f)})}:r}(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(Ln=Ln||document.createElement("div"),Ln.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Ln.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function Wt(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var Ar={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Cr=["Webkit","ms","Moz","O"];Object.keys(Ar).forEach(function(r){Cr.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),Ar[s]=Ar[r]})});function Ci(r,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Ar.hasOwnProperty(r)&&Ar[r]?(""+s).trim():s+"px"}function As(r,s){r=r.style;for(var a in s)if(s.hasOwnProperty(a)){var d=a.indexOf("--")===0,f=Ci(a,s[a],d);a==="float"&&(a="cssFloat"),d?r.setProperty(a,f):r[a]=f}}var Pi=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pr(r,s){if(s){if(Pi[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function ki(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nr=null;function xi(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Xr=null,Tn=null,On=null;function rr(r){if(r=Da(r)){if(typeof Xr!="function")throw Error(t(280));var s=r.stateNode;s&&(s=su(s),Xr(r.stateNode,r.type,s))}}function mn(r){Tn?On?On.push(r):On=[r]:Tn=r}function Cs(){if(Tn){var r=Tn,s=On;if(On=Tn=null,rr(r),s)for(r=0;r<s.length;r++)rr(s[r])}}function Jr(r,s){return r(s)}function D(){}var U=!1;function G(r,s,a){if(U)return r(s,a);U=!0;try{return Jr(r,s,a)}finally{U=!1,(Tn!==null||On!==null)&&(D(),Cs())}}function Z(r,s){var a=r.stateNode;if(a===null)return null;var d=su(a);if(d===null)return null;a=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var fe=!1;if(h)try{var ye={};Object.defineProperty(ye,"passive",{get:function(){fe=!0}}),window.addEventListener("test",ye,ye),window.removeEventListener("test",ye,ye)}catch{fe=!1}function Ce(r,s,a,d,f,g,w,A,N){var K=Array.prototype.slice.call(arguments,3);try{s.apply(a,K)}catch(re){this.onError(re)}}var pe=!1,we=null,ue=!1,xe=null,Ue={onError:function(r){pe=!0,we=r}};function it(r,s,a,d,f,g,w,A,N){pe=!1,we=null,Ce.apply(Ue,arguments)}function Rt(r,s,a,d,f,g,w,A,N){if(it.apply(this,arguments),pe){if(pe){var K=we;pe=!1,we=null}else throw Error(t(198));ue||(ue=!0,xe=K)}}function He(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,s.flags&4098&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function tt(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function st(r){if(He(r)!==r)throw Error(t(188))}function ir(r){var s=r.alternate;if(!s){if(s=He(r),s===null)throw Error(t(188));return s!==r?null:r}for(var a=r,d=s;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(d=f.return,d!==null){a=d;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return st(f),r;if(g===d)return st(f),s;g=g.sibling}throw Error(t(188))}if(a.return!==d.return)a=f,d=g;else{for(var w=!1,A=f.child;A;){if(A===a){w=!0,a=f,d=g;break}if(A===d){w=!0,d=f,a=g;break}A=A.sibling}if(!w){for(A=g.child;A;){if(A===a){w=!0,a=g,d=f;break}if(A===d){w=!0,d=g,a=f;break}A=A.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==d)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:s}function sr(r){return r=ir(r),r!==null?sn(r):null}function sn(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=sn(r);if(s!==null)return s;r=r.sibling}return null}var Kt=e.unstable_scheduleCallback,Zr=e.unstable_cancelCallback,kr=e.unstable_shouldYield,or=e.unstable_requestPaint,ot=e.unstable_now,ei=e.unstable_getCurrentPriorityLevel,Ye=e.unstable_ImmediatePriority,pt=e.unstable_UserBlockingPriority,Gt=e.unstable_NormalPriority,ar=e.unstable_LowPriority,mt=e.unstable_IdlePriority,In=null,on=null;function co(r){if(on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(In,r,void 0,(r.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:Ml,ga=Math.log,Vl=Math.LN2;function Ml(r){return r>>>=0,r===0?32:31-(ga(r)/Vl|0)|0}var ho=64,fo=4194304;function Ni(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Ps(r,s){var a=r.pendingLanes;if(a===0)return 0;var d=0,f=r.suspendedLanes,g=r.pingedLanes,w=a&268435455;if(w!==0){var A=w&~f;A!==0?d=Ni(A):(g&=w,g!==0&&(d=Ni(g)))}else w=a&~f,w!==0?d=Ni(w):g!==0&&(d=Ni(g));if(d===0)return 0;if(s!==0&&s!==d&&!(s&f)&&(f=d&-d,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if(d&4&&(d|=a&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=d;0<s;)a=31-gn(s),f=1<<a,d|=r[a],s&=~f;return d}function ad(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ti(r,s){for(var a=r.suspendedLanes,d=r.pingedLanes,f=r.expirationTimes,g=r.pendingLanes;0<g;){var w=31-gn(g),A=1<<w,N=f[w];N===-1?(!(A&a)||A&d)&&(f[w]=ad(A,s)):N<=s&&(r.expiredLanes|=A),g&=~A}}function Vn(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function ks(){var r=ho;return ho<<=1,!(ho&4194240)&&(ho=64),r}function Di(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function bi(r,s,a){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-gn(s),r[s]=a}function ct(r,s){var a=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var d=r.eventTimes;for(r=r.expirationTimes;0<a;){var f=31-gn(a),g=1<<f;s[f]=0,d[f]=-1,r[f]=-1,a&=~g}}function Li(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var d=31-gn(a),f=1<<d;f&s|r[d]&s&&(r[d]|=s),a&=~f}}var qe=0;function Oi(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var Fl,po,Ul,jl,zl,ya=!1,xr=[],Qt=null,lr=null,ur=null,Vi=new Map,qn=new Map,Nr=[],ld="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bl(r,s){switch(r){case"focusin":case"focusout":Qt=null;break;case"dragenter":case"dragleave":lr=null;break;case"mouseover":case"mouseout":ur=null;break;case"pointerover":case"pointerout":Vi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":qn.delete(s.pointerId)}}function Sn(r,s,a,d,f,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:a,eventSystemFlags:d,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Da(s),s!==null&&po(s)),r):(r.eventSystemFlags|=d,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function ud(r,s,a,d,f){switch(s){case"focusin":return Qt=Sn(Qt,r,s,a,d,f),!0;case"dragenter":return lr=Sn(lr,r,s,a,d,f),!0;case"mouseover":return ur=Sn(ur,r,s,a,d,f),!0;case"pointerover":var g=f.pointerId;return Vi.set(g,Sn(Vi.get(g)||null,r,s,a,d,f)),!0;case"gotpointercapture":return g=f.pointerId,qn.set(g,Sn(qn.get(g)||null,r,s,a,d,f)),!0}return!1}function $l(r){var s=Ls(r.target);if(s!==null){var a=He(s);if(a!==null){if(s=a.tag,s===13){if(s=tt(a),s!==null){r.blockedOn=s,zl(r.priority,function(){Ul(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function ni(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=mo(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var d=new a.constructor(a.type,a);nr=d,a.target.dispatchEvent(d),nr=null}else return s=Da(a),s!==null&&po(s),r.blockedOn=a,!1;s.shift()}return!0}function xs(r,s,a){ni(r)&&a.delete(s)}function Hl(){ya=!1,Qt!==null&&ni(Qt)&&(Qt=null),lr!==null&&ni(lr)&&(lr=null),ur!==null&&ni(ur)&&(ur=null),Vi.forEach(xs),qn.forEach(xs)}function cr(r,s){r.blockedOn===s&&(r.blockedOn=null,ya||(ya=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Hl)))}function dr(r){function s(f){return cr(f,r)}if(0<xr.length){cr(xr[0],r);for(var a=1;a<xr.length;a++){var d=xr[a];d.blockedOn===r&&(d.blockedOn=null)}}for(Qt!==null&&cr(Qt,r),lr!==null&&cr(lr,r),ur!==null&&cr(ur,r),Vi.forEach(s),qn.forEach(s),a=0;a<Nr.length;a++)d=Nr[a],d.blockedOn===r&&(d.blockedOn=null);for(;0<Nr.length&&(a=Nr[0],a.blockedOn===null);)$l(a),a.blockedOn===null&&Nr.shift()}var ri=oe.ReactCurrentBatchConfig,Mi=!0;function vt(r,s,a,d){var f=qe,g=ri.transition;ri.transition=null;try{qe=1,_a(r,s,a,d)}finally{qe=f,ri.transition=g}}function cd(r,s,a,d){var f=qe,g=ri.transition;ri.transition=null;try{qe=4,_a(r,s,a,d)}finally{qe=f,ri.transition=g}}function _a(r,s,a,d){if(Mi){var f=mo(r,s,a,d);if(f===null)Ed(r,s,d,Ns,a),Bl(r,d);else if(ud(f,r,s,a,d))d.stopPropagation();else if(Bl(r,d),s&4&&-1<ld.indexOf(r)){for(;f!==null;){var g=Da(f);if(g!==null&&Fl(g),g=mo(r,s,a,d),g===null&&Ed(r,s,d,Ns,a),g===f)break;f=g}f!==null&&d.stopPropagation()}else Ed(r,s,d,null,a)}}var Ns=null;function mo(r,s,a,d){if(Ns=null,r=xi(d),r=Ls(r),r!==null)if(s=He(r),s===null)r=null;else if(a=s.tag,a===13){if(r=tt(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return Ns=r,null}function va(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ei()){case Ye:return 1;case pt:return 4;case Gt:case ar:return 16;case mt:return 536870912;default:return 16}default:return 16}}var Mn=null,go=null,Rn=null;function wa(){if(Rn)return Rn;var r,s=go,a=s.length,d,f="value"in Mn?Mn.value:Mn.textContent,g=f.length;for(r=0;r<a&&s[r]===f[r];r++);var w=a-r;for(d=1;d<=w&&s[a-d]===f[g-d];d++);return Rn=f.slice(r,1<d?1-d:void 0)}function yo(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Dr(){return!0}function Ea(){return!1}function Yt(r){function s(a,d,f,g,w){this._reactName=a,this._targetInst=f,this.type=d,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var A in r)r.hasOwnProperty(A)&&(a=r[A],this[A]=a?a(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Dr:Ea,this.isPropagationStopped=Ea,this}return he(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Dr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Dr)},persist:function(){},isPersistent:Dr}),s}var hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_o=Yt(hr),br=he({},hr,{view:0,detail:0}),dd=Yt(br),vo,ii,Fi,Ds=he({},br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Fi&&(Fi&&r.type==="mousemove"?(vo=r.screenX-Fi.screenX,ii=r.screenY-Fi.screenY):ii=vo=0,Fi=r),vo)},movementY:function(r){return"movementY"in r?r.movementY:ii}}),wo=Yt(Ds),Ta=he({},Ds,{dataTransfer:0}),ql=Yt(Ta),Eo=he({},br,{relatedTarget:0}),To=Yt(Eo),Wl=he({},hr,{animationName:0,elapsedTime:0,pseudoElement:0}),si=Yt(Wl),Kl=he({},hr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Gl=Yt(Kl),Ql=he({},hr,{data:0}),Ia=Yt(Ql),Io={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xl(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Yl[r])?!!s[r]:!1}function Lr(){return Xl}var u=he({},br,{key:function(r){if(r.key){var s=Io[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=yo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?yn[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lr,charCode:function(r){return r.type==="keypress"?yo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?yo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),m=Yt(u),_=he({},Ds,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E=Yt(_),z=he({},br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lr}),Q=Yt(z),ce=he({},hr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ut=Yt(ce),Lt=he({},Ds,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Xe=Yt(Lt),jt=[9,13,27,32],xt=h&&"CompositionEvent"in window,Wn=null;h&&"documentMode"in document&&(Wn=document.documentMode);var Fn=h&&"TextEvent"in window&&!Wn,bs=h&&(!xt||Wn&&8<Wn&&11>=Wn),So=" ",kp=!1;function xp(r,s){switch(r){case"keyup":return jt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Np(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ro=!1;function yE(r,s){switch(r){case"compositionend":return Np(s);case"keypress":return s.which!==32?null:(kp=!0,So);case"textInput":return r=s.data,r===So&&kp?null:r;default:return null}}function _E(r,s){if(Ro)return r==="compositionend"||!xt&&xp(r,s)?(r=wa(),Rn=go=Mn=null,Ro=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return bs&&s.locale!=="ko"?null:s.data;default:return null}}var vE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dp(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!vE[r.type]:s==="textarea"}function bp(r,s,a,d){mn(d),s=nu(s,"onChange"),0<s.length&&(a=new _o("onChange","change",null,a,d),r.push({event:a,listeners:s}))}var Sa=null,Ra=null;function wE(r){Xp(r,0)}function Jl(r){var s=xo(r);if(Ii(s))return r}function EE(r,s){if(r==="change")return s}var Lp=!1;if(h){var hd;if(h){var fd="oninput"in document;if(!fd){var Op=document.createElement("div");Op.setAttribute("oninput","return;"),fd=typeof Op.oninput=="function"}hd=fd}else hd=!1;Lp=hd&&(!document.documentMode||9<document.documentMode)}function Vp(){Sa&&(Sa.detachEvent("onpropertychange",Mp),Ra=Sa=null)}function Mp(r){if(r.propertyName==="value"&&Jl(Ra)){var s=[];bp(s,Ra,r,xi(r)),G(wE,s)}}function TE(r,s,a){r==="focusin"?(Vp(),Sa=s,Ra=a,Sa.attachEvent("onpropertychange",Mp)):r==="focusout"&&Vp()}function IE(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Jl(Ra)}function SE(r,s){if(r==="click")return Jl(s)}function RE(r,s){if(r==="input"||r==="change")return Jl(s)}function AE(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var fr=typeof Object.is=="function"?Object.is:AE;function Aa(r,s){if(fr(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),d=Object.keys(s);if(a.length!==d.length)return!1;for(d=0;d<a.length;d++){var f=a[d];if(!p.call(s,f)||!fr(r[f],s[f]))return!1}return!0}function Fp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Up(r,s){var a=Fp(r);r=0;for(var d;a;){if(a.nodeType===3){if(d=r+a.textContent.length,r<=s&&d>=s)return{node:a,offset:s-r};r=d}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Fp(a)}}function jp(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?jp(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function zp(){for(var r=window,s=rn();s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=rn(r.document)}return s}function pd(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function CE(r){var s=zp(),a=r.focusedElem,d=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&jp(a.ownerDocument.documentElement,a)){if(d!==null&&pd(a)){if(s=d.start,r=d.end,r===void 0&&(r=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(r,a.value.length);else if(r=(s=a.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var f=a.textContent.length,g=Math.min(d.start,f);d=d.end===void 0?g:Math.min(d.end,f),!r.extend&&g>d&&(f=d,d=g,g=f),f=Up(a,g);var w=Up(a,d);f&&w&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==w.node||r.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),r.removeAllRanges(),g>d?(r.addRange(s),r.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),r.addRange(s)))}}for(s=[],r=a;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)r=s[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var PE=h&&"documentMode"in document&&11>=document.documentMode,Ao=null,md=null,Ca=null,gd=!1;function Bp(r,s,a){var d=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;gd||Ao==null||Ao!==rn(d)||(d=Ao,"selectionStart"in d&&pd(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Ca&&Aa(Ca,d)||(Ca=d,d=nu(md,"onSelect"),0<d.length&&(s=new _o("onSelect","select",null,s,a),r.push({event:s,listeners:d}),s.target=Ao)))}function Zl(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var Co={animationend:Zl("Animation","AnimationEnd"),animationiteration:Zl("Animation","AnimationIteration"),animationstart:Zl("Animation","AnimationStart"),transitionend:Zl("Transition","TransitionEnd")},yd={},$p={};h&&($p=document.createElement("div").style,"AnimationEvent"in window||(delete Co.animationend.animation,delete Co.animationiteration.animation,delete Co.animationstart.animation),"TransitionEvent"in window||delete Co.transitionend.transition);function eu(r){if(yd[r])return yd[r];if(!Co[r])return r;var s=Co[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in $p)return yd[r]=s[a];return r}var Hp=eu("animationend"),qp=eu("animationiteration"),Wp=eu("animationstart"),Kp=eu("transitionend"),Gp=new Map,Qp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ui(r,s){Gp.set(r,s),l(s,[r])}for(var _d=0;_d<Qp.length;_d++){var vd=Qp[_d],kE=vd.toLowerCase(),xE=vd[0].toUpperCase()+vd.slice(1);Ui(kE,"on"+xE)}Ui(Hp,"onAnimationEnd"),Ui(qp,"onAnimationIteration"),Ui(Wp,"onAnimationStart"),Ui("dblclick","onDoubleClick"),Ui("focusin","onFocus"),Ui("focusout","onBlur"),Ui(Kp,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pa));function Yp(r,s,a){var d=r.type||"unknown-event";r.currentTarget=a,Rt(d,s,void 0,r),r.currentTarget=null}function Xp(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var d=r[a],f=d.event;d=d.listeners;e:{var g=void 0;if(s)for(var w=d.length-1;0<=w;w--){var A=d[w],N=A.instance,K=A.currentTarget;if(A=A.listener,N!==g&&f.isPropagationStopped())break e;Yp(f,A,K),g=N}else for(w=0;w<d.length;w++){if(A=d[w],N=A.instance,K=A.currentTarget,A=A.listener,N!==g&&f.isPropagationStopped())break e;Yp(f,A,K),g=N}}}if(ue)throw r=xe,ue=!1,xe=null,r}function gt(r,s){var a=s[Cd];a===void 0&&(a=s[Cd]=new Set);var d=r+"__bubble";a.has(d)||(Jp(s,r,2,!1),a.add(d))}function wd(r,s,a){var d=0;s&&(d|=4),Jp(a,r,d,s)}var tu="_reactListening"+Math.random().toString(36).slice(2);function ka(r){if(!r[tu]){r[tu]=!0,i.forEach(function(a){a!=="selectionchange"&&(NE.has(a)||wd(a,!1,r),wd(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[tu]||(s[tu]=!0,wd("selectionchange",!1,s))}}function Jp(r,s,a,d){switch(va(s)){case 1:var f=vt;break;case 4:f=cd;break;default:f=_a}a=f.bind(null,s,a,r),f=void 0,!fe||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),d?f!==void 0?r.addEventListener(s,a,{capture:!0,passive:f}):r.addEventListener(s,a,!0):f!==void 0?r.addEventListener(s,a,{passive:f}):r.addEventListener(s,a,!1)}function Ed(r,s,a,d,f){var g=d;if(!(s&1)&&!(s&2)&&d!==null)e:for(;;){if(d===null)return;var w=d.tag;if(w===3||w===4){var A=d.stateNode.containerInfo;if(A===f||A.nodeType===8&&A.parentNode===f)break;if(w===4)for(w=d.return;w!==null;){var N=w.tag;if((N===3||N===4)&&(N=w.stateNode.containerInfo,N===f||N.nodeType===8&&N.parentNode===f))return;w=w.return}for(;A!==null;){if(w=Ls(A),w===null)return;if(N=w.tag,N===5||N===6){d=g=w;continue e}A=A.parentNode}}d=d.return}G(function(){var K=g,re=xi(a),ie=[];e:{var ne=Gp.get(r);if(ne!==void 0){var me=_o,Te=r;switch(r){case"keypress":if(yo(a)===0)break e;case"keydown":case"keyup":me=m;break;case"focusin":Te="focus",me=To;break;case"focusout":Te="blur",me=To;break;case"beforeblur":case"afterblur":me=To;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=wo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=ql;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=Q;break;case Hp:case qp:case Wp:me=si;break;case Kp:me=ut;break;case"scroll":me=dd;break;case"wheel":me=Xe;break;case"copy":case"cut":case"paste":me=Gl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=E}var Se=(s&4)!==0,Pt=!Se&&r==="scroll",$=Se?ne!==null?ne+"Capture":null:ne;Se=[];for(var O=K,q;O!==null;){q=O;var se=q.stateNode;if(q.tag===5&&se!==null&&(q=se,$!==null&&(se=Z(O,$),se!=null&&Se.push(xa(O,se,q)))),Pt)break;O=O.return}0<Se.length&&(ne=new me(ne,Te,null,a,re),ie.push({event:ne,listeners:Se}))}}if(!(s&7)){e:{if(ne=r==="mouseover"||r==="pointerover",me=r==="mouseout"||r==="pointerout",ne&&a!==nr&&(Te=a.relatedTarget||a.fromElement)&&(Ls(Te)||Te[oi]))break e;if((me||ne)&&(ne=re.window===re?re:(ne=re.ownerDocument)?ne.defaultView||ne.parentWindow:window,me?(Te=a.relatedTarget||a.toElement,me=K,Te=Te?Ls(Te):null,Te!==null&&(Pt=He(Te),Te!==Pt||Te.tag!==5&&Te.tag!==6)&&(Te=null)):(me=null,Te=K),me!==Te)){if(Se=wo,se="onMouseLeave",$="onMouseEnter",O="mouse",(r==="pointerout"||r==="pointerover")&&(Se=E,se="onPointerLeave",$="onPointerEnter",O="pointer"),Pt=me==null?ne:xo(me),q=Te==null?ne:xo(Te),ne=new Se(se,O+"leave",me,a,re),ne.target=Pt,ne.relatedTarget=q,se=null,Ls(re)===K&&(Se=new Se($,O+"enter",Te,a,re),Se.target=q,Se.relatedTarget=Pt,se=Se),Pt=se,me&&Te)t:{for(Se=me,$=Te,O=0,q=Se;q;q=Po(q))O++;for(q=0,se=$;se;se=Po(se))q++;for(;0<O-q;)Se=Po(Se),O--;for(;0<q-O;)$=Po($),q--;for(;O--;){if(Se===$||$!==null&&Se===$.alternate)break t;Se=Po(Se),$=Po($)}Se=null}else Se=null;me!==null&&Zp(ie,ne,me,Se,!1),Te!==null&&Pt!==null&&Zp(ie,Pt,Te,Se,!0)}}e:{if(ne=K?xo(K):window,me=ne.nodeName&&ne.nodeName.toLowerCase(),me==="select"||me==="input"&&ne.type==="file")var Re=EE;else if(Dp(ne))if(Lp)Re=RE;else{Re=IE;var Pe=TE}else(me=ne.nodeName)&&me.toLowerCase()==="input"&&(ne.type==="checkbox"||ne.type==="radio")&&(Re=SE);if(Re&&(Re=Re(r,K))){bp(ie,Re,a,re);break e}Pe&&Pe(r,ne,K),r==="focusout"&&(Pe=ne._wrapperState)&&Pe.controlled&&ne.type==="number"&&Ai(ne,"number",ne.value)}switch(Pe=K?xo(K):window,r){case"focusin":(Dp(Pe)||Pe.contentEditable==="true")&&(Ao=Pe,md=K,Ca=null);break;case"focusout":Ca=md=Ao=null;break;case"mousedown":gd=!0;break;case"contextmenu":case"mouseup":case"dragend":gd=!1,Bp(ie,a,re);break;case"selectionchange":if(PE)break;case"keydown":case"keyup":Bp(ie,a,re)}var ke;if(xt)e:{switch(r){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else Ro?xp(r,a)&&(De="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(De="onCompositionStart");De&&(bs&&a.locale!=="ko"&&(Ro||De!=="onCompositionStart"?De==="onCompositionEnd"&&Ro&&(ke=wa()):(Mn=re,go="value"in Mn?Mn.value:Mn.textContent,Ro=!0)),Pe=nu(K,De),0<Pe.length&&(De=new Ia(De,r,null,a,re),ie.push({event:De,listeners:Pe}),ke?De.data=ke:(ke=Np(a),ke!==null&&(De.data=ke)))),(ke=Fn?yE(r,a):_E(r,a))&&(K=nu(K,"onBeforeInput"),0<K.length&&(re=new Ia("onBeforeInput","beforeinput",null,a,re),ie.push({event:re,listeners:K}),re.data=ke))}Xp(ie,s)})}function xa(r,s,a){return{instance:r,listener:s,currentTarget:a}}function nu(r,s){for(var a=s+"Capture",d=[];r!==null;){var f=r,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=Z(r,a),g!=null&&d.unshift(xa(r,g,f)),g=Z(r,s),g!=null&&d.push(xa(r,g,f))),r=r.return}return d}function Po(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Zp(r,s,a,d,f){for(var g=s._reactName,w=[];a!==null&&a!==d;){var A=a,N=A.alternate,K=A.stateNode;if(N!==null&&N===d)break;A.tag===5&&K!==null&&(A=K,f?(N=Z(a,g),N!=null&&w.unshift(xa(a,N,A))):f||(N=Z(a,g),N!=null&&w.push(xa(a,N,A)))),a=a.return}w.length!==0&&r.push({event:s,listeners:w})}var DE=/\r\n?/g,bE=/\u0000|\uFFFD/g;function em(r){return(typeof r=="string"?r:""+r).replace(DE,`
`).replace(bE,"")}function ru(r,s,a){if(s=em(s),em(r)!==s&&a)throw Error(t(425))}function iu(){}var Td=null,Id=null;function Sd(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Rd=typeof setTimeout=="function"?setTimeout:void 0,LE=typeof clearTimeout=="function"?clearTimeout:void 0,tm=typeof Promise=="function"?Promise:void 0,OE=typeof queueMicrotask=="function"?queueMicrotask:typeof tm<"u"?function(r){return tm.resolve(null).then(r).catch(VE)}:Rd;function VE(r){setTimeout(function(){throw r})}function Ad(r,s){var a=s,d=0;do{var f=a.nextSibling;if(r.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(d===0){r.removeChild(f),dr(s);return}d--}else a!=="$"&&a!=="$?"&&a!=="$!"||d++;a=f}while(a);dr(s)}function ji(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function nm(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}var ko=Math.random().toString(36).slice(2),Or="__reactFiber$"+ko,Na="__reactProps$"+ko,oi="__reactContainer$"+ko,Cd="__reactEvents$"+ko,ME="__reactListeners$"+ko,FE="__reactHandles$"+ko;function Ls(r){var s=r[Or];if(s)return s;for(var a=r.parentNode;a;){if(s=a[oi]||a[Or]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=nm(r);r!==null;){if(a=r[Or])return a;r=nm(r)}return s}r=a,a=r.parentNode}return null}function Da(r){return r=r[Or]||r[oi],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function xo(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function su(r){return r[Na]||null}var Pd=[],No=-1;function zi(r){return{current:r}}function yt(r){0>No||(r.current=Pd[No],Pd[No]=null,No--)}function ht(r,s){No++,Pd[No]=r.current,r.current=s}var Bi={},an=zi(Bi),An=zi(!1),Os=Bi;function Do(r,s){var a=r.type.contextTypes;if(!a)return Bi;var d=r.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===s)return d.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=s[g];return d&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=f),f}function Cn(r){return r=r.childContextTypes,r!=null}function ou(){yt(An),yt(an)}function rm(r,s,a){if(an.current!==Bi)throw Error(t(168));ht(an,s),ht(An,a)}function im(r,s,a){var d=r.stateNode;if(s=s.childContextTypes,typeof d.getChildContext!="function")return a;d=d.getChildContext();for(var f in d)if(!(f in s))throw Error(t(108,Ze(r)||"Unknown",f));return he({},a,d)}function au(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Bi,Os=an.current,ht(an,r),ht(An,An.current),!0}function sm(r,s,a){var d=r.stateNode;if(!d)throw Error(t(169));a?(r=im(r,s,Os),d.__reactInternalMemoizedMergedChildContext=r,yt(An),yt(an),ht(an,r)):yt(An),ht(An,a)}var ai=null,lu=!1,kd=!1;function om(r){ai===null?ai=[r]:ai.push(r)}function UE(r){lu=!0,om(r)}function $i(){if(!kd&&ai!==null){kd=!0;var r=0,s=qe;try{var a=ai;for(qe=1;r<a.length;r++){var d=a[r];do d=d(!0);while(d!==null)}ai=null,lu=!1}catch(f){throw ai!==null&&(ai=ai.slice(r+1)),Kt(Ye,$i),f}finally{qe=s,kd=!1}}return null}var bo=[],Lo=0,uu=null,cu=0,Kn=[],Gn=0,Vs=null,li=1,ui="";function Ms(r,s){bo[Lo++]=cu,bo[Lo++]=uu,uu=r,cu=s}function am(r,s,a){Kn[Gn++]=li,Kn[Gn++]=ui,Kn[Gn++]=Vs,Vs=r;var d=li;r=ui;var f=32-gn(d)-1;d&=~(1<<f),a+=1;var g=32-gn(s)+f;if(30<g){var w=f-f%5;g=(d&(1<<w)-1).toString(32),d>>=w,f-=w,li=1<<32-gn(s)+f|a<<f|d,ui=g+r}else li=1<<g|a<<f|d,ui=r}function xd(r){r.return!==null&&(Ms(r,1),am(r,1,0))}function Nd(r){for(;r===uu;)uu=bo[--Lo],bo[Lo]=null,cu=bo[--Lo],bo[Lo]=null;for(;r===Vs;)Vs=Kn[--Gn],Kn[Gn]=null,ui=Kn[--Gn],Kn[Gn]=null,li=Kn[--Gn],Kn[Gn]=null}var Un=null,jn=null,wt=!1,pr=null;function lm(r,s){var a=Jn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=r,s=r.deletions,s===null?(r.deletions=[a],r.flags|=16):s.push(a)}function um(r,s){switch(r.tag){case 5:var a=r.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,Un=r,jn=ji(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,Un=r,jn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Vs!==null?{id:li,overflow:ui}:null,r.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Jn(18,null,null,0),a.stateNode=s,a.return=r,r.child=a,Un=r,jn=null,!0):!1;default:return!1}}function Dd(r){return(r.mode&1)!==0&&(r.flags&128)===0}function bd(r){if(wt){var s=jn;if(s){var a=s;if(!um(r,s)){if(Dd(r))throw Error(t(418));s=ji(a.nextSibling);var d=Un;s&&um(r,s)?lm(d,a):(r.flags=r.flags&-4097|2,wt=!1,Un=r)}}else{if(Dd(r))throw Error(t(418));r.flags=r.flags&-4097|2,wt=!1,Un=r}}}function cm(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Un=r}function du(r){if(r!==Un)return!1;if(!wt)return cm(r),wt=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!Sd(r.type,r.memoizedProps)),s&&(s=jn)){if(Dd(r))throw dm(),Error(t(418));for(;s;)lm(r,s),s=ji(s.nextSibling)}if(cm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(s===0){jn=ji(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}r=r.nextSibling}jn=null}}else jn=Un?ji(r.stateNode.nextSibling):null;return!0}function dm(){for(var r=jn;r;)r=ji(r.nextSibling)}function Oo(){jn=Un=null,wt=!1}function Ld(r){pr===null?pr=[r]:pr.push(r)}var jE=oe.ReactCurrentBatchConfig;function ba(r,s,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var d=a.stateNode}if(!d)throw Error(t(147,r));var f=d,g=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(w){var A=f.refs;w===null?delete A[g]:A[g]=w},s._stringRef=g,s)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function hu(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function hm(r){var s=r._init;return s(r._payload)}function fm(r){function s($,O){if(r){var q=$.deletions;q===null?($.deletions=[O],$.flags|=16):q.push(O)}}function a($,O){if(!r)return null;for(;O!==null;)s($,O),O=O.sibling;return null}function d($,O){for($=new Map;O!==null;)O.key!==null?$.set(O.key,O):$.set(O.index,O),O=O.sibling;return $}function f($,O){return $=Xi($,O),$.index=0,$.sibling=null,$}function g($,O,q){return $.index=q,r?(q=$.alternate,q!==null?(q=q.index,q<O?($.flags|=2,O):q):($.flags|=2,O)):($.flags|=1048576,O)}function w($){return r&&$.alternate===null&&($.flags|=2),$}function A($,O,q,se){return O===null||O.tag!==6?(O=Rh(q,$.mode,se),O.return=$,O):(O=f(O,q),O.return=$,O)}function N($,O,q,se){var Re=q.type;return Re===x?re($,O,q.props.children,se,q.key):O!==null&&(O.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Ct&&hm(Re)===O.type)?(se=f(O,q.props),se.ref=ba($,O,q),se.return=$,se):(se=Vu(q.type,q.key,q.props,null,$.mode,se),se.ref=ba($,O,q),se.return=$,se)}function K($,O,q,se){return O===null||O.tag!==4||O.stateNode.containerInfo!==q.containerInfo||O.stateNode.implementation!==q.implementation?(O=Ah(q,$.mode,se),O.return=$,O):(O=f(O,q.children||[]),O.return=$,O)}function re($,O,q,se,Re){return O===null||O.tag!==7?(O=qs(q,$.mode,se,Re),O.return=$,O):(O=f(O,q),O.return=$,O)}function ie($,O,q){if(typeof O=="string"&&O!==""||typeof O=="number")return O=Rh(""+O,$.mode,q),O.return=$,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case V:return q=Vu(O.type,O.key,O.props,null,$.mode,q),q.ref=ba($,null,O),q.return=$,q;case de:return O=Ah(O,$.mode,q),O.return=$,O;case Ct:var se=O._init;return ie($,se(O._payload),q)}if(er(O)||Ie(O))return O=qs(O,$.mode,q,null),O.return=$,O;hu($,O)}return null}function ne($,O,q,se){var Re=O!==null?O.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return Re!==null?null:A($,O,""+q,se);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case V:return q.key===Re?N($,O,q,se):null;case de:return q.key===Re?K($,O,q,se):null;case Ct:return Re=q._init,ne($,O,Re(q._payload),se)}if(er(q)||Ie(q))return Re!==null?null:re($,O,q,se,null);hu($,q)}return null}function me($,O,q,se,Re){if(typeof se=="string"&&se!==""||typeof se=="number")return $=$.get(q)||null,A(O,$,""+se,Re);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case V:return $=$.get(se.key===null?q:se.key)||null,N(O,$,se,Re);case de:return $=$.get(se.key===null?q:se.key)||null,K(O,$,se,Re);case Ct:var Pe=se._init;return me($,O,q,Pe(se._payload),Re)}if(er(se)||Ie(se))return $=$.get(q)||null,re(O,$,se,Re,null);hu(O,se)}return null}function Te($,O,q,se){for(var Re=null,Pe=null,ke=O,De=O=0,$t=null;ke!==null&&De<q.length;De++){ke.index>De?($t=ke,ke=null):$t=ke.sibling;var rt=ne($,ke,q[De],se);if(rt===null){ke===null&&(ke=$t);break}r&&ke&&rt.alternate===null&&s($,ke),O=g(rt,O,De),Pe===null?Re=rt:Pe.sibling=rt,Pe=rt,ke=$t}if(De===q.length)return a($,ke),wt&&Ms($,De),Re;if(ke===null){for(;De<q.length;De++)ke=ie($,q[De],se),ke!==null&&(O=g(ke,O,De),Pe===null?Re=ke:Pe.sibling=ke,Pe=ke);return wt&&Ms($,De),Re}for(ke=d($,ke);De<q.length;De++)$t=me(ke,$,De,q[De],se),$t!==null&&(r&&$t.alternate!==null&&ke.delete($t.key===null?De:$t.key),O=g($t,O,De),Pe===null?Re=$t:Pe.sibling=$t,Pe=$t);return r&&ke.forEach(function(Ji){return s($,Ji)}),wt&&Ms($,De),Re}function Se($,O,q,se){var Re=Ie(q);if(typeof Re!="function")throw Error(t(150));if(q=Re.call(q),q==null)throw Error(t(151));for(var Pe=Re=null,ke=O,De=O=0,$t=null,rt=q.next();ke!==null&&!rt.done;De++,rt=q.next()){ke.index>De?($t=ke,ke=null):$t=ke.sibling;var Ji=ne($,ke,rt.value,se);if(Ji===null){ke===null&&(ke=$t);break}r&&ke&&Ji.alternate===null&&s($,ke),O=g(Ji,O,De),Pe===null?Re=Ji:Pe.sibling=Ji,Pe=Ji,ke=$t}if(rt.done)return a($,ke),wt&&Ms($,De),Re;if(ke===null){for(;!rt.done;De++,rt=q.next())rt=ie($,rt.value,se),rt!==null&&(O=g(rt,O,De),Pe===null?Re=rt:Pe.sibling=rt,Pe=rt);return wt&&Ms($,De),Re}for(ke=d($,ke);!rt.done;De++,rt=q.next())rt=me(ke,$,De,rt.value,se),rt!==null&&(r&&rt.alternate!==null&&ke.delete(rt.key===null?De:rt.key),O=g(rt,O,De),Pe===null?Re=rt:Pe.sibling=rt,Pe=rt);return r&&ke.forEach(function(_T){return s($,_T)}),wt&&Ms($,De),Re}function Pt($,O,q,se){if(typeof q=="object"&&q!==null&&q.type===x&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case V:e:{for(var Re=q.key,Pe=O;Pe!==null;){if(Pe.key===Re){if(Re=q.type,Re===x){if(Pe.tag===7){a($,Pe.sibling),O=f(Pe,q.props.children),O.return=$,$=O;break e}}else if(Pe.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Ct&&hm(Re)===Pe.type){a($,Pe.sibling),O=f(Pe,q.props),O.ref=ba($,Pe,q),O.return=$,$=O;break e}a($,Pe);break}else s($,Pe);Pe=Pe.sibling}q.type===x?(O=qs(q.props.children,$.mode,se,q.key),O.return=$,$=O):(se=Vu(q.type,q.key,q.props,null,$.mode,se),se.ref=ba($,O,q),se.return=$,$=se)}return w($);case de:e:{for(Pe=q.key;O!==null;){if(O.key===Pe)if(O.tag===4&&O.stateNode.containerInfo===q.containerInfo&&O.stateNode.implementation===q.implementation){a($,O.sibling),O=f(O,q.children||[]),O.return=$,$=O;break e}else{a($,O);break}else s($,O);O=O.sibling}O=Ah(q,$.mode,se),O.return=$,$=O}return w($);case Ct:return Pe=q._init,Pt($,O,Pe(q._payload),se)}if(er(q))return Te($,O,q,se);if(Ie(q))return Se($,O,q,se);hu($,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,O!==null&&O.tag===6?(a($,O.sibling),O=f(O,q),O.return=$,$=O):(a($,O),O=Rh(q,$.mode,se),O.return=$,$=O),w($)):a($,O)}return Pt}var Vo=fm(!0),pm=fm(!1),fu=zi(null),pu=null,Mo=null,Od=null;function Vd(){Od=Mo=pu=null}function Md(r){var s=fu.current;yt(fu),r._currentValue=s}function Fd(r,s,a){for(;r!==null;){var d=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),r===a)break;r=r.return}}function Fo(r,s){pu=r,Od=Mo=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&s&&(Pn=!0),r.firstContext=null)}function Qn(r){var s=r._currentValue;if(Od!==r)if(r={context:r,memoizedValue:s,next:null},Mo===null){if(pu===null)throw Error(t(308));Mo=r,pu.dependencies={lanes:0,firstContext:r}}else Mo=Mo.next=r;return s}var Fs=null;function Ud(r){Fs===null?Fs=[r]:Fs.push(r)}function mm(r,s,a,d){var f=s.interleaved;return f===null?(a.next=a,Ud(s)):(a.next=f.next,f.next=a),s.interleaved=a,ci(r,d)}function ci(r,s){r.lanes|=s;var a=r.alternate;for(a!==null&&(a.lanes|=s),a=r,r=r.return;r!==null;)r.childLanes|=s,a=r.alternate,a!==null&&(a.childLanes|=s),a=r,r=r.return;return a.tag===3?a.stateNode:null}var Hi=!1;function jd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gm(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function di(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function qi(r,s,a){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,nt&2){var f=d.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),d.pending=s,ci(r,a)}return f=d.interleaved,f===null?(s.next=s,Ud(d)):(s.next=f.next,f.next=s),d.interleaved=s,ci(r,a)}function mu(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var d=s.lanes;d&=r.pendingLanes,a|=d,s.lanes=a,Li(r,a)}}function ym(r,s){var a=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,a===d)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=w:g=g.next=w,a=a.next}while(a!==null);g===null?f=g=s:g=g.next=s}else f=g=s;a={baseState:d.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:d.shared,effects:d.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}function gu(r,s,a,d){var f=r.updateQueue;Hi=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var N=A,K=N.next;N.next=null,w===null?g=K:w.next=K,w=N;var re=r.alternate;re!==null&&(re=re.updateQueue,A=re.lastBaseUpdate,A!==w&&(A===null?re.firstBaseUpdate=K:A.next=K,re.lastBaseUpdate=N))}if(g!==null){var ie=f.baseState;w=0,re=K=N=null,A=g;do{var ne=A.lane,me=A.eventTime;if((d&ne)===ne){re!==null&&(re=re.next={eventTime:me,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var Te=r,Se=A;switch(ne=s,me=a,Se.tag){case 1:if(Te=Se.payload,typeof Te=="function"){ie=Te.call(me,ie,ne);break e}ie=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Se.payload,ne=typeof Te=="function"?Te.call(me,ie,ne):Te,ne==null)break e;ie=he({},ie,ne);break e;case 2:Hi=!0}}A.callback!==null&&A.lane!==0&&(r.flags|=64,ne=f.effects,ne===null?f.effects=[A]:ne.push(A))}else me={eventTime:me,lane:ne,tag:A.tag,payload:A.payload,callback:A.callback,next:null},re===null?(K=re=me,N=ie):re=re.next=me,w|=ne;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;ne=A,A=ne.next,ne.next=null,f.lastBaseUpdate=ne,f.shared.pending=null}}while(!0);if(re===null&&(N=ie),f.baseState=N,f.firstBaseUpdate=K,f.lastBaseUpdate=re,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);zs|=w,r.lanes=w,r.memoizedState=ie}}function _m(r,s,a){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var d=r[s],f=d.callback;if(f!==null){if(d.callback=null,d=a,typeof f!="function")throw Error(t(191,f));f.call(d)}}}var La={},Vr=zi(La),Oa=zi(La),Va=zi(La);function Us(r){if(r===La)throw Error(t(174));return r}function zd(r,s){switch(ht(Va,s),ht(Oa,r),ht(Vr,La),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:St(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=St(s,r)}yt(Vr),ht(Vr,s)}function Uo(){yt(Vr),yt(Oa),yt(Va)}function vm(r){Us(Va.current);var s=Us(Vr.current),a=St(s,r.type);s!==a&&(ht(Oa,r),ht(Vr,a))}function Bd(r){Oa.current===r&&(yt(Vr),yt(Oa))}var Et=zi(0);function yu(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var $d=[];function Hd(){for(var r=0;r<$d.length;r++)$d[r]._workInProgressVersionPrimary=null;$d.length=0}var _u=oe.ReactCurrentDispatcher,qd=oe.ReactCurrentBatchConfig,js=0,Tt=null,Ot=null,zt=null,vu=!1,Ma=!1,Fa=0,zE=0;function ln(){throw Error(t(321))}function Wd(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!fr(r[a],s[a]))return!1;return!0}function Kd(r,s,a,d,f,g){if(js=g,Tt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,_u.current=r===null||r.memoizedState===null?qE:WE,r=a(d,f),Ma){g=0;do{if(Ma=!1,Fa=0,25<=g)throw Error(t(301));g+=1,zt=Ot=null,s.updateQueue=null,_u.current=KE,r=a(d,f)}while(Ma)}if(_u.current=Tu,s=Ot!==null&&Ot.next!==null,js=0,zt=Ot=Tt=null,vu=!1,s)throw Error(t(300));return r}function Gd(){var r=Fa!==0;return Fa=0,r}function Mr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?Tt.memoizedState=zt=r:zt=zt.next=r,zt}function Yn(){if(Ot===null){var r=Tt.alternate;r=r!==null?r.memoizedState:null}else r=Ot.next;var s=zt===null?Tt.memoizedState:zt.next;if(s!==null)zt=s,Ot=r;else{if(r===null)throw Error(t(310));Ot=r,r={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},zt===null?Tt.memoizedState=zt=r:zt=zt.next=r}return zt}function Ua(r,s){return typeof s=="function"?s(r):s}function Qd(r){var s=Yn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var d=Ot,f=d.baseQueue,g=a.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}d.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,d=d.baseState;var A=w=null,N=null,K=g;do{var re=K.lane;if((js&re)===re)N!==null&&(N=N.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),d=K.hasEagerState?K.eagerState:r(d,K.action);else{var ie={lane:re,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};N===null?(A=N=ie,w=d):N=N.next=ie,Tt.lanes|=re,zs|=re}K=K.next}while(K!==null&&K!==g);N===null?w=d:N.next=A,fr(d,s.memoizedState)||(Pn=!0),s.memoizedState=d,s.baseState=w,s.baseQueue=N,a.lastRenderedState=d}if(r=a.interleaved,r!==null){f=r;do g=f.lane,Tt.lanes|=g,zs|=g,f=f.next;while(f!==r)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Yd(r){var s=Yn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var d=a.dispatch,f=a.pending,g=s.memoizedState;if(f!==null){a.pending=null;var w=f=f.next;do g=r(g,w.action),w=w.next;while(w!==f);fr(g,s.memoizedState)||(Pn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,d]}function wm(){}function Em(r,s){var a=Tt,d=Yn(),f=s(),g=!fr(d.memoizedState,f);if(g&&(d.memoizedState=f,Pn=!0),d=d.queue,Xd(Sm.bind(null,a,d,r),[r]),d.getSnapshot!==s||g||zt!==null&&zt.memoizedState.tag&1){if(a.flags|=2048,ja(9,Im.bind(null,a,d,f,s),void 0,null),Bt===null)throw Error(t(349));js&30||Tm(a,s,f)}return f}function Tm(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=Tt.updateQueue,s===null?(s={lastEffect:null,stores:null},Tt.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function Im(r,s,a,d){s.value=a,s.getSnapshot=d,Rm(s)&&Am(r)}function Sm(r,s,a){return a(function(){Rm(s)&&Am(r)})}function Rm(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!fr(r,a)}catch{return!0}}function Am(r){var s=ci(r,1);s!==null&&_r(s,r,1,-1)}function Cm(r){var s=Mr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:r},s.queue=r,r=r.dispatch=HE.bind(null,Tt,r),[s.memoizedState,r]}function ja(r,s,a,d){return r={tag:r,create:s,destroy:a,deps:d,next:null},s=Tt.updateQueue,s===null?(s={lastEffect:null,stores:null},Tt.updateQueue=s,s.lastEffect=r.next=r):(a=s.lastEffect,a===null?s.lastEffect=r.next=r:(d=a.next,a.next=r,r.next=d,s.lastEffect=r)),r}function Pm(){return Yn().memoizedState}function wu(r,s,a,d){var f=Mr();Tt.flags|=r,f.memoizedState=ja(1|s,a,void 0,d===void 0?null:d)}function Eu(r,s,a,d){var f=Yn();d=d===void 0?null:d;var g=void 0;if(Ot!==null){var w=Ot.memoizedState;if(g=w.destroy,d!==null&&Wd(d,w.deps)){f.memoizedState=ja(s,a,g,d);return}}Tt.flags|=r,f.memoizedState=ja(1|s,a,g,d)}function km(r,s){return wu(8390656,8,r,s)}function Xd(r,s){return Eu(2048,8,r,s)}function xm(r,s){return Eu(4,2,r,s)}function Nm(r,s){return Eu(4,4,r,s)}function Dm(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function bm(r,s,a){return a=a!=null?a.concat([r]):null,Eu(4,4,Dm.bind(null,s,r),a)}function Jd(){}function Lm(r,s){var a=Yn();s=s===void 0?null:s;var d=a.memoizedState;return d!==null&&s!==null&&Wd(s,d[1])?d[0]:(a.memoizedState=[r,s],r)}function Om(r,s){var a=Yn();s=s===void 0?null:s;var d=a.memoizedState;return d!==null&&s!==null&&Wd(s,d[1])?d[0]:(r=r(),a.memoizedState=[r,s],r)}function Vm(r,s,a){return js&21?(fr(a,s)||(a=ks(),Tt.lanes|=a,zs|=a,r.baseState=!0),s):(r.baseState&&(r.baseState=!1,Pn=!0),r.memoizedState=a)}function BE(r,s){var a=qe;qe=a!==0&&4>a?a:4,r(!0);var d=qd.transition;qd.transition={};try{r(!1),s()}finally{qe=a,qd.transition=d}}function Mm(){return Yn().memoizedState}function $E(r,s,a){var d=Qi(r);if(a={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null},Fm(r))Um(s,a);else if(a=mm(r,s,a,d),a!==null){var f=vn();_r(a,r,d,f),jm(a,s,d)}}function HE(r,s,a){var d=Qi(r),f={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null};if(Fm(r))Um(s,f);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,A=g(w,a);if(f.hasEagerState=!0,f.eagerState=A,fr(A,w)){var N=s.interleaved;N===null?(f.next=f,Ud(s)):(f.next=N.next,N.next=f),s.interleaved=f;return}}catch{}finally{}a=mm(r,s,f,d),a!==null&&(f=vn(),_r(a,r,d,f),jm(a,s,d))}}function Fm(r){var s=r.alternate;return r===Tt||s!==null&&s===Tt}function Um(r,s){Ma=vu=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function jm(r,s,a){if(a&4194240){var d=s.lanes;d&=r.pendingLanes,a|=d,s.lanes=a,Li(r,a)}}var Tu={readContext:Qn,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},qE={readContext:Qn,useCallback:function(r,s){return Mr().memoizedState=[r,s===void 0?null:s],r},useContext:Qn,useEffect:km,useImperativeHandle:function(r,s,a){return a=a!=null?a.concat([r]):null,wu(4194308,4,Dm.bind(null,s,r),a)},useLayoutEffect:function(r,s){return wu(4194308,4,r,s)},useInsertionEffect:function(r,s){return wu(4,2,r,s)},useMemo:function(r,s){var a=Mr();return s=s===void 0?null:s,r=r(),a.memoizedState=[r,s],r},useReducer:function(r,s,a){var d=Mr();return s=a!==void 0?a(s):s,d.memoizedState=d.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},d.queue=r,r=r.dispatch=$E.bind(null,Tt,r),[d.memoizedState,r]},useRef:function(r){var s=Mr();return r={current:r},s.memoizedState=r},useState:Cm,useDebugValue:Jd,useDeferredValue:function(r){return Mr().memoizedState=r},useTransition:function(){var r=Cm(!1),s=r[0];return r=BE.bind(null,r[1]),Mr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,a){var d=Tt,f=Mr();if(wt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Bt===null)throw Error(t(349));js&30||Tm(d,s,a)}f.memoizedState=a;var g={value:a,getSnapshot:s};return f.queue=g,km(Sm.bind(null,d,g,r),[r]),d.flags|=2048,ja(9,Im.bind(null,d,g,a,s),void 0,null),a},useId:function(){var r=Mr(),s=Bt.identifierPrefix;if(wt){var a=ui,d=li;a=(d&~(1<<32-gn(d)-1)).toString(32)+a,s=":"+s+"R"+a,a=Fa++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=zE++,s=":"+s+"r"+a.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},WE={readContext:Qn,useCallback:Lm,useContext:Qn,useEffect:Xd,useImperativeHandle:bm,useInsertionEffect:xm,useLayoutEffect:Nm,useMemo:Om,useReducer:Qd,useRef:Pm,useState:function(){return Qd(Ua)},useDebugValue:Jd,useDeferredValue:function(r){var s=Yn();return Vm(s,Ot.memoizedState,r)},useTransition:function(){var r=Qd(Ua)[0],s=Yn().memoizedState;return[r,s]},useMutableSource:wm,useSyncExternalStore:Em,useId:Mm,unstable_isNewReconciler:!1},KE={readContext:Qn,useCallback:Lm,useContext:Qn,useEffect:Xd,useImperativeHandle:bm,useInsertionEffect:xm,useLayoutEffect:Nm,useMemo:Om,useReducer:Yd,useRef:Pm,useState:function(){return Yd(Ua)},useDebugValue:Jd,useDeferredValue:function(r){var s=Yn();return Ot===null?s.memoizedState=r:Vm(s,Ot.memoizedState,r)},useTransition:function(){var r=Yd(Ua)[0],s=Yn().memoizedState;return[r,s]},useMutableSource:wm,useSyncExternalStore:Em,useId:Mm,unstable_isNewReconciler:!1};function mr(r,s){if(r&&r.defaultProps){s=he({},s),r=r.defaultProps;for(var a in r)s[a]===void 0&&(s[a]=r[a]);return s}return s}function Zd(r,s,a,d){s=r.memoizedState,a=a(d,s),a=a==null?s:he({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Iu={isMounted:function(r){return(r=r._reactInternals)?He(r)===r:!1},enqueueSetState:function(r,s,a){r=r._reactInternals;var d=vn(),f=Qi(r),g=di(d,f);g.payload=s,a!=null&&(g.callback=a),s=qi(r,g,f),s!==null&&(_r(s,r,f,d),mu(s,r,f))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var d=vn(),f=Qi(r),g=di(d,f);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=qi(r,g,f),s!==null&&(_r(s,r,f,d),mu(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=vn(),d=Qi(r),f=di(a,d);f.tag=2,s!=null&&(f.callback=s),s=qi(r,f,d),s!==null&&(_r(s,r,d,a),mu(s,r,d))}};function zm(r,s,a,d,f,g,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,g,w):s.prototype&&s.prototype.isPureReactComponent?!Aa(a,d)||!Aa(f,g):!0}function Bm(r,s,a){var d=!1,f=Bi,g=s.contextType;return typeof g=="object"&&g!==null?g=Qn(g):(f=Cn(s)?Os:an.current,d=s.contextTypes,g=(d=d!=null)?Do(r,f):Bi),s=new s(a,g),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Iu,r.stateNode=s,s._reactInternals=r,d&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=g),s}function $m(r,s,a,d){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,d),s.state!==r&&Iu.enqueueReplaceState(s,s.state,null)}function eh(r,s,a,d){var f=r.stateNode;f.props=a,f.state=r.memoizedState,f.refs={},jd(r);var g=s.contextType;typeof g=="object"&&g!==null?f.context=Qn(g):(g=Cn(s)?Os:an.current,f.context=Do(r,g)),f.state=r.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(Zd(r,s,g,a),f.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Iu.enqueueReplaceState(f,f.state,null),gu(r,a,f,d),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function jo(r,s){try{var a="",d=s;do a+=Le(d),d=d.return;while(d);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:r,source:s,stack:f,digest:null}}function th(r,s,a){return{value:r,source:null,stack:a??null,digest:s??null}}function nh(r,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var GE=typeof WeakMap=="function"?WeakMap:Map;function Hm(r,s,a){a=di(-1,a),a.tag=3,a.payload={element:null};var d=s.value;return a.callback=function(){xu||(xu=!0,yh=d),nh(r,s)},a}function qm(r,s,a){a=di(-1,a),a.tag=3;var d=r.type.getDerivedStateFromError;if(typeof d=="function"){var f=s.value;a.payload=function(){return d(f)},a.callback=function(){nh(r,s)}}var g=r.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){nh(r,s),typeof d!="function"&&(Ki===null?Ki=new Set([this]):Ki.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function Wm(r,s,a){var d=r.pingCache;if(d===null){d=r.pingCache=new GE;var f=new Set;d.set(s,f)}else f=d.get(s),f===void 0&&(f=new Set,d.set(s,f));f.has(a)||(f.add(a),r=lT.bind(null,r,s,a),s.then(r,r))}function Km(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function Gm(r,s,a,d,f){return r.mode&1?(r.flags|=65536,r.lanes=f,r):(r===s?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=di(-1,1),s.tag=2,qi(a,s,1))),a.lanes|=1),r)}var QE=oe.ReactCurrentOwner,Pn=!1;function _n(r,s,a,d){s.child=r===null?pm(s,null,a,d):Vo(s,r.child,a,d)}function Qm(r,s,a,d,f){a=a.render;var g=s.ref;return Fo(s,f),d=Kd(r,s,a,d,g,f),a=Gd(),r!==null&&!Pn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,hi(r,s,f)):(wt&&a&&xd(s),s.flags|=1,_n(r,s,d,f),s.child)}function Ym(r,s,a,d,f){if(r===null){var g=a.type;return typeof g=="function"&&!Sh(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,Xm(r,s,g,d,f)):(r=Vu(a.type,null,d,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,!(r.lanes&f)){var w=g.memoizedProps;if(a=a.compare,a=a!==null?a:Aa,a(w,d)&&r.ref===s.ref)return hi(r,s,f)}return s.flags|=1,r=Xi(g,d),r.ref=s.ref,r.return=s,s.child=r}function Xm(r,s,a,d,f){if(r!==null){var g=r.memoizedProps;if(Aa(g,d)&&r.ref===s.ref)if(Pn=!1,s.pendingProps=d=g,(r.lanes&f)!==0)r.flags&131072&&(Pn=!0);else return s.lanes=r.lanes,hi(r,s,f)}return rh(r,s,a,d,f)}function Jm(r,s,a){var d=s.pendingProps,f=d.children,g=r!==null?r.memoizedState:null;if(d.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},ht(Bo,zn),zn|=a;else{if(!(a&1073741824))return r=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,ht(Bo,zn),zn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=g!==null?g.baseLanes:a,ht(Bo,zn),zn|=d}else g!==null?(d=g.baseLanes|a,s.memoizedState=null):d=a,ht(Bo,zn),zn|=d;return _n(r,s,f,a),s.child}function Zm(r,s){var a=s.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function rh(r,s,a,d,f){var g=Cn(a)?Os:an.current;return g=Do(s,g),Fo(s,f),a=Kd(r,s,a,d,g,f),d=Gd(),r!==null&&!Pn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,hi(r,s,f)):(wt&&d&&xd(s),s.flags|=1,_n(r,s,a,f),s.child)}function eg(r,s,a,d,f){if(Cn(a)){var g=!0;au(s)}else g=!1;if(Fo(s,f),s.stateNode===null)Ru(r,s),Bm(s,a,d),eh(s,a,d,f),d=!0;else if(r===null){var w=s.stateNode,A=s.memoizedProps;w.props=A;var N=w.context,K=a.contextType;typeof K=="object"&&K!==null?K=Qn(K):(K=Cn(a)?Os:an.current,K=Do(s,K));var re=a.getDerivedStateFromProps,ie=typeof re=="function"||typeof w.getSnapshotBeforeUpdate=="function";ie||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==d||N!==K)&&$m(s,w,d,K),Hi=!1;var ne=s.memoizedState;w.state=ne,gu(s,d,w,f),N=s.memoizedState,A!==d||ne!==N||An.current||Hi?(typeof re=="function"&&(Zd(s,a,re,d),N=s.memoizedState),(A=Hi||zm(s,a,A,d,ne,N,K))?(ie||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=N),w.props=d,w.state=N,w.context=K,d=A):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{w=s.stateNode,gm(r,s),A=s.memoizedProps,K=s.type===s.elementType?A:mr(s.type,A),w.props=K,ie=s.pendingProps,ne=w.context,N=a.contextType,typeof N=="object"&&N!==null?N=Qn(N):(N=Cn(a)?Os:an.current,N=Do(s,N));var me=a.getDerivedStateFromProps;(re=typeof me=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==ie||ne!==N)&&$m(s,w,d,N),Hi=!1,ne=s.memoizedState,w.state=ne,gu(s,d,w,f);var Te=s.memoizedState;A!==ie||ne!==Te||An.current||Hi?(typeof me=="function"&&(Zd(s,a,me,d),Te=s.memoizedState),(K=Hi||zm(s,a,K,d,ne,Te,N)||!1)?(re||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(d,Te,N),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(d,Te,N)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||A===r.memoizedProps&&ne===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&ne===r.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=Te),w.props=d,w.state=Te,w.context=N,d=K):(typeof w.componentDidUpdate!="function"||A===r.memoizedProps&&ne===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&ne===r.memoizedState||(s.flags|=1024),d=!1)}return ih(r,s,a,d,g,f)}function ih(r,s,a,d,f,g){Zm(r,s);var w=(s.flags&128)!==0;if(!d&&!w)return f&&sm(s,a,!1),hi(r,s,g);d=s.stateNode,QE.current=s;var A=w&&typeof a.getDerivedStateFromError!="function"?null:d.render();return s.flags|=1,r!==null&&w?(s.child=Vo(s,r.child,null,g),s.child=Vo(s,null,A,g)):_n(r,s,A,g),s.memoizedState=d.state,f&&sm(s,a,!0),s.child}function tg(r){var s=r.stateNode;s.pendingContext?rm(r,s.pendingContext,s.pendingContext!==s.context):s.context&&rm(r,s.context,!1),zd(r,s.containerInfo)}function ng(r,s,a,d,f){return Oo(),Ld(f),s.flags|=256,_n(r,s,a,d),s.child}var sh={dehydrated:null,treeContext:null,retryLane:0};function oh(r){return{baseLanes:r,cachePool:null,transitions:null}}function rg(r,s,a){var d=s.pendingProps,f=Et.current,g=!1,w=(s.flags&128)!==0,A;if((A=w)||(A=r!==null&&r.memoizedState===null?!1:(f&2)!==0),A?(g=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),ht(Et,f&1),r===null)return bd(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(s.mode&1?r.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(w=d.children,r=d.fallback,g?(d=s.mode,g=s.child,w={mode:"hidden",children:w},!(d&1)&&g!==null?(g.childLanes=0,g.pendingProps=w):g=Mu(w,d,0,null),r=qs(r,d,a,null),g.return=s,r.return=s,g.sibling=r,s.child=g,s.child.memoizedState=oh(a),s.memoizedState=sh,r):ah(s,w));if(f=r.memoizedState,f!==null&&(A=f.dehydrated,A!==null))return YE(r,s,w,d,A,f,a);if(g){g=d.fallback,w=s.mode,f=r.child,A=f.sibling;var N={mode:"hidden",children:d.children};return!(w&1)&&s.child!==f?(d=s.child,d.childLanes=0,d.pendingProps=N,s.deletions=null):(d=Xi(f,N),d.subtreeFlags=f.subtreeFlags&14680064),A!==null?g=Xi(A,g):(g=qs(g,w,a,null),g.flags|=2),g.return=s,d.return=s,d.sibling=g,s.child=d,d=g,g=s.child,w=r.child.memoizedState,w=w===null?oh(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=r.childLanes&~a,s.memoizedState=sh,d}return g=r.child,r=g.sibling,d=Xi(g,{mode:"visible",children:d.children}),!(s.mode&1)&&(d.lanes=a),d.return=s,d.sibling=null,r!==null&&(a=s.deletions,a===null?(s.deletions=[r],s.flags|=16):a.push(r)),s.child=d,s.memoizedState=null,d}function ah(r,s){return s=Mu({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function Su(r,s,a,d){return d!==null&&Ld(d),Vo(s,r.child,null,a),r=ah(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function YE(r,s,a,d,f,g,w){if(a)return s.flags&256?(s.flags&=-257,d=th(Error(t(422))),Su(r,s,w,d)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(g=d.fallback,f=s.mode,d=Mu({mode:"visible",children:d.children},f,0,null),g=qs(g,f,w,null),g.flags|=2,d.return=s,g.return=s,d.sibling=g,s.child=d,s.mode&1&&Vo(s,r.child,null,w),s.child.memoizedState=oh(w),s.memoizedState=sh,g);if(!(s.mode&1))return Su(r,s,w,null);if(f.data==="$!"){if(d=f.nextSibling&&f.nextSibling.dataset,d)var A=d.dgst;return d=A,g=Error(t(419)),d=th(g,d,void 0),Su(r,s,w,d)}if(A=(w&r.childLanes)!==0,Pn||A){if(d=Bt,d!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=f&(d.suspendedLanes|w)?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,ci(r,f),_r(d,r,f,-1))}return Ih(),d=th(Error(t(421))),Su(r,s,w,d)}return f.data==="$?"?(s.flags|=128,s.child=r.child,s=uT.bind(null,r),f._reactRetry=s,null):(r=g.treeContext,jn=ji(f.nextSibling),Un=s,wt=!0,pr=null,r!==null&&(Kn[Gn++]=li,Kn[Gn++]=ui,Kn[Gn++]=Vs,li=r.id,ui=r.overflow,Vs=s),s=ah(s,d.children),s.flags|=4096,s)}function ig(r,s,a){r.lanes|=s;var d=r.alternate;d!==null&&(d.lanes|=s),Fd(r.return,s,a)}function lh(r,s,a,d,f){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:a,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=a,g.tailMode=f)}function sg(r,s,a){var d=s.pendingProps,f=d.revealOrder,g=d.tail;if(_n(r,s,d.children,a),d=Et.current,d&2)d=d&1|2,s.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&ig(r,a,s);else if(r.tag===19)ig(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}d&=1}if(ht(Et,d),!(s.mode&1))s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)r=a.alternate,r!==null&&yu(r)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),lh(s,!1,f,a,g);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&yu(r)===null){s.child=f;break}r=f.sibling,f.sibling=a,a=f,f=r}lh(s,!0,a,null,g);break;case"together":lh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ru(r,s){!(s.mode&1)&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function hi(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),zs|=s.lanes,!(a&s.childLanes))return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,a=Xi(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=Xi(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function XE(r,s,a){switch(s.tag){case 3:tg(s),Oo();break;case 5:vm(s);break;case 1:Cn(s.type)&&au(s);break;case 4:zd(s,s.stateNode.containerInfo);break;case 10:var d=s.type._context,f=s.memoizedProps.value;ht(fu,d._currentValue),d._currentValue=f;break;case 13:if(d=s.memoizedState,d!==null)return d.dehydrated!==null?(ht(Et,Et.current&1),s.flags|=128,null):a&s.child.childLanes?rg(r,s,a):(ht(Et,Et.current&1),r=hi(r,s,a),r!==null?r.sibling:null);ht(Et,Et.current&1);break;case 19:if(d=(a&s.childLanes)!==0,r.flags&128){if(d)return sg(r,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ht(Et,Et.current),d)break;return null;case 22:case 23:return s.lanes=0,Jm(r,s,a)}return hi(r,s,a)}var og,uh,ag,lg;og=function(r,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},uh=function(){},ag=function(r,s,a,d){var f=r.memoizedProps;if(f!==d){r=s.stateNode,Us(Vr.current);var g=null;switch(a){case"input":f=Qr(r,f),d=Qr(r,d),g=[];break;case"select":f=he({},f,{value:void 0}),d=he({},d,{value:void 0}),g=[];break;case"textarea":f=tr(r,f),d=tr(r,d),g=[];break;default:typeof f.onClick!="function"&&typeof d.onClick=="function"&&(r.onclick=iu)}Pr(a,d);var w;a=null;for(K in f)if(!d.hasOwnProperty(K)&&f.hasOwnProperty(K)&&f[K]!=null)if(K==="style"){var A=f[K];for(w in A)A.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(o.hasOwnProperty(K)?g||(g=[]):(g=g||[]).push(K,null));for(K in d){var N=d[K];if(A=f!=null?f[K]:void 0,d.hasOwnProperty(K)&&N!==A&&(N!=null||A!=null))if(K==="style")if(A){for(w in A)!A.hasOwnProperty(w)||N&&N.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in N)N.hasOwnProperty(w)&&A[w]!==N[w]&&(a||(a={}),a[w]=N[w])}else a||(g||(g=[]),g.push(K,a)),a=N;else K==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,A=A?A.__html:void 0,N!=null&&A!==N&&(g=g||[]).push(K,N)):K==="children"?typeof N!="string"&&typeof N!="number"||(g=g||[]).push(K,""+N):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(o.hasOwnProperty(K)?(N!=null&&K==="onScroll"&&gt("scroll",r),g||A===N||(g=[])):(g=g||[]).push(K,N))}a&&(g=g||[]).push("style",a);var K=g;(s.updateQueue=K)&&(s.flags|=4)}},lg=function(r,s,a,d){a!==d&&(s.flags|=4)};function za(r,s){if(!wt)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function un(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,d=0;if(s)for(var f=r.child;f!==null;)a|=f.lanes|f.childLanes,d|=f.subtreeFlags&14680064,d|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)a|=f.lanes|f.childLanes,d|=f.subtreeFlags,d|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=d,r.childLanes=a,s}function JE(r,s,a){var d=s.pendingProps;switch(Nd(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(s),null;case 1:return Cn(s.type)&&ou(),un(s),null;case 3:return d=s.stateNode,Uo(),yt(An),yt(an),Hd(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(r===null||r.child===null)&&(du(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,pr!==null&&(wh(pr),pr=null))),uh(r,s),un(s),null;case 5:Bd(s);var f=Us(Va.current);if(a=s.type,r!==null&&s.stateNode!=null)ag(r,s,a,d,f),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!d){if(s.stateNode===null)throw Error(t(166));return un(s),null}if(r=Us(Vr.current),du(s)){d=s.stateNode,a=s.type;var g=s.memoizedProps;switch(d[Or]=s,d[Na]=g,r=(s.mode&1)!==0,a){case"dialog":gt("cancel",d),gt("close",d);break;case"iframe":case"object":case"embed":gt("load",d);break;case"video":case"audio":for(f=0;f<Pa.length;f++)gt(Pa[f],d);break;case"source":gt("error",d);break;case"img":case"image":case"link":gt("error",d),gt("load",d);break;case"details":gt("toggle",d);break;case"input":Si(d,g),gt("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!g.multiple},gt("invalid",d);break;case"textarea":Yr(d,g),gt("invalid",d)}Pr(a,g),f=null;for(var w in g)if(g.hasOwnProperty(w)){var A=g[w];w==="children"?typeof A=="string"?d.textContent!==A&&(g.suppressHydrationWarning!==!0&&ru(d.textContent,A,r),f=["children",A]):typeof A=="number"&&d.textContent!==""+A&&(g.suppressHydrationWarning!==!0&&ru(d.textContent,A,r),f=["children",""+A]):o.hasOwnProperty(w)&&A!=null&&w==="onScroll"&&gt("scroll",d)}switch(a){case"input":Hn(d),uo(d,g,!0);break;case"textarea":Hn(d),En(d);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(d.onclick=iu)}d=f,s.updateQueue=d,d!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=lt(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=w.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof d.is=="string"?r=w.createElement(a,{is:d.is}):(r=w.createElement(a),a==="select"&&(w=r,d.multiple?w.multiple=!0:d.size&&(w.size=d.size))):r=w.createElementNS(r,a),r[Or]=s,r[Na]=d,og(r,s,!1,!1),s.stateNode=r;e:{switch(w=ki(a,d),a){case"dialog":gt("cancel",r),gt("close",r),f=d;break;case"iframe":case"object":case"embed":gt("load",r),f=d;break;case"video":case"audio":for(f=0;f<Pa.length;f++)gt(Pa[f],r);f=d;break;case"source":gt("error",r),f=d;break;case"img":case"image":case"link":gt("error",r),gt("load",r),f=d;break;case"details":gt("toggle",r),f=d;break;case"input":Si(r,d),f=Qr(r,d),gt("invalid",r);break;case"option":f=d;break;case"select":r._wrapperState={wasMultiple:!!d.multiple},f=he({},d,{value:void 0}),gt("invalid",r);break;case"textarea":Yr(r,d),f=tr(r,d),gt("invalid",r);break;default:f=d}Pr(a,f),A=f;for(g in A)if(A.hasOwnProperty(g)){var N=A[g];g==="style"?As(r,N):g==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&Rs(r,N)):g==="children"?typeof N=="string"?(a!=="textarea"||N!=="")&&Wt(r,N):typeof N=="number"&&Wt(r,""+N):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?N!=null&&g==="onScroll"&&gt("scroll",r):N!=null&&J(r,g,N,w))}switch(a){case"input":Hn(r),uo(r,d,!1);break;case"textarea":Hn(r),En(r);break;case"option":d.value!=null&&r.setAttribute("value",""+et(d.value));break;case"select":r.multiple=!!d.multiple,g=d.value,g!=null?qt(r,!!d.multiple,g,!1):d.defaultValue!=null&&qt(r,!!d.multiple,d.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=iu)}switch(a){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return un(s),null;case 6:if(r&&s.stateNode!=null)lg(r,s,r.memoizedProps,d);else{if(typeof d!="string"&&s.stateNode===null)throw Error(t(166));if(a=Us(Va.current),Us(Vr.current),du(s)){if(d=s.stateNode,a=s.memoizedProps,d[Or]=s,(g=d.nodeValue!==a)&&(r=Un,r!==null))switch(r.tag){case 3:ru(d.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&ru(d.nodeValue,a,(r.mode&1)!==0)}g&&(s.flags|=4)}else d=(a.nodeType===9?a:a.ownerDocument).createTextNode(d),d[Or]=s,s.stateNode=d}return un(s),null;case 13:if(yt(Et),d=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(wt&&jn!==null&&s.mode&1&&!(s.flags&128))dm(),Oo(),s.flags|=98560,g=!1;else if(g=du(s),d!==null&&d.dehydrated!==null){if(r===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Or]=s}else Oo(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;un(s),g=!1}else pr!==null&&(wh(pr),pr=null),g=!0;if(!g)return s.flags&65536?s:null}return s.flags&128?(s.lanes=a,s):(d=d!==null,d!==(r!==null&&r.memoizedState!==null)&&d&&(s.child.flags|=8192,s.mode&1&&(r===null||Et.current&1?Vt===0&&(Vt=3):Ih())),s.updateQueue!==null&&(s.flags|=4),un(s),null);case 4:return Uo(),uh(r,s),r===null&&ka(s.stateNode.containerInfo),un(s),null;case 10:return Md(s.type._context),un(s),null;case 17:return Cn(s.type)&&ou(),un(s),null;case 19:if(yt(Et),g=s.memoizedState,g===null)return un(s),null;if(d=(s.flags&128)!==0,w=g.rendering,w===null)if(d)za(g,!1);else{if(Vt!==0||r!==null&&r.flags&128)for(r=s.child;r!==null;){if(w=yu(r),w!==null){for(s.flags|=128,za(g,!1),d=w.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),s.subtreeFlags=0,d=a,a=s.child;a!==null;)g=a,r=d,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=r,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,r=w.dependencies,g.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return ht(Et,Et.current&1|2),s.child}r=r.sibling}g.tail!==null&&ot()>$o&&(s.flags|=128,d=!0,za(g,!1),s.lanes=4194304)}else{if(!d)if(r=yu(w),r!==null){if(s.flags|=128,d=!0,a=r.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),za(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!wt)return un(s),null}else 2*ot()-g.renderingStartTime>$o&&a!==1073741824&&(s.flags|=128,d=!0,za(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(a=g.last,a!==null?a.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=ot(),s.sibling=null,a=Et.current,ht(Et,d?a&1|2:a&1),s):(un(s),null);case 22:case 23:return Th(),d=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==d&&(s.flags|=8192),d&&s.mode&1?zn&1073741824&&(un(s),s.subtreeFlags&6&&(s.flags|=8192)):un(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function ZE(r,s){switch(Nd(s),s.tag){case 1:return Cn(s.type)&&ou(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Uo(),yt(An),yt(an),Hd(),r=s.flags,r&65536&&!(r&128)?(s.flags=r&-65537|128,s):null;case 5:return Bd(s),null;case 13:if(yt(Et),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Oo()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return yt(Et),null;case 4:return Uo(),null;case 10:return Md(s.type._context),null;case 22:case 23:return Th(),null;case 24:return null;default:return null}}var Au=!1,cn=!1,eT=typeof WeakSet=="function"?WeakSet:Set,_e=null;function zo(r,s){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(d){At(r,s,d)}else a.current=null}function ch(r,s,a){try{a()}catch(d){At(r,s,d)}}var ug=!1;function tT(r,s){if(Td=Mi,r=zp(),pd(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var d=a.getSelection&&a.getSelection();if(d&&d.rangeCount!==0){a=d.anchorNode;var f=d.anchorOffset,g=d.focusNode;d=d.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var w=0,A=-1,N=-1,K=0,re=0,ie=r,ne=null;t:for(;;){for(var me;ie!==a||f!==0&&ie.nodeType!==3||(A=w+f),ie!==g||d!==0&&ie.nodeType!==3||(N=w+d),ie.nodeType===3&&(w+=ie.nodeValue.length),(me=ie.firstChild)!==null;)ne=ie,ie=me;for(;;){if(ie===r)break t;if(ne===a&&++K===f&&(A=w),ne===g&&++re===d&&(N=w),(me=ie.nextSibling)!==null)break;ie=ne,ne=ie.parentNode}ie=me}a=A===-1||N===-1?null:{start:A,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Id={focusedElem:r,selectionRange:a},Mi=!1,_e=s;_e!==null;)if(s=_e,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,_e=r;else for(;_e!==null;){s=_e;try{var Te=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Te!==null){var Se=Te.memoizedProps,Pt=Te.memoizedState,$=s.stateNode,O=$.getSnapshotBeforeUpdate(s.elementType===s.type?Se:mr(s.type,Se),Pt);$.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var q=s.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(se){At(s,s.return,se)}if(r=s.sibling,r!==null){r.return=s.return,_e=r;break}_e=s.return}return Te=ug,ug=!1,Te}function Ba(r,s,a){var d=s.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var f=d=d.next;do{if((f.tag&r)===r){var g=f.destroy;f.destroy=void 0,g!==void 0&&ch(s,a,g)}f=f.next}while(f!==d)}}function Cu(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var d=a.create;a.destroy=d()}a=a.next}while(a!==s)}}function dh(r){var s=r.ref;if(s!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof s=="function"?s(r):s.current=r}}function cg(r){var s=r.alternate;s!==null&&(r.alternate=null,cg(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[Or],delete s[Na],delete s[Cd],delete s[ME],delete s[FE])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function dg(r){return r.tag===5||r.tag===3||r.tag===4}function hg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||dg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function hh(r,s,a){var d=r.tag;if(d===5||d===6)r=r.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(r,s):a.insertBefore(r,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(r,a)):(s=a,s.appendChild(r)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=iu));else if(d!==4&&(r=r.child,r!==null))for(hh(r,s,a),r=r.sibling;r!==null;)hh(r,s,a),r=r.sibling}function fh(r,s,a){var d=r.tag;if(d===5||d===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(d!==4&&(r=r.child,r!==null))for(fh(r,s,a),r=r.sibling;r!==null;)fh(r,s,a),r=r.sibling}var Xt=null,gr=!1;function Wi(r,s,a){for(a=a.child;a!==null;)fg(r,s,a),a=a.sibling}function fg(r,s,a){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(In,a)}catch{}switch(a.tag){case 5:cn||zo(a,s);case 6:var d=Xt,f=gr;Xt=null,Wi(r,s,a),Xt=d,gr=f,Xt!==null&&(gr?(r=Xt,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):Xt.removeChild(a.stateNode));break;case 18:Xt!==null&&(gr?(r=Xt,a=a.stateNode,r.nodeType===8?Ad(r.parentNode,a):r.nodeType===1&&Ad(r,a),dr(r)):Ad(Xt,a.stateNode));break;case 4:d=Xt,f=gr,Xt=a.stateNode.containerInfo,gr=!0,Wi(r,s,a),Xt=d,gr=f;break;case 0:case 11:case 14:case 15:if(!cn&&(d=a.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){f=d=d.next;do{var g=f,w=g.destroy;g=g.tag,w!==void 0&&(g&2||g&4)&&ch(a,s,w),f=f.next}while(f!==d)}Wi(r,s,a);break;case 1:if(!cn&&(zo(a,s),d=a.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=a.memoizedProps,d.state=a.memoizedState,d.componentWillUnmount()}catch(A){At(a,s,A)}Wi(r,s,a);break;case 21:Wi(r,s,a);break;case 22:a.mode&1?(cn=(d=cn)||a.memoizedState!==null,Wi(r,s,a),cn=d):Wi(r,s,a);break;default:Wi(r,s,a)}}function pg(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new eT),s.forEach(function(d){var f=cT.bind(null,r,d);a.has(d)||(a.add(d),d.then(f,f))})}}function yr(r,s){var a=s.deletions;if(a!==null)for(var d=0;d<a.length;d++){var f=a[d];try{var g=r,w=s,A=w;e:for(;A!==null;){switch(A.tag){case 5:Xt=A.stateNode,gr=!1;break e;case 3:Xt=A.stateNode.containerInfo,gr=!0;break e;case 4:Xt=A.stateNode.containerInfo,gr=!0;break e}A=A.return}if(Xt===null)throw Error(t(160));fg(g,w,f),Xt=null,gr=!1;var N=f.alternate;N!==null&&(N.return=null),f.return=null}catch(K){At(f,s,K)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)mg(s,r),s=s.sibling}function mg(r,s){var a=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(yr(s,r),Fr(r),d&4){try{Ba(3,r,r.return),Cu(3,r)}catch(Se){At(r,r.return,Se)}try{Ba(5,r,r.return)}catch(Se){At(r,r.return,Se)}}break;case 1:yr(s,r),Fr(r),d&512&&a!==null&&zo(a,a.return);break;case 5:if(yr(s,r),Fr(r),d&512&&a!==null&&zo(a,a.return),r.flags&32){var f=r.stateNode;try{Wt(f,"")}catch(Se){At(r,r.return,Se)}}if(d&4&&(f=r.stateNode,f!=null)){var g=r.memoizedProps,w=a!==null?a.memoizedProps:g,A=r.type,N=r.updateQueue;if(r.updateQueue=null,N!==null)try{A==="input"&&g.type==="radio"&&g.name!=null&&Ri(f,g),ki(A,w);var K=ki(A,g);for(w=0;w<N.length;w+=2){var re=N[w],ie=N[w+1];re==="style"?As(f,ie):re==="dangerouslySetInnerHTML"?Rs(f,ie):re==="children"?Wt(f,ie):J(f,re,ie,K)}switch(A){case"input":Ss(f,g);break;case"textarea":Rr(f,g);break;case"select":var ne=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var me=g.value;me!=null?qt(f,!!g.multiple,me,!1):ne!==!!g.multiple&&(g.defaultValue!=null?qt(f,!!g.multiple,g.defaultValue,!0):qt(f,!!g.multiple,g.multiple?[]:"",!1))}f[Na]=g}catch(Se){At(r,r.return,Se)}}break;case 6:if(yr(s,r),Fr(r),d&4){if(r.stateNode===null)throw Error(t(162));f=r.stateNode,g=r.memoizedProps;try{f.nodeValue=g}catch(Se){At(r,r.return,Se)}}break;case 3:if(yr(s,r),Fr(r),d&4&&a!==null&&a.memoizedState.isDehydrated)try{dr(s.containerInfo)}catch(Se){At(r,r.return,Se)}break;case 4:yr(s,r),Fr(r);break;case 13:yr(s,r),Fr(r),f=r.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(gh=ot())),d&4&&pg(r);break;case 22:if(re=a!==null&&a.memoizedState!==null,r.mode&1?(cn=(K=cn)||re,yr(s,r),cn=K):yr(s,r),Fr(r),d&8192){if(K=r.memoizedState!==null,(r.stateNode.isHidden=K)&&!re&&r.mode&1)for(_e=r,re=r.child;re!==null;){for(ie=_e=re;_e!==null;){switch(ne=_e,me=ne.child,ne.tag){case 0:case 11:case 14:case 15:Ba(4,ne,ne.return);break;case 1:zo(ne,ne.return);var Te=ne.stateNode;if(typeof Te.componentWillUnmount=="function"){d=ne,a=ne.return;try{s=d,Te.props=s.memoizedProps,Te.state=s.memoizedState,Te.componentWillUnmount()}catch(Se){At(d,a,Se)}}break;case 5:zo(ne,ne.return);break;case 22:if(ne.memoizedState!==null){_g(ie);continue}}me!==null?(me.return=ne,_e=me):_g(ie)}re=re.sibling}e:for(re=null,ie=r;;){if(ie.tag===5){if(re===null){re=ie;try{f=ie.stateNode,K?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(A=ie.stateNode,N=ie.memoizedProps.style,w=N!=null&&N.hasOwnProperty("display")?N.display:null,A.style.display=Ci("display",w))}catch(Se){At(r,r.return,Se)}}}else if(ie.tag===6){if(re===null)try{ie.stateNode.nodeValue=K?"":ie.memoizedProps}catch(Se){At(r,r.return,Se)}}else if((ie.tag!==22&&ie.tag!==23||ie.memoizedState===null||ie===r)&&ie.child!==null){ie.child.return=ie,ie=ie.child;continue}if(ie===r)break e;for(;ie.sibling===null;){if(ie.return===null||ie.return===r)break e;re===ie&&(re=null),ie=ie.return}re===ie&&(re=null),ie.sibling.return=ie.return,ie=ie.sibling}}break;case 19:yr(s,r),Fr(r),d&4&&pg(r);break;case 21:break;default:yr(s,r),Fr(r)}}function Fr(r){var s=r.flags;if(s&2){try{e:{for(var a=r.return;a!==null;){if(dg(a)){var d=a;break e}a=a.return}throw Error(t(160))}switch(d.tag){case 5:var f=d.stateNode;d.flags&32&&(Wt(f,""),d.flags&=-33);var g=hg(r);fh(r,g,f);break;case 3:case 4:var w=d.stateNode.containerInfo,A=hg(r);hh(r,A,w);break;default:throw Error(t(161))}}catch(N){At(r,r.return,N)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function nT(r,s,a){_e=r,gg(r)}function gg(r,s,a){for(var d=(r.mode&1)!==0;_e!==null;){var f=_e,g=f.child;if(f.tag===22&&d){var w=f.memoizedState!==null||Au;if(!w){var A=f.alternate,N=A!==null&&A.memoizedState!==null||cn;A=Au;var K=cn;if(Au=w,(cn=N)&&!K)for(_e=f;_e!==null;)w=_e,N=w.child,w.tag===22&&w.memoizedState!==null?vg(f):N!==null?(N.return=w,_e=N):vg(f);for(;g!==null;)_e=g,gg(g),g=g.sibling;_e=f,Au=A,cn=K}yg(r)}else f.subtreeFlags&8772&&g!==null?(g.return=f,_e=g):yg(r)}}function yg(r){for(;_e!==null;){var s=_e;if(s.flags&8772){var a=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:cn||Cu(5,s);break;case 1:var d=s.stateNode;if(s.flags&4&&!cn)if(a===null)d.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:mr(s.type,a.memoizedProps);d.componentDidUpdate(f,a.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&_m(s,g,d);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}_m(s,w,a)}break;case 5:var A=s.stateNode;if(a===null&&s.flags&4){a=A;var N=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&a.focus();break;case"img":N.src&&(a.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var K=s.alternate;if(K!==null){var re=K.memoizedState;if(re!==null){var ie=re.dehydrated;ie!==null&&dr(ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}cn||s.flags&512&&dh(s)}catch(ne){At(s,s.return,ne)}}if(s===r){_e=null;break}if(a=s.sibling,a!==null){a.return=s.return,_e=a;break}_e=s.return}}function _g(r){for(;_e!==null;){var s=_e;if(s===r){_e=null;break}var a=s.sibling;if(a!==null){a.return=s.return,_e=a;break}_e=s.return}}function vg(r){for(;_e!==null;){var s=_e;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Cu(4,s)}catch(N){At(s,a,N)}break;case 1:var d=s.stateNode;if(typeof d.componentDidMount=="function"){var f=s.return;try{d.componentDidMount()}catch(N){At(s,f,N)}}var g=s.return;try{dh(s)}catch(N){At(s,g,N)}break;case 5:var w=s.return;try{dh(s)}catch(N){At(s,w,N)}}}catch(N){At(s,s.return,N)}if(s===r){_e=null;break}var A=s.sibling;if(A!==null){A.return=s.return,_e=A;break}_e=s.return}}var rT=Math.ceil,Pu=oe.ReactCurrentDispatcher,ph=oe.ReactCurrentOwner,Xn=oe.ReactCurrentBatchConfig,nt=0,Bt=null,Nt=null,Jt=0,zn=0,Bo=zi(0),Vt=0,$a=null,zs=0,ku=0,mh=0,Ha=null,kn=null,gh=0,$o=1/0,fi=null,xu=!1,yh=null,Ki=null,Nu=!1,Gi=null,Du=0,qa=0,_h=null,bu=-1,Lu=0;function vn(){return nt&6?ot():bu!==-1?bu:bu=ot()}function Qi(r){return r.mode&1?nt&2&&Jt!==0?Jt&-Jt:jE.transition!==null?(Lu===0&&(Lu=ks()),Lu):(r=qe,r!==0||(r=window.event,r=r===void 0?16:va(r.type)),r):1}function _r(r,s,a,d){if(50<qa)throw qa=0,_h=null,Error(t(185));bi(r,a,d),(!(nt&2)||r!==Bt)&&(r===Bt&&(!(nt&2)&&(ku|=a),Vt===4&&Yi(r,Jt)),xn(r,d),a===1&&nt===0&&!(s.mode&1)&&($o=ot()+500,lu&&$i()))}function xn(r,s){var a=r.callbackNode;ti(r,s);var d=Ps(r,r===Bt?Jt:0);if(d===0)a!==null&&Zr(a),r.callbackNode=null,r.callbackPriority=0;else if(s=d&-d,r.callbackPriority!==s){if(a!=null&&Zr(a),s===1)r.tag===0?UE(Eg.bind(null,r)):om(Eg.bind(null,r)),OE(function(){!(nt&6)&&$i()}),a=null;else{switch(Oi(d)){case 1:a=Ye;break;case 4:a=pt;break;case 16:a=Gt;break;case 536870912:a=mt;break;default:a=Gt}a=kg(a,wg.bind(null,r))}r.callbackPriority=s,r.callbackNode=a}}function wg(r,s){if(bu=-1,Lu=0,nt&6)throw Error(t(327));var a=r.callbackNode;if(Ho()&&r.callbackNode!==a)return null;var d=Ps(r,r===Bt?Jt:0);if(d===0)return null;if(d&30||d&r.expiredLanes||s)s=Ou(r,d);else{s=d;var f=nt;nt|=2;var g=Ig();(Bt!==r||Jt!==s)&&(fi=null,$o=ot()+500,$s(r,s));do try{oT();break}catch(A){Tg(r,A)}while(!0);Vd(),Pu.current=g,nt=f,Nt!==null?s=0:(Bt=null,Jt=0,s=Vt)}if(s!==0){if(s===2&&(f=Vn(r),f!==0&&(d=f,s=vh(r,f))),s===1)throw a=$a,$s(r,0),Yi(r,d),xn(r,ot()),a;if(s===6)Yi(r,d);else{if(f=r.current.alternate,!(d&30)&&!iT(f)&&(s=Ou(r,d),s===2&&(g=Vn(r),g!==0&&(d=g,s=vh(r,g))),s===1))throw a=$a,$s(r,0),Yi(r,d),xn(r,ot()),a;switch(r.finishedWork=f,r.finishedLanes=d,s){case 0:case 1:throw Error(t(345));case 2:Hs(r,kn,fi);break;case 3:if(Yi(r,d),(d&130023424)===d&&(s=gh+500-ot(),10<s)){if(Ps(r,0)!==0)break;if(f=r.suspendedLanes,(f&d)!==d){vn(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=Rd(Hs.bind(null,r,kn,fi),s);break}Hs(r,kn,fi);break;case 4:if(Yi(r,d),(d&4194240)===d)break;for(s=r.eventTimes,f=-1;0<d;){var w=31-gn(d);g=1<<w,w=s[w],w>f&&(f=w),d&=~g}if(d=f,d=ot()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*rT(d/1960))-d,10<d){r.timeoutHandle=Rd(Hs.bind(null,r,kn,fi),d);break}Hs(r,kn,fi);break;case 5:Hs(r,kn,fi);break;default:throw Error(t(329))}}}return xn(r,ot()),r.callbackNode===a?wg.bind(null,r):null}function vh(r,s){var a=Ha;return r.current.memoizedState.isDehydrated&&($s(r,s).flags|=256),r=Ou(r,s),r!==2&&(s=kn,kn=a,s!==null&&wh(s)),r}function wh(r){kn===null?kn=r:kn.push.apply(kn,r)}function iT(r){for(var s=r;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var d=0;d<a.length;d++){var f=a[d],g=f.getSnapshot;f=f.value;try{if(!fr(g(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Yi(r,s){for(s&=~mh,s&=~ku,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var a=31-gn(s),d=1<<a;r[a]=-1,s&=~d}}function Eg(r){if(nt&6)throw Error(t(327));Ho();var s=Ps(r,0);if(!(s&1))return xn(r,ot()),null;var a=Ou(r,s);if(r.tag!==0&&a===2){var d=Vn(r);d!==0&&(s=d,a=vh(r,d))}if(a===1)throw a=$a,$s(r,0),Yi(r,s),xn(r,ot()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,Hs(r,kn,fi),xn(r,ot()),null}function Eh(r,s){var a=nt;nt|=1;try{return r(s)}finally{nt=a,nt===0&&($o=ot()+500,lu&&$i())}}function Bs(r){Gi!==null&&Gi.tag===0&&!(nt&6)&&Ho();var s=nt;nt|=1;var a=Xn.transition,d=qe;try{if(Xn.transition=null,qe=1,r)return r()}finally{qe=d,Xn.transition=a,nt=s,!(nt&6)&&$i()}}function Th(){zn=Bo.current,yt(Bo)}function $s(r,s){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,LE(a)),Nt!==null)for(a=Nt.return;a!==null;){var d=a;switch(Nd(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&ou();break;case 3:Uo(),yt(An),yt(an),Hd();break;case 5:Bd(d);break;case 4:Uo();break;case 13:yt(Et);break;case 19:yt(Et);break;case 10:Md(d.type._context);break;case 22:case 23:Th()}a=a.return}if(Bt=r,Nt=r=Xi(r.current,null),Jt=zn=s,Vt=0,$a=null,mh=ku=zs=0,kn=Ha=null,Fs!==null){for(s=0;s<Fs.length;s++)if(a=Fs[s],d=a.interleaved,d!==null){a.interleaved=null;var f=d.next,g=a.pending;if(g!==null){var w=g.next;g.next=f,d.next=w}a.pending=d}Fs=null}return r}function Tg(r,s){do{var a=Nt;try{if(Vd(),_u.current=Tu,vu){for(var d=Tt.memoizedState;d!==null;){var f=d.queue;f!==null&&(f.pending=null),d=d.next}vu=!1}if(js=0,zt=Ot=Tt=null,Ma=!1,Fa=0,ph.current=null,a===null||a.return===null){Vt=1,$a=s,Nt=null;break}e:{var g=r,w=a.return,A=a,N=s;if(s=Jt,A.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var K=N,re=A,ie=re.tag;if(!(re.mode&1)&&(ie===0||ie===11||ie===15)){var ne=re.alternate;ne?(re.updateQueue=ne.updateQueue,re.memoizedState=ne.memoizedState,re.lanes=ne.lanes):(re.updateQueue=null,re.memoizedState=null)}var me=Km(w);if(me!==null){me.flags&=-257,Gm(me,w,A,g,s),me.mode&1&&Wm(g,K,s),s=me,N=K;var Te=s.updateQueue;if(Te===null){var Se=new Set;Se.add(N),s.updateQueue=Se}else Te.add(N);break e}else{if(!(s&1)){Wm(g,K,s),Ih();break e}N=Error(t(426))}}else if(wt&&A.mode&1){var Pt=Km(w);if(Pt!==null){!(Pt.flags&65536)&&(Pt.flags|=256),Gm(Pt,w,A,g,s),Ld(jo(N,A));break e}}g=N=jo(N,A),Vt!==4&&(Vt=2),Ha===null?Ha=[g]:Ha.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var $=Hm(g,N,s);ym(g,$);break e;case 1:A=N;var O=g.type,q=g.stateNode;if(!(g.flags&128)&&(typeof O.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(Ki===null||!Ki.has(q)))){g.flags|=65536,s&=-s,g.lanes|=s;var se=qm(g,A,s);ym(g,se);break e}}g=g.return}while(g!==null)}Rg(a)}catch(Re){s=Re,Nt===a&&a!==null&&(Nt=a=a.return);continue}break}while(!0)}function Ig(){var r=Pu.current;return Pu.current=Tu,r===null?Tu:r}function Ih(){(Vt===0||Vt===3||Vt===2)&&(Vt=4),Bt===null||!(zs&268435455)&&!(ku&268435455)||Yi(Bt,Jt)}function Ou(r,s){var a=nt;nt|=2;var d=Ig();(Bt!==r||Jt!==s)&&(fi=null,$s(r,s));do try{sT();break}catch(f){Tg(r,f)}while(!0);if(Vd(),nt=a,Pu.current=d,Nt!==null)throw Error(t(261));return Bt=null,Jt=0,Vt}function sT(){for(;Nt!==null;)Sg(Nt)}function oT(){for(;Nt!==null&&!kr();)Sg(Nt)}function Sg(r){var s=Pg(r.alternate,r,zn);r.memoizedProps=r.pendingProps,s===null?Rg(r):Nt=s,ph.current=null}function Rg(r){var s=r;do{var a=s.alternate;if(r=s.return,s.flags&32768){if(a=ZE(a,s),a!==null){a.flags&=32767,Nt=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Vt=6,Nt=null;return}}else if(a=JE(a,s,zn),a!==null){Nt=a;return}if(s=s.sibling,s!==null){Nt=s;return}Nt=s=r}while(s!==null);Vt===0&&(Vt=5)}function Hs(r,s,a){var d=qe,f=Xn.transition;try{Xn.transition=null,qe=1,aT(r,s,a,d)}finally{Xn.transition=f,qe=d}return null}function aT(r,s,a,d){do Ho();while(Gi!==null);if(nt&6)throw Error(t(327));a=r.finishedWork;var f=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var g=a.lanes|a.childLanes;if(ct(r,g),r===Bt&&(Nt=Bt=null,Jt=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||Nu||(Nu=!0,kg(Gt,function(){return Ho(),null})),g=(a.flags&15990)!==0,a.subtreeFlags&15990||g){g=Xn.transition,Xn.transition=null;var w=qe;qe=1;var A=nt;nt|=4,ph.current=null,tT(r,a),mg(a,r),CE(Id),Mi=!!Td,Id=Td=null,r.current=a,nT(a),or(),nt=A,qe=w,Xn.transition=g}else r.current=a;if(Nu&&(Nu=!1,Gi=r,Du=f),g=r.pendingLanes,g===0&&(Ki=null),co(a.stateNode),xn(r,ot()),s!==null)for(d=r.onRecoverableError,a=0;a<s.length;a++)f=s[a],d(f.value,{componentStack:f.stack,digest:f.digest});if(xu)throw xu=!1,r=yh,yh=null,r;return Du&1&&r.tag!==0&&Ho(),g=r.pendingLanes,g&1?r===_h?qa++:(qa=0,_h=r):qa=0,$i(),null}function Ho(){if(Gi!==null){var r=Oi(Du),s=Xn.transition,a=qe;try{if(Xn.transition=null,qe=16>r?16:r,Gi===null)var d=!1;else{if(r=Gi,Gi=null,Du=0,nt&6)throw Error(t(331));var f=nt;for(nt|=4,_e=r.current;_e!==null;){var g=_e,w=g.child;if(_e.flags&16){var A=g.deletions;if(A!==null){for(var N=0;N<A.length;N++){var K=A[N];for(_e=K;_e!==null;){var re=_e;switch(re.tag){case 0:case 11:case 15:Ba(8,re,g)}var ie=re.child;if(ie!==null)ie.return=re,_e=ie;else for(;_e!==null;){re=_e;var ne=re.sibling,me=re.return;if(cg(re),re===K){_e=null;break}if(ne!==null){ne.return=me,_e=ne;break}_e=me}}}var Te=g.alternate;if(Te!==null){var Se=Te.child;if(Se!==null){Te.child=null;do{var Pt=Se.sibling;Se.sibling=null,Se=Pt}while(Se!==null)}}_e=g}}if(g.subtreeFlags&2064&&w!==null)w.return=g,_e=w;else e:for(;_e!==null;){if(g=_e,g.flags&2048)switch(g.tag){case 0:case 11:case 15:Ba(9,g,g.return)}var $=g.sibling;if($!==null){$.return=g.return,_e=$;break e}_e=g.return}}var O=r.current;for(_e=O;_e!==null;){w=_e;var q=w.child;if(w.subtreeFlags&2064&&q!==null)q.return=w,_e=q;else e:for(w=O;_e!==null;){if(A=_e,A.flags&2048)try{switch(A.tag){case 0:case 11:case 15:Cu(9,A)}}catch(Re){At(A,A.return,Re)}if(A===w){_e=null;break e}var se=A.sibling;if(se!==null){se.return=A.return,_e=se;break e}_e=A.return}}if(nt=f,$i(),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(In,r)}catch{}d=!0}return d}finally{qe=a,Xn.transition=s}}return!1}function Ag(r,s,a){s=jo(a,s),s=Hm(r,s,1),r=qi(r,s,1),s=vn(),r!==null&&(bi(r,1,s),xn(r,s))}function At(r,s,a){if(r.tag===3)Ag(r,r,a);else for(;s!==null;){if(s.tag===3){Ag(s,r,a);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ki===null||!Ki.has(d))){r=jo(a,r),r=qm(s,r,1),s=qi(s,r,1),r=vn(),s!==null&&(bi(s,1,r),xn(s,r));break}}s=s.return}}function lT(r,s,a){var d=r.pingCache;d!==null&&d.delete(s),s=vn(),r.pingedLanes|=r.suspendedLanes&a,Bt===r&&(Jt&a)===a&&(Vt===4||Vt===3&&(Jt&130023424)===Jt&&500>ot()-gh?$s(r,0):mh|=a),xn(r,s)}function Cg(r,s){s===0&&(r.mode&1?(s=fo,fo<<=1,!(fo&130023424)&&(fo=4194304)):s=1);var a=vn();r=ci(r,s),r!==null&&(bi(r,s,a),xn(r,a))}function uT(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),Cg(r,a)}function cT(r,s){var a=0;switch(r.tag){case 13:var d=r.stateNode,f=r.memoizedState;f!==null&&(a=f.retryLane);break;case 19:d=r.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(s),Cg(r,a)}var Pg;Pg=function(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps||An.current)Pn=!0;else{if(!(r.lanes&a)&&!(s.flags&128))return Pn=!1,XE(r,s,a);Pn=!!(r.flags&131072)}else Pn=!1,wt&&s.flags&1048576&&am(s,cu,s.index);switch(s.lanes=0,s.tag){case 2:var d=s.type;Ru(r,s),r=s.pendingProps;var f=Do(s,an.current);Fo(s,a),f=Kd(null,s,d,r,f,a);var g=Gd();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Cn(d)?(g=!0,au(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,jd(s),f.updater=Iu,s.stateNode=f,f._reactInternals=s,eh(s,d,r,a),s=ih(null,s,d,!0,g,a)):(s.tag=0,wt&&g&&xd(s),_n(null,s,f,a),s=s.child),s;case 16:d=s.elementType;e:{switch(Ru(r,s),r=s.pendingProps,f=d._init,d=f(d._payload),s.type=d,f=s.tag=hT(d),r=mr(d,r),f){case 0:s=rh(null,s,d,r,a);break e;case 1:s=eg(null,s,d,r,a);break e;case 11:s=Qm(null,s,d,r,a);break e;case 14:s=Ym(null,s,d,mr(d.type,r),a);break e}throw Error(t(306,d,""))}return s;case 0:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:mr(d,f),rh(r,s,d,f,a);case 1:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:mr(d,f),eg(r,s,d,f,a);case 3:e:{if(tg(s),r===null)throw Error(t(387));d=s.pendingProps,g=s.memoizedState,f=g.element,gm(r,s),gu(s,d,null,a);var w=s.memoizedState;if(d=w.element,g.isDehydrated)if(g={element:d,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=jo(Error(t(423)),s),s=ng(r,s,d,a,f);break e}else if(d!==f){f=jo(Error(t(424)),s),s=ng(r,s,d,a,f);break e}else for(jn=ji(s.stateNode.containerInfo.firstChild),Un=s,wt=!0,pr=null,a=pm(s,null,d,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Oo(),d===f){s=hi(r,s,a);break e}_n(r,s,d,a)}s=s.child}return s;case 5:return vm(s),r===null&&bd(s),d=s.type,f=s.pendingProps,g=r!==null?r.memoizedProps:null,w=f.children,Sd(d,f)?w=null:g!==null&&Sd(d,g)&&(s.flags|=32),Zm(r,s),_n(r,s,w,a),s.child;case 6:return r===null&&bd(s),null;case 13:return rg(r,s,a);case 4:return zd(s,s.stateNode.containerInfo),d=s.pendingProps,r===null?s.child=Vo(s,null,d,a):_n(r,s,d,a),s.child;case 11:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:mr(d,f),Qm(r,s,d,f,a);case 7:return _n(r,s,s.pendingProps,a),s.child;case 8:return _n(r,s,s.pendingProps.children,a),s.child;case 12:return _n(r,s,s.pendingProps.children,a),s.child;case 10:e:{if(d=s.type._context,f=s.pendingProps,g=s.memoizedProps,w=f.value,ht(fu,d._currentValue),d._currentValue=w,g!==null)if(fr(g.value,w)){if(g.children===f.children&&!An.current){s=hi(r,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var A=g.dependencies;if(A!==null){w=g.child;for(var N=A.firstContext;N!==null;){if(N.context===d){if(g.tag===1){N=di(-1,a&-a),N.tag=2;var K=g.updateQueue;if(K!==null){K=K.shared;var re=K.pending;re===null?N.next=N:(N.next=re.next,re.next=N),K.pending=N}}g.lanes|=a,N=g.alternate,N!==null&&(N.lanes|=a),Fd(g.return,a,s),A.lanes|=a;break}N=N.next}}else if(g.tag===10)w=g.type===s.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=a,A=w.alternate,A!==null&&(A.lanes|=a),Fd(w,a,s),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}_n(r,s,f.children,a),s=s.child}return s;case 9:return f=s.type,d=s.pendingProps.children,Fo(s,a),f=Qn(f),d=d(f),s.flags|=1,_n(r,s,d,a),s.child;case 14:return d=s.type,f=mr(d,s.pendingProps),f=mr(d.type,f),Ym(r,s,d,f,a);case 15:return Xm(r,s,s.type,s.pendingProps,a);case 17:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:mr(d,f),Ru(r,s),s.tag=1,Cn(d)?(r=!0,au(s)):r=!1,Fo(s,a),Bm(s,d,f),eh(s,d,f,a),ih(null,s,d,!0,r,a);case 19:return sg(r,s,a);case 22:return Jm(r,s,a)}throw Error(t(156,s.tag))};function kg(r,s){return Kt(r,s)}function dT(r,s,a,d){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jn(r,s,a,d){return new dT(r,s,a,d)}function Sh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function hT(r){if(typeof r=="function")return Sh(r)?1:0;if(r!=null){if(r=r.$$typeof,r===j)return 11;if(r===Ge)return 14}return 2}function Xi(r,s){var a=r.alternate;return a===null?(a=Jn(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function Vu(r,s,a,d,f,g){var w=2;if(d=r,typeof r=="function")Sh(r)&&(w=1);else if(typeof r=="string")w=5;else e:switch(r){case x:return qs(a.children,f,g,s);case S:w=8,f|=8;break;case R:return r=Jn(12,a,s,f|2),r.elementType=R,r.lanes=g,r;case P:return r=Jn(13,a,s,f),r.elementType=P,r.lanes=g,r;case dt:return r=Jn(19,a,s,f),r.elementType=dt,r.lanes=g,r;case Qe:return Mu(a,f,g,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case k:w=10;break e;case L:w=9;break e;case j:w=11;break e;case Ge:w=14;break e;case Ct:w=16,d=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=Jn(w,a,s,f),s.elementType=r,s.type=d,s.lanes=g,s}function qs(r,s,a,d){return r=Jn(7,r,d,s),r.lanes=a,r}function Mu(r,s,a,d){return r=Jn(22,r,d,s),r.elementType=Qe,r.lanes=a,r.stateNode={isHidden:!1},r}function Rh(r,s,a){return r=Jn(6,r,null,s),r.lanes=a,r}function Ah(r,s,a){return s=Jn(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function fT(r,s,a,d,f){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Di(0),this.expirationTimes=Di(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Di(0),this.identifierPrefix=d,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Ch(r,s,a,d,f,g,w,A,N){return r=new fT(r,s,a,A,N),s===1?(s=1,g===!0&&(s|=8)):s=0,g=Jn(3,null,null,s),r.current=g,g.stateNode=r,g.memoizedState={element:d,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},jd(g),r}function pT(r,s,a){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:de,key:d==null?null:""+d,children:r,containerInfo:s,implementation:a}}function xg(r){if(!r)return Bi;r=r._reactInternals;e:{if(He(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Cn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(Cn(a))return im(r,a,s)}return s}function Ng(r,s,a,d,f,g,w,A,N){return r=Ch(a,d,!0,r,f,g,w,A,N),r.context=xg(null),a=r.current,d=vn(),f=Qi(a),g=di(d,f),g.callback=s??null,qi(a,g,f),r.current.lanes=f,bi(r,f,d),xn(r,d),r}function Fu(r,s,a,d){var f=s.current,g=vn(),w=Qi(f);return a=xg(a),s.context===null?s.context=a:s.pendingContext=a,s=di(g,w),s.payload={element:r},d=d===void 0?null:d,d!==null&&(s.callback=d),r=qi(f,s,w),r!==null&&(_r(r,f,w,g),mu(r,f,w)),w}function Uu(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Dg(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function Ph(r,s){Dg(r,s),(r=r.alternate)&&Dg(r,s)}var bg=typeof reportError=="function"?reportError:function(r){console.error(r)};function kh(r){this._internalRoot=r}ju.prototype.render=kh.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));Fu(r,s,null,null)},ju.prototype.unmount=kh.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Bs(function(){Fu(null,r,null,null)}),s[oi]=null}};function ju(r){this._internalRoot=r}ju.prototype.unstable_scheduleHydration=function(r){if(r){var s=jl();r={blockedOn:null,target:r,priority:s};for(var a=0;a<Nr.length&&s!==0&&s<Nr[a].priority;a++);Nr.splice(a,0,r),a===0&&$l(r)}};function xh(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function zu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Lg(){}function mT(r,s,a,d,f){if(f){if(typeof d=="function"){var g=d;d=function(){var K=Uu(w);g.call(K)}}var w=Ng(s,d,r,0,null,!1,!1,"",Lg);return r._reactRootContainer=w,r[oi]=w.current,ka(r.nodeType===8?r.parentNode:r),Bs(),w}for(;f=r.lastChild;)r.removeChild(f);if(typeof d=="function"){var A=d;d=function(){var K=Uu(N);A.call(K)}}var N=Ch(r,0,!1,null,null,!1,!1,"",Lg);return r._reactRootContainer=N,r[oi]=N.current,ka(r.nodeType===8?r.parentNode:r),Bs(function(){Fu(s,N,a,d)}),N}function Bu(r,s,a,d,f){var g=a._reactRootContainer;if(g){var w=g;if(typeof f=="function"){var A=f;f=function(){var N=Uu(w);A.call(N)}}Fu(s,w,r,f)}else w=mT(a,s,r,f,d);return Uu(w)}Fl=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var a=Ni(s.pendingLanes);a!==0&&(Li(s,a|1),xn(s,ot()),!(nt&6)&&($o=ot()+500,$i()))}break;case 13:Bs(function(){var d=ci(r,1);if(d!==null){var f=vn();_r(d,r,1,f)}}),Ph(r,1)}},po=function(r){if(r.tag===13){var s=ci(r,134217728);if(s!==null){var a=vn();_r(s,r,134217728,a)}Ph(r,134217728)}},Ul=function(r){if(r.tag===13){var s=Qi(r),a=ci(r,s);if(a!==null){var d=vn();_r(a,r,s,d)}Ph(r,s)}},jl=function(){return qe},zl=function(r,s){var a=qe;try{return qe=r,s()}finally{qe=a}},Xr=function(r,s,a){switch(s){case"input":if(Ss(r,a),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var d=a[s];if(d!==r&&d.form===r.form){var f=su(d);if(!f)throw Error(t(90));Ii(d),Ss(d,f)}}}break;case"textarea":Rr(r,a);break;case"select":s=a.value,s!=null&&qt(r,!!a.multiple,s,!1)}},Jr=Eh,D=Bs;var gT={usingClientEntryPoint:!1,Events:[Da,xo,su,mn,Cs,Eh]},Wa={findFiberByHostInstance:Ls,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yT={bundleType:Wa.bundleType,version:Wa.version,rendererPackageName:Wa.rendererPackageName,rendererConfig:Wa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=sr(r),r===null?null:r.stateNode},findFiberByHostInstance:Wa.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$u.isDisabled&&$u.supportsFiber)try{In=$u.inject(yT),on=$u}catch{}}return Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gT,Nn.createPortal=function(r,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xh(s))throw Error(t(200));return pT(r,s,null,a)},Nn.createRoot=function(r,s){if(!xh(r))throw Error(t(299));var a=!1,d="",f=bg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=Ch(r,1,!1,null,null,a,!1,d,f),r[oi]=s.current,ka(r.nodeType===8?r.parentNode:r),new kh(s)},Nn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=sr(s),r=r===null?null:r.stateNode,r},Nn.flushSync=function(r){return Bs(r)},Nn.hydrate=function(r,s,a){if(!zu(s))throw Error(t(200));return Bu(null,r,s,!0,a)},Nn.hydrateRoot=function(r,s,a){if(!xh(r))throw Error(t(405));var d=a!=null&&a.hydratedSources||null,f=!1,g="",w=bg;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=Ng(s,null,r,1,a??null,f,!1,g,w),r[oi]=s.current,ka(r),d)for(r=0;r<d.length;r++)a=d[r],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new ju(s)},Nn.render=function(r,s,a){if(!zu(s))throw Error(t(200));return Bu(null,r,s,!1,a)},Nn.unmountComponentAtNode=function(r){if(!zu(r))throw Error(t(40));return r._reactRootContainer?(Bs(function(){Bu(null,null,r,!1,function(){r._reactRootContainer=null,r[oi]=null})}),!0):!1},Nn.unstable_batchedUpdates=Eh,Nn.unstable_renderSubtreeIntoContainer=function(r,s,a,d){if(!zu(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return Bu(r,s,a,!1,d)},Nn.version="18.3.1-next-f1338f8080-20240426",Nn}var Bg;function N_(){if(Bg)return bh.exports;Bg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),bh.exports=ST(),bh.exports}var $g;function RT(){if($g)return Hu;$g=1;var n=N_();return Hu.createRoot=n.createRoot,Hu.hydrateRoot=n.hydrateRoot,Hu}var AT=RT(),H=Cf(),Ga={},Hg;function CT(){if(Hg)return Ga;Hg=1,Object.defineProperty(Ga,"__esModule",{value:!0}),Ga.parse=c,Ga.serialize=y;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,l=(()=>{const I=function(){};return I.prototype=Object.create(null),I})();function c(I,C){const b=new l,B=I.length;if(B<2)return b;const F=(C==null?void 0:C.decode)||v;let W=0;do{const Y=I.indexOf("=",W);if(Y===-1)break;const J=I.indexOf(";",W),oe=J===-1?B:J;if(Y>oe){W=I.lastIndexOf(";",Y-1)+1;continue}const V=h(I,W,Y),de=p(I,Y,V),x=I.slice(V,de);if(b[x]===void 0){let S=h(I,Y+1,oe),R=p(I,oe,S);const k=F(I.slice(S,R));b[x]=k}W=oe+1}while(W<B);return b}function h(I,C,b){do{const B=I.charCodeAt(C);if(B!==32&&B!==9)return C}while(++C<b);return b}function p(I,C,b){for(;C>b;){const B=I.charCodeAt(--C);if(B!==32&&B!==9)return C+1}return b}function y(I,C,b){const B=(b==null?void 0:b.encode)||encodeURIComponent;if(!n.test(I))throw new TypeError(`argument name is invalid: ${I}`);const F=B(C);if(!e.test(F))throw new TypeError(`argument val is invalid: ${C}`);let W=I+"="+F;if(!b)return W;if(b.maxAge!==void 0){if(!Number.isInteger(b.maxAge))throw new TypeError(`option maxAge is invalid: ${b.maxAge}`);W+="; Max-Age="+b.maxAge}if(b.domain){if(!t.test(b.domain))throw new TypeError(`option domain is invalid: ${b.domain}`);W+="; Domain="+b.domain}if(b.path){if(!i.test(b.path))throw new TypeError(`option path is invalid: ${b.path}`);W+="; Path="+b.path}if(b.expires){if(!T(b.expires)||!Number.isFinite(b.expires.valueOf()))throw new TypeError(`option expires is invalid: ${b.expires}`);W+="; Expires="+b.expires.toUTCString()}if(b.httpOnly&&(W+="; HttpOnly"),b.secure&&(W+="; Secure"),b.partitioned&&(W+="; Partitioned"),b.priority)switch(typeof b.priority=="string"?b.priority.toLowerCase():void 0){case"low":W+="; Priority=Low";break;case"medium":W+="; Priority=Medium";break;case"high":W+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${b.priority}`)}if(b.sameSite)switch(typeof b.sameSite=="string"?b.sameSite.toLowerCase():b.sameSite){case!0:case"strict":W+="; SameSite=Strict";break;case"lax":W+="; SameSite=Lax";break;case"none":W+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${b.sameSite}`)}return W}function v(I){if(I.indexOf("%")===-1)return I;try{return decodeURIComponent(I)}catch{return I}}function T(I){return o.call(I)==="[object Date]"}return Ga}CT();/**
 * react-router v7.1.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var qg="popstate";function PT(n={}){function e(i,o){let{pathname:l,search:c,hash:h}=i.location;return cl("",{pathname:l,search:c,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:hs(o)}return xT(e,t,null,n)}function Ke(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function tn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function kT(){return Math.random().toString(36).substring(2,10)}function Wg(n,e){return{usr:n.state,key:n.key,idx:e}}function cl(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?_s(e):e,state:t,key:e&&e.key||i||kT()}}function hs({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function _s(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function xT(n,e,t,i={}){let{window:o=document.defaultView,v5Compat:l=!1}=i,c=o.history,h="POP",p=null,y=v();y==null&&(y=0,c.replaceState({...c.state,idx:y},""));function v(){return(c.state||{idx:null}).idx}function T(){h="POP";let F=v(),W=F==null?null:F-y;y=F,p&&p({action:h,location:B.location,delta:W})}function I(F,W){h="PUSH";let Y=cl(B.location,F,W);y=v()+1;let J=Wg(Y,y),oe=B.createHref(Y);try{c.pushState(J,"",oe)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;o.location.assign(oe)}l&&p&&p({action:h,location:B.location,delta:1})}function C(F,W){h="REPLACE";let Y=cl(B.location,F,W);y=v();let J=Wg(Y,y),oe=B.createHref(Y);c.replaceState(J,"",oe),l&&p&&p({action:h,location:B.location,delta:0})}function b(F){let W=o.location.origin!=="null"?o.location.origin:o.location.href,Y=typeof F=="string"?F:hs(F);return Y=Y.replace(/ $/,"%20"),Ke(W,`No window.location.(origin|href) available to create URL for href: ${Y}`),new URL(Y,W)}let B={get action(){return h},get location(){return n(o,c)},listen(F){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(qg,T),p=F,()=>{o.removeEventListener(qg,T),p=null}},createHref(F){return e(o,F)},createURL:b,encodeLocation(F){let W=b(F);return{pathname:W.pathname,search:W.search,hash:W.hash}},push:I,replace:C,go(F){return c.go(F)}};return B}var NT=new Set(["lazy","caseSensitive","path","id","index","children"]);function DT(n){return n.index===!0}function fc(n,e,t=[],i={}){return n.map((o,l)=>{let c=[...t,String(l)],h=typeof o.id=="string"?o.id:c.join("-");if(Ke(o.index!==!0||!o.children,"Cannot specify children on an index route"),Ke(!i[h],`Found a route id collision on id "${h}".  Route id's must be globally unique within Data Router usages`),DT(o)){let p={...o,...e(o),id:h};return i[h]=p,p}else{let p={...o,...e(o),id:h,children:void 0};return i[h]=p,o.children&&(p.children=fc(o.children,e,c,i)),p}})}function ts(n,e,t="/"){return ec(n,e,t,!1)}function ec(n,e,t,i){let o=typeof e=="string"?_s(e):e,l=Tr(o.pathname||"/",t);if(l==null)return null;let c=D_(n);LT(c);let h=null;for(let p=0;h==null&&p<c.length;++p){let y=qT(l);h=$T(c[p],y,i)}return h}function bT(n,e){let{route:t,pathname:i,params:o}=n;return{id:t.id,pathname:i,params:o,data:e[t.id],handle:t.handle}}function D_(n,e=[],t=[],i=""){let o=(l,c,h)=>{let p={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};p.relativePath.startsWith("/")&&(Ke(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length));let y=zr([i,p.relativePath]),v=t.concat(p);l.children&&l.children.length>0&&(Ke(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),D_(l.children,e,v,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:zT(y,l.index),routesMeta:v})};return n.forEach((l,c)=>{var h;if(l.path===""||!((h=l.path)!=null&&h.includes("?")))o(l,c);else for(let p of b_(l.path))o(l,c,p)}),e}function b_(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let c=b_(i.join("/")),h=[];return h.push(...c.map(p=>p===""?l:[l,p].join("/"))),o&&h.push(...c),h.map(p=>n.startsWith("/")&&p===""?"/":p)}function LT(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:BT(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var OT=/^:[\w-]+$/,VT=3,MT=2,FT=1,UT=10,jT=-2,Kg=n=>n==="*";function zT(n,e){let t=n.split("/"),i=t.length;return t.some(Kg)&&(i+=jT),e&&(i+=MT),t.filter(o=>!Kg(o)).reduce((o,l)=>o+(OT.test(l)?VT:l===""?FT:UT),i)}function BT(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function $T(n,e,t=!1){let{routesMeta:i}=n,o={},l="/",c=[];for(let h=0;h<i.length;++h){let p=i[h],y=h===i.length-1,v=l==="/"?e:e.slice(l.length)||"/",T=pc({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},v),I=p.route;if(!T&&y&&t&&!i[i.length-1].route.index&&(T=pc({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!T)return null;Object.assign(o,T.params),c.push({params:o,pathname:zr([l,T.pathname]),pathnameBase:GT(zr([l,T.pathnameBase])),route:I}),T.pathnameBase!=="/"&&(l=zr([l,T.pathnameBase]))}return c}function pc(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=HT(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),h=o.slice(1);return{params:i.reduce((y,{paramName:v,isOptional:T},I)=>{if(v==="*"){let b=h[I]||"";c=l.slice(0,l.length-b.length).replace(/(.)\/+$/,"$1")}const C=h[I];return T&&!C?y[v]=void 0:y[v]=(C||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:c,pattern:n}}function HT(n,e=!1,t=!0){tn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,p)=>(i.push({paramName:h,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function qT(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return tn(!1,`The URL path "${n}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Tr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function WT(n,e="/"){let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?_s(n):n;return{pathname:t?t.startsWith("/")?t:KT(t,e):e,search:QT(i),hash:YT(o)}}function KT(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Vh(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function L_(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Pf(n){let e=L_(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function kf(n,e,t,i=!1){let o;typeof n=="string"?o=_s(n):(o={...n},Ke(!o.pathname||!o.pathname.includes("?"),Vh("?","pathname","search",o)),Ke(!o.pathname||!o.pathname.includes("#"),Vh("#","pathname","hash",o)),Ke(!o.search||!o.search.includes("#"),Vh("#","search","hash",o)));let l=n===""||o.pathname==="",c=l?"/":o.pathname,h;if(c==null)h=t;else{let T=e.length-1;if(!i&&c.startsWith("..")){let I=c.split("/");for(;I[0]==="..";)I.shift(),T-=1;o.pathname=I.join("/")}h=T>=0?e[T]:"/"}let p=WT(o,h),y=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||v)&&(p.pathname+="/"),p}var zr=n=>n.join("/").replace(/\/\/+/g,"/"),GT=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),QT=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,YT=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,mc=class{constructor(n,e,t,i=!1){this.status=n,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function bc(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var O_=["POST","PUT","PATCH","DELETE"],XT=new Set(O_),JT=["GET",...O_],ZT=new Set(JT),eI=new Set([301,302,303,307,308]),tI=new Set([307,308]),Mh={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},nI={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Qa={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},xf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rI=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),V_="remix-router-transitions",M_=Symbol("ResetLoaderData");function iI(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";Ke(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let i=n.mapRouteProperties||rI,o={},l=fc(n.routes,i,void 0,o),c,h=n.basename||"/",p=n.dataStrategy||uI,y=n.patchRoutesOnNavigation,v={...n.future},T=null,I=new Set,C=null,b=null,B=null,F=n.hydrationData!=null,W=ts(l,n.history.location,h),Y=null;if(W==null&&!y){let D=Zn(404,{pathname:n.history.location.pathname}),{matches:U,route:G}=iy(l);W=U,Y={[G.id]:D}}W&&!n.hydrationData&&rr(W,l,n.history.location.pathname).active&&(W=null);let J;if(W)if(W.some(D=>D.route.lazy))J=!1;else if(!W.some(D=>D.route.loader))J=!0;else{let D=n.hydrationData?n.hydrationData.loaderData:null,U=n.hydrationData?n.hydrationData.errors:null;if(U){let G=W.findIndex(Z=>U[Z.route.id]!==void 0);J=W.slice(0,G+1).every(Z=>!Jh(Z.route,D,U))}else J=W.every(G=>!Jh(G.route,D,U))}else{J=!1,W=[];let D=rr(null,l,n.history.location.pathname);D.active&&D.matches&&(W=D.matches)}let oe,V={historyAction:n.history.action,location:n.history.location,matches:W,initialized:J,navigation:Mh,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||Y,fetchers:new Map,blockers:new Map},de="POP",x=!1,S,R=!1,k=new Map,L=null,j=!1,P=!1,dt=new Set,Ge=new Map,Ct=0,Qe=-1,ae=new Map,Ie=new Set,he=new Map,M=new Map,X=new Set,Ee=new Map,Ve,Le=null;function ze(){if(T=n.history.listen(({action:D,location:U,delta:G})=>{if(Ve){Ve(),Ve=void 0;return}tn(Ee.size===0||G!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Z=ki({currentLocation:V.location,nextLocation:U,historyAction:D});if(Z&&G!=null){let fe=new Promise(ye=>{Ve=ye});n.history.go(G*-1),Pr(Z,{state:"blocked",location:U,proceed(){Pr(Z,{state:"proceeding",proceed:void 0,reset:void 0,location:U}),fe.then(()=>n.history.go(G))},reset(){let ye=new Map(V.blockers);ye.set(Z,Qa),Fe({blockers:ye})}});return}return rn(D,U)}),t){wI(e,k);let D=()=>EI(e,k);e.addEventListener("pagehide",D),L=()=>e.removeEventListener("pagehide",D)}return V.initialized||rn("POP",V.location,{initialHydration:!0}),oe}function Ze(){T&&T(),L&&L(),I.clear(),S&&S.abort(),V.fetchers.forEach((D,U)=>Ln(U)),V.blockers.forEach((D,U)=>Pi(U))}function et(D){return I.add(D),()=>I.delete(D)}function Fe(D,U={}){V={...V,...D};let G=[],Z=[];V.fetchers.forEach((fe,ye)=>{fe.state==="idle"&&(X.has(ye)?G.push(ye):Z.push(ye))}),[...I].forEach(fe=>fe(V,{deletedFetchers:G,viewTransitionOpts:U.viewTransitionOpts,flushSync:U.flushSync===!0})),G.forEach(fe=>Ln(fe)),Z.forEach(fe=>V.fetchers.delete(fe))}function ft(D,U,{flushSync:G}={}){var ue,xe;let Z=V.actionData!=null&&V.navigation.formMethod!=null&&vr(V.navigation.formMethod)&&V.navigation.state==="loading"&&((ue=D.state)==null?void 0:ue._isRedirect)!==!0,fe;U.actionData?Object.keys(U.actionData).length>0?fe=U.actionData:fe=null:Z?fe=V.actionData:fe=null;let ye=U.loaderData?ny(V.loaderData,U.loaderData,U.matches||[],U.errors):V.loaderData,Ce=V.blockers;Ce.size>0&&(Ce=new Map(Ce),Ce.forEach((Ue,it)=>Ce.set(it,Qa)));let pe=x===!0||V.navigation.formMethod!=null&&vr(V.navigation.formMethod)&&((xe=D.state)==null?void 0:xe._isRedirect)!==!0;c&&(l=c,c=void 0),j||de==="POP"||(de==="PUSH"?n.history.push(D,D.state):de==="REPLACE"&&n.history.replace(D,D.state));let we;if(de==="POP"){let Ue=k.get(V.location.pathname);Ue&&Ue.has(D.pathname)?we={currentLocation:V.location,nextLocation:D}:k.has(D.pathname)&&(we={currentLocation:D,nextLocation:V.location})}else if(R){let Ue=k.get(V.location.pathname);Ue?Ue.add(D.pathname):(Ue=new Set([D.pathname]),k.set(V.location.pathname,Ue)),we={currentLocation:V.location,nextLocation:D}}Fe({...U,actionData:fe,loaderData:ye,historyAction:de,location:D,initialized:!0,navigation:Mh,revalidation:"idle",restoreScrollPosition:On(D,U.matches||V.matches),preventScrollReset:pe,blockers:Ce},{viewTransitionOpts:we,flushSync:G===!0}),de="POP",x=!1,R=!1,j=!1,P=!1,Le==null||Le.resolve(),Le=null}async function Hn(D,U){if(typeof D=="number"){n.history.go(D);return}let G=Xh(V.location,V.matches,h,D,U==null?void 0:U.fromRouteId,U==null?void 0:U.relative),{path:Z,submission:fe,error:ye}=Gg(!1,G,U),Ce=V.location,pe=cl(V.location,Z,U&&U.state);pe={...pe,...n.history.encodeLocation(pe)};let we=U&&U.replace!=null?U.replace:void 0,ue="PUSH";we===!0?ue="REPLACE":we===!1||fe!=null&&vr(fe.formMethod)&&fe.formAction===V.location.pathname+V.location.search&&(ue="REPLACE");let xe=U&&"preventScrollReset"in U?U.preventScrollReset===!0:void 0,Ue=(U&&U.flushSync)===!0,it=ki({currentLocation:Ce,nextLocation:pe,historyAction:ue});if(it){Pr(it,{state:"blocked",location:pe,proceed(){Pr(it,{state:"proceeding",proceed:void 0,reset:void 0,location:pe}),Hn(D,U)},reset(){let Rt=new Map(V.blockers);Rt.set(it,Qa),Fe({blockers:Rt})}});return}await rn(ue,pe,{submission:fe,pendingError:ye,preventScrollReset:xe,replace:U&&U.replace,enableViewTransition:U&&U.viewTransition,flushSync:Ue})}function Ii(){Le||(Le=TI()),Rr(),Fe({revalidation:"loading"});let D=Le.promise;return V.navigation.state==="submitting"?D:V.navigation.state==="idle"?(rn(V.historyAction,V.location,{startUninterruptedRevalidation:!0}),D):(rn(de||V.historyAction,V.navigation.location,{overrideNavigation:V.navigation,enableViewTransition:R===!0}),D)}async function rn(D,U,G){S&&S.abort(),S=null,de=D,j=(G&&G.startUninterruptedRevalidation)===!0,Tn(V.location,V.matches),x=(G&&G.preventScrollReset)===!0,R=(G&&G.enableViewTransition)===!0;let Z=c||l,fe=G&&G.overrideNavigation,ye=ts(Z,U,h),Ce=(G&&G.flushSync)===!0,pe=rr(ye,Z,U.pathname);if(pe.active&&pe.matches&&(ye=pe.matches),!ye){let{error:He,notFoundMatches:tt,route:st}=nr(U.pathname);ft(U,{matches:tt,loaderData:{},errors:{[st.id]:He}},{flushSync:Ce});return}if(V.initialized&&!P&&mI(V.location,U)&&!(G&&G.submission&&vr(G.submission.formMethod))){ft(U,{matches:ye},{flushSync:Ce});return}S=new AbortController;let we=qo(n.history,U,S.signal,G&&G.submission),ue;if(G&&G.pendingError)ue=[Gs(ye).route.id,{type:"error",error:G.pendingError}];else if(G&&G.submission&&vr(G.submission.formMethod)){let He=await Qr(we,U,G.submission,ye,pe.active,{replace:G.replace,flushSync:Ce});if(He.shortCircuited)return;if(He.pendingActionResult){let[tt,st]=He.pendingActionResult;if(Bn(st)&&bc(st.error)&&st.error.status===404){S=null,ft(U,{matches:He.matches,loaderData:{},errors:{[tt]:st.error}});return}}ye=He.matches||ye,ue=He.pendingActionResult,fe=Fh(U,G.submission),Ce=!1,pe.active=!1,we=qo(n.history,we.url,we.signal)}let{shortCircuited:xe,matches:Ue,loaderData:it,errors:Rt}=await Si(we,U,ye,pe.active,fe,G&&G.submission,G&&G.fetcherSubmission,G&&G.replace,G&&G.initialHydration===!0,Ce,ue);xe||(S=null,ft(U,{matches:Ue||ye,...ry(ue),loaderData:it,errors:Rt}))}async function Qr(D,U,G,Z,fe,ye={}){Rr();let Ce=_I(U,G);if(Fe({navigation:Ce},{flushSync:ye.flushSync===!0}),fe){let ue=await mn(Z,U.pathname,D.signal);if(ue.type==="aborted")return{shortCircuited:!0};if(ue.type==="error"){let xe=Gs(ue.partialMatches).route.id;return{matches:ue.partialMatches,pendingActionResult:[xe,{type:"error",error:ue.error}]}}else if(ue.matches)Z=ue.matches;else{let{notFoundMatches:xe,error:Ue,route:it}=nr(U.pathname);return{matches:xe,pendingActionResult:[it.id,{type:"error",error:Ue}]}}}let pe,we=Ja(Z,U);if(!we.route.action&&!we.route.lazy)pe={type:"error",error:Zn(405,{method:D.method,pathname:U.pathname,routeId:we.route.id})};else if(pe=(await tr("action",V,D,[we],Z,null))[we.route.id],D.signal.aborted)return{shortCircuited:!0};if(Qs(pe)){let ue;return ye&&ye.replace!=null?ue=ye.replace:ue=Zg(pe.response.headers.get("Location"),new URL(D.url),h)===V.location.pathname+V.location.search,await qt(D,pe,!0,{submission:G,replace:ue}),{shortCircuited:!0}}if(Bn(pe)){let ue=Gs(Z,we.route.id);return(ye&&ye.replace)!==!0&&(de="PUSH"),{matches:Z,pendingActionResult:[ue.route.id,pe]}}return{matches:Z,pendingActionResult:[we.route.id,pe]}}async function Si(D,U,G,Z,fe,ye,Ce,pe,we,ue,xe){let Ue=fe||Fh(U,ye),it=ye||Ce||oy(Ue),Rt=!j&&!we;if(Z){if(Rt){let pt=Ri(xe);Fe({navigation:Ue,...pt!==void 0?{actionData:pt}:{}},{flushSync:ue})}let Ye=await mn(G,U.pathname,D.signal);if(Ye.type==="aborted")return{shortCircuited:!0};if(Ye.type==="error"){let pt=Gs(Ye.partialMatches).route.id;return{matches:Ye.partialMatches,loaderData:{},errors:{[pt]:Ye.error}}}else if(Ye.matches)G=Ye.matches;else{let{error:pt,notFoundMatches:Gt,route:ar}=nr(U.pathname);return{matches:Gt,loaderData:{},errors:{[ar.id]:pt}}}}let He=c||l,[tt,st]=Yg(n.history,V,G,it,U,we===!0,P,dt,X,he,Ie,He,h,xe);if(Qe=++Ct,tt.length===0&&st.length===0){let Ye=Cr();return ft(U,{matches:G,loaderData:{},errors:xe&&Bn(xe[1])?{[xe[0]]:xe[1].error}:null,...ry(xe),...Ye?{fetchers:new Map(V.fetchers)}:{}},{flushSync:ue}),{shortCircuited:!0}}if(Rt){let Ye={};if(!Z){Ye.navigation=Ue;let pt=Ri(xe);pt!==void 0&&(Ye.actionData=pt)}st.length>0&&(Ye.fetchers=Ss(st)),Fe(Ye,{flushSync:ue})}st.forEach(Ye=>{Wt(Ye.key),Ye.controller&&Ge.set(Ye.key,Ye.controller)});let ir=()=>st.forEach(Ye=>Wt(Ye.key));S&&S.signal.addEventListener("abort",ir);let{loaderResults:sr,fetcherResults:sn}=await Yr(V,G,tt,st,D);if(D.signal.aborted)return{shortCircuited:!0};S&&S.signal.removeEventListener("abort",ir),st.forEach(Ye=>Ge.delete(Ye.key));let Kt=qu(sr);if(Kt)return await qt(D,Kt.result,!0,{replace:pe}),{shortCircuited:!0};if(Kt=qu(sn),Kt)return Ie.add(Kt.key),await qt(D,Kt.result,!0,{replace:pe}),{shortCircuited:!0};let{loaderData:Zr,errors:kr}=ty(V,G,sr,xe,st,sn);we&&V.errors&&(kr={...V.errors,...kr});let or=Cr(),ot=Ci(Qe),ei=or||ot||st.length>0;return{matches:G,loaderData:Zr,errors:kr,...ei?{fetchers:new Map(V.fetchers)}:{}}}function Ri(D){if(D&&!Bn(D[1]))return{[D[0]]:D[1].data};if(V.actionData)return Object.keys(V.actionData).length===0?null:V.actionData}function Ss(D){return D.forEach(U=>{let G=V.fetchers.get(U.key),Z=Ya(void 0,G?G.data:void 0);V.fetchers.set(U.key,Z)}),new Map(V.fetchers)}async function uo(D,U,G,Z){Wt(D);let fe=(Z&&Z.flushSync)===!0,ye=c||l,Ce=Xh(V.location,V.matches,h,G,U,Z==null?void 0:Z.relative),pe=ts(ye,Ce,h),we=rr(pe,ye,Ce);if(we.active&&we.matches&&(pe=we.matches),!pe){lt(D,U,Zn(404,{pathname:Ce}),{flushSync:fe});return}let{path:ue,submission:xe,error:Ue}=Gg(!0,Ce,Z);if(Ue){lt(D,U,Ue,{flushSync:fe});return}let it=Ja(pe,ue),Rt=(Z&&Z.preventScrollReset)===!0;if(xe&&vr(xe.formMethod)){await Ai(D,U,ue,it,pe,we.active,fe,Rt,xe);return}he.set(D,{routeId:U,path:ue}),await er(D,U,ue,it,pe,we.active,fe,Rt,xe)}async function Ai(D,U,G,Z,fe,ye,Ce,pe,we){Rr(),he.delete(D);function ue(mt){if(!mt.route.action&&!mt.route.lazy){let In=Zn(405,{method:we.formMethod,pathname:G,routeId:U});return lt(D,U,In,{flushSync:Ce}),!0}return!1}if(!ye&&ue(Z))return;let xe=V.fetchers.get(D);En(D,vI(we,xe),{flushSync:Ce});let Ue=new AbortController,it=qo(n.history,G,Ue.signal,we);if(ye){let mt=await mn(fe,G,it.signal);if(mt.type==="aborted")return;if(mt.type==="error"){lt(D,U,mt.error,{flushSync:Ce});return}else if(mt.matches){if(fe=mt.matches,Z=Ja(fe,G),ue(Z))return}else{lt(D,U,Zn(404,{pathname:G}),{flushSync:Ce});return}}Ge.set(D,Ue);let Rt=Ct,tt=(await tr("action",V,it,[Z],fe,D))[Z.route.id];if(it.signal.aborted){Ge.get(D)===Ue&&Ge.delete(D);return}if(X.has(D)){if(Qs(tt)||Bn(tt)){En(D,es(void 0));return}}else{if(Qs(tt))if(Ge.delete(D),Qe>Rt){En(D,es(void 0));return}else return Ie.add(D),En(D,Ya(we)),qt(it,tt,!1,{fetcherSubmission:we,preventScrollReset:pe});if(Bn(tt)){lt(D,U,tt.error);return}}let st=V.navigation.location||V.location,ir=qo(n.history,st,Ue.signal),sr=c||l,sn=V.navigation.state!=="idle"?ts(sr,V.navigation.location,h):V.matches;Ke(sn,"Didn't find any matches after fetcher action");let Kt=++Ct;ae.set(D,Kt);let Zr=Ya(we,tt.data);V.fetchers.set(D,Zr);let[kr,or]=Yg(n.history,V,sn,we,st,!1,P,dt,X,he,Ie,sr,h,[Z.route.id,tt]);or.filter(mt=>mt.key!==D).forEach(mt=>{let In=mt.key,on=V.fetchers.get(In),co=Ya(void 0,on?on.data:void 0);V.fetchers.set(In,co),Wt(In),mt.controller&&Ge.set(In,mt.controller)}),Fe({fetchers:new Map(V.fetchers)});let ot=()=>or.forEach(mt=>Wt(mt.key));Ue.signal.addEventListener("abort",ot);let{loaderResults:ei,fetcherResults:Ye}=await Yr(V,sn,kr,or,ir);if(Ue.signal.aborted)return;Ue.signal.removeEventListener("abort",ot),ae.delete(D),Ge.delete(D),or.forEach(mt=>Ge.delete(mt.key));let pt=qu(ei);if(pt)return qt(ir,pt.result,!1,{preventScrollReset:pe});if(pt=qu(Ye),pt)return Ie.add(pt.key),qt(ir,pt.result,!1,{preventScrollReset:pe});let{loaderData:Gt,errors:ar}=ty(V,sn,ei,void 0,or,Ye);if(V.fetchers.has(D)){let mt=es(tt.data);V.fetchers.set(D,mt)}Ci(Kt),V.navigation.state==="loading"&&Kt>Qe?(Ke(de,"Expected pending action"),S&&S.abort(),ft(V.navigation.location,{matches:sn,loaderData:Gt,errors:ar,fetchers:new Map(V.fetchers)})):(Fe({errors:ar,loaderData:ny(V.loaderData,Gt,sn,ar),fetchers:new Map(V.fetchers)}),P=!1)}async function er(D,U,G,Z,fe,ye,Ce,pe,we){let ue=V.fetchers.get(D);En(D,Ya(we,ue?ue.data:void 0),{flushSync:Ce});let xe=new AbortController,Ue=qo(n.history,G,xe.signal);if(ye){let tt=await mn(fe,G,Ue.signal);if(tt.type==="aborted")return;if(tt.type==="error"){lt(D,U,tt.error,{flushSync:Ce});return}else if(tt.matches)fe=tt.matches,Z=Ja(fe,G);else{lt(D,U,Zn(404,{pathname:G}),{flushSync:Ce});return}}Ge.set(D,xe);let it=Ct,He=(await tr("loader",V,Ue,[Z],fe,D))[Z.route.id];if(Ge.get(D)===xe&&Ge.delete(D),!Ue.signal.aborted){if(X.has(D)){En(D,es(void 0));return}if(Qs(He))if(Qe>it){En(D,es(void 0));return}else{Ie.add(D),await qt(Ue,He,!1,{preventScrollReset:pe});return}if(Bn(He)){lt(D,U,He.error);return}En(D,es(He.data))}}async function qt(D,U,G,{submission:Z,fetcherSubmission:fe,preventScrollReset:ye,replace:Ce}={}){U.response.headers.has("X-Remix-Revalidate")&&(P=!0);let pe=U.response.headers.get("Location");Ke(pe,"Expected a Location header on the redirect Response"),pe=Zg(pe,new URL(D.url),h);let we=cl(V.location,pe,{_isRedirect:!0});if(t){let He=!1;if(U.response.headers.has("X-Remix-Reload-Document"))He=!0;else if(xf.test(pe)){const tt=n.history.createURL(pe);He=tt.origin!==e.location.origin||Tr(tt.pathname,h)==null}if(He){Ce?e.location.replace(pe):e.location.assign(pe);return}}S=null;let ue=Ce===!0||U.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:xe,formAction:Ue,formEncType:it}=V.navigation;!Z&&!fe&&xe&&Ue&&it&&(Z=oy(V.navigation));let Rt=Z||fe;if(tI.has(U.response.status)&&Rt&&vr(Rt.formMethod))await rn(ue,we,{submission:{...Rt,formAction:pe},preventScrollReset:ye||x,enableViewTransition:G?R:void 0});else{let He=Fh(we,Z);await rn(ue,we,{overrideNavigation:He,fetcherSubmission:fe,preventScrollReset:ye||x,enableViewTransition:G?R:void 0})}}async function tr(D,U,G,Z,fe,ye){let Ce,pe={};try{Ce=await cI(p,D,U,G,Z,fe,ye,o,i)}catch(we){return Z.forEach(ue=>{pe[ue.route.id]={type:"error",error:we}}),pe}for(let[we,ue]of Object.entries(Ce))if(gI(ue)){let xe=ue.result;pe[we]={type:"redirect",response:fI(xe,G,we,fe,h)}}else pe[we]=await hI(ue);return pe}async function Yr(D,U,G,Z,fe){let ye=tr("loader",D,fe,G,U,null),Ce=Promise.all(Z.map(async ue=>{if(ue.matches&&ue.match&&ue.controller){let Ue=(await tr("loader",D,qo(n.history,ue.path,ue.controller.signal),[ue.match],ue.matches,ue.key))[ue.match.route.id];return{[ue.key]:Ue}}else return Promise.resolve({[ue.key]:{type:"error",error:Zn(404,{pathname:ue.path})}})})),pe=await ye,we=(await Ce).reduce((ue,xe)=>Object.assign(ue,xe),{});return{loaderResults:pe,fetcherResults:we}}function Rr(){P=!0,he.forEach((D,U)=>{Ge.has(U)&&dt.add(U),Wt(U)})}function En(D,U,G={}){V.fetchers.set(D,U),Fe({fetchers:new Map(V.fetchers)},{flushSync:(G&&G.flushSync)===!0})}function lt(D,U,G,Z={}){let fe=Gs(V.matches,U);Ln(D),Fe({errors:{[fe.route.id]:G},fetchers:new Map(V.fetchers)},{flushSync:(Z&&Z.flushSync)===!0})}function St(D){return M.set(D,(M.get(D)||0)+1),X.has(D)&&X.delete(D),V.fetchers.get(D)||nI}function Ln(D){let U=V.fetchers.get(D);Ge.has(D)&&!(U&&U.state==="loading"&&ae.has(D))&&Wt(D),he.delete(D),ae.delete(D),Ie.delete(D),X.delete(D),dt.delete(D),V.fetchers.delete(D)}function Rs(D){let U=(M.get(D)||0)-1;U<=0?(M.delete(D),X.add(D)):M.set(D,U),Fe({fetchers:new Map(V.fetchers)})}function Wt(D){let U=Ge.get(D);U&&(U.abort(),Ge.delete(D))}function Ar(D){for(let U of D){let G=St(U),Z=es(G.data);V.fetchers.set(U,Z)}}function Cr(){let D=[],U=!1;for(let G of Ie){let Z=V.fetchers.get(G);Ke(Z,`Expected fetcher: ${G}`),Z.state==="loading"&&(Ie.delete(G),D.push(G),U=!0)}return Ar(D),U}function Ci(D){let U=[];for(let[G,Z]of ae)if(Z<D){let fe=V.fetchers.get(G);Ke(fe,`Expected fetcher: ${G}`),fe.state==="loading"&&(Wt(G),ae.delete(G),U.push(G))}return Ar(U),U.length>0}function As(D,U){let G=V.blockers.get(D)||Qa;return Ee.get(D)!==U&&Ee.set(D,U),G}function Pi(D){V.blockers.delete(D),Ee.delete(D)}function Pr(D,U){let G=V.blockers.get(D)||Qa;Ke(G.state==="unblocked"&&U.state==="blocked"||G.state==="blocked"&&U.state==="blocked"||G.state==="blocked"&&U.state==="proceeding"||G.state==="blocked"&&U.state==="unblocked"||G.state==="proceeding"&&U.state==="unblocked",`Invalid blocker state transition: ${G.state} -> ${U.state}`);let Z=new Map(V.blockers);Z.set(D,U),Fe({blockers:Z})}function ki({currentLocation:D,nextLocation:U,historyAction:G}){if(Ee.size===0)return;Ee.size>1&&tn(!1,"A router only supports one blocker at a time");let Z=Array.from(Ee.entries()),[fe,ye]=Z[Z.length-1],Ce=V.blockers.get(fe);if(!(Ce&&Ce.state==="proceeding")&&ye({currentLocation:D,nextLocation:U,historyAction:G}))return fe}function nr(D){let U=Zn(404,{pathname:D}),G=c||l,{matches:Z,route:fe}=iy(G);return{notFoundMatches:Z,route:fe,error:U}}function xi(D,U,G){if(C=D,B=U,b=G||null,!F&&V.navigation===Mh){F=!0;let Z=On(V.location,V.matches);Z!=null&&Fe({restoreScrollPosition:Z})}return()=>{C=null,B=null,b=null}}function Xr(D,U){return b&&b(D,U.map(Z=>bT(Z,V.loaderData)))||D.key}function Tn(D,U){if(C&&B){let G=Xr(D,U);C[G]=B()}}function On(D,U){if(C){let G=Xr(D,U),Z=C[G];if(typeof Z=="number")return Z}return null}function rr(D,U,G){if(y)if(D){if(Object.keys(D[0].params).length>0)return{active:!0,matches:ec(U,G,h,!0)}}else return{active:!0,matches:ec(U,G,h,!0)||[]};return{active:!1,matches:null}}async function mn(D,U,G){if(!y)return{type:"success",matches:D};let Z=D;for(;;){let fe=c==null,ye=c||l,Ce=o;try{await y({path:U,matches:Z,patch:(ue,xe)=>{G.aborted||Jg(ue,xe,ye,Ce,i)}})}catch(ue){return{type:"error",error:ue,partialMatches:Z}}finally{fe&&!G.aborted&&(l=[...l])}if(G.aborted)return{type:"aborted"};let pe=ts(ye,U,h);if(pe)return{type:"success",matches:pe};let we=ec(ye,U,h,!0);if(!we||Z.length===we.length&&Z.every((ue,xe)=>ue.route.id===we[xe].route.id))return{type:"success",matches:null};Z=we}}function Cs(D){o={},c=fc(D,i,void 0,o)}function Jr(D,U){let G=c==null;Jg(D,U,c||l,o,i),G&&(l=[...l],Fe({}))}return oe={get basename(){return h},get future(){return v},get state(){return V},get routes(){return l},get window(){return e},initialize:ze,subscribe:et,enableScrollRestoration:xi,navigate:Hn,fetch:uo,revalidate:Ii,createHref:D=>n.history.createHref(D),encodeLocation:D=>n.history.encodeLocation(D),getFetcher:St,deleteFetcher:Rs,dispose:Ze,getBlocker:As,deleteBlocker:Pi,patchRoutes:Jr,_internalFetchControllers:Ge,_internalSetRoutes:Cs},oe}function sI(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function Xh(n,e,t,i,o,l){let c,h;if(o){c=[];for(let y of e)if(c.push(y),y.route.id===o){h=y;break}}else c=e,h=e[e.length-1];let p=kf(i||".",Pf(c),Tr(n.pathname,t)||n.pathname,l==="path");if(i==null&&(p.search=n.search,p.hash=n.hash),(i==null||i===""||i===".")&&h){let y=Nf(p.search);if(h.route.index&&!y)p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index";else if(!h.route.index&&y){let v=new URLSearchParams(p.search),T=v.getAll("index");v.delete("index"),T.filter(C=>C).forEach(C=>v.append("index",C));let I=v.toString();p.search=I?`?${I}`:""}}return t!=="/"&&(p.pathname=p.pathname==="/"?t:zr([t,p.pathname])),hs(p)}function Gg(n,e,t){if(!t||!sI(t))return{path:e};if(t.formMethod&&!yI(t.formMethod))return{path:e,error:Zn(405,{method:t.formMethod})};let i=()=>({path:e,error:Zn(400,{type:"invalid-body"})}),l=(t.formMethod||"get").toUpperCase(),c=U_(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!vr(l))return i();let T=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((I,[C,b])=>`${I}${C}=${b}
`,""):String(t.body);return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:void 0,text:T}}}else if(t.formEncType==="application/json"){if(!vr(l))return i();try{let T=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:T,text:void 0}}}catch{return i()}}}Ke(typeof FormData=="function","FormData is not available in this environment");let h,p;if(t.formData)h=Zh(t.formData),p=t.formData;else if(t.body instanceof FormData)h=Zh(t.body),p=t.body;else if(t.body instanceof URLSearchParams)h=t.body,p=ey(h);else if(t.body==null)h=new URLSearchParams,p=new FormData;else try{h=new URLSearchParams(t.body),p=ey(h)}catch{return i()}let y={formMethod:l,formAction:c,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(vr(y.formMethod))return{path:e,submission:y};let v=_s(e);return n&&v.search&&Nf(v.search)&&h.append("index",""),v.search=`?${h}`,{path:hs(v),submission:y}}function Qg(n,e,t=!1){let i=n.findIndex(o=>o.route.id===e);return i>=0?n.slice(0,t?i+1:i):n}function Yg(n,e,t,i,o,l,c,h,p,y,v,T,I,C){let b=C?Bn(C[1])?C[1].error:C[1].data:void 0,B=n.createURL(e.location),F=n.createURL(o),W=t;l&&e.errors?W=Qg(t,Object.keys(e.errors)[0],!0):C&&Bn(C[1])&&(W=Qg(t,C[0]));let Y=C?C[1].statusCode:void 0,J=Y&&Y>=400,oe=W.filter((de,x)=>{let{route:S}=de;if(S.lazy)return!0;if(S.loader==null)return!1;if(l)return Jh(S,e.loaderData,e.errors);if(oI(e.loaderData,e.matches[x],de))return!0;let R=e.matches[x],k=de;return Xg(de,{currentUrl:B,currentParams:R.params,nextUrl:F,nextParams:k.params,...i,actionResult:b,actionStatus:Y,defaultShouldRevalidate:J?!1:c||B.pathname+B.search===F.pathname+F.search||B.search!==F.search||aI(R,k)})}),V=[];return y.forEach((de,x)=>{if(l||!t.some(j=>j.route.id===de.routeId)||p.has(x))return;let S=ts(T,de.path,I);if(!S){V.push({key:x,routeId:de.routeId,path:de.path,matches:null,match:null,controller:null});return}let R=e.fetchers.get(x),k=Ja(S,de.path),L=!1;v.has(x)?L=!1:h.has(x)?(h.delete(x),L=!0):R&&R.state!=="idle"&&R.data===void 0?L=c:L=Xg(k,{currentUrl:B,currentParams:e.matches[e.matches.length-1].params,nextUrl:F,nextParams:t[t.length-1].params,...i,actionResult:b,actionStatus:Y,defaultShouldRevalidate:J?!1:c}),L&&V.push({key:x,routeId:de.routeId,path:de.path,matches:S,match:k,controller:new AbortController})}),[oe,V]}function Jh(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let i=e!=null&&e[n.id]!==void 0,o=t!=null&&t[n.id]!==void 0;return!i&&o?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!i&&!o}function oI(n,e,t){let i=!e||t.route.id!==e.route.id,o=!n.hasOwnProperty(t.route.id);return i||o}function aI(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function Xg(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function Jg(n,e,t,i,o){let l;if(n){let p=i[n];Ke(p,`No route found to patch children into: routeId = ${n}`),p.children||(p.children=[]),l=p.children}else l=t;let c=e.filter(p=>!l.some(y=>F_(p,y))),h=fc(c,o,[n||"_","patch",String((l==null?void 0:l.length)||"0")],i);l.push(...h)}function F_(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,i)=>{var o;return(o=e.children)==null?void 0:o.some(l=>F_(t,l))}):!1}async function lI(n,e,t){if(!n.lazy)return;let i=await n.lazy();if(!n.lazy)return;let o=t[n.id];Ke(o,"No route found in manifest");let l={};for(let c in i){let p=o[c]!==void 0&&c!=="hasErrorBoundary";tn(!p,`Route "${o.id}" has a static property "${c}" defined but its lazy function is also returning a value for this property. The lazy route property "${c}" will be ignored.`),!p&&!NT.has(c)&&(l[c]=i[c])}Object.assign(o,l),Object.assign(o,{...e(o),lazy:void 0})}async function uI({matches:n}){let e=n.filter(i=>i.shouldLoad);return(await Promise.all(e.map(i=>i.resolve()))).reduce((i,o,l)=>Object.assign(i,{[e[l].route.id]:o}),{})}async function cI(n,e,t,i,o,l,c,h,p,y){let v=l.map(C=>C.route.lazy?lI(C.route,p,h):void 0),T=l.map((C,b)=>{let B=v[b],F=o.some(Y=>Y.route.id===C.route.id);return{...C,shouldLoad:F,resolve:async Y=>(Y&&i.method==="GET"&&(C.route.lazy||C.route.loader)&&(F=!0),F?dI(e,i,C,B,Y,y):Promise.resolve({type:"data",result:void 0}))}}),I=await n({matches:T,request:i,params:l[0].params,fetcherKey:c,context:y});try{await Promise.all(v)}catch{}return I}async function dI(n,e,t,i,o,l){let c,h,p=y=>{let v,T=new Promise((b,B)=>v=B);h=()=>v(),e.signal.addEventListener("abort",h);let I=b=>typeof y!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${n}" [routeId: ${t.route.id}]`)):y({request:e,params:t.params,context:l},...b!==void 0?[b]:[]),C=(async()=>{try{return{type:"data",result:await(o?o(B=>I(B)):I())}}catch(b){return{type:"error",result:b}}})();return Promise.race([C,T])};try{let y=t.route[n];if(i)if(y){let v,[T]=await Promise.all([p(y).catch(I=>{v=I}),i]);if(v!==void 0)throw v;c=T}else if(await i,y=t.route[n],y)c=await p(y);else if(n==="action"){let v=new URL(e.url),T=v.pathname+v.search;throw Zn(405,{method:e.method,pathname:T,routeId:t.route.id})}else return{type:"data",result:void 0};else if(y)c=await p(y);else{let v=new URL(e.url),T=v.pathname+v.search;throw Zn(404,{pathname:T})}}catch(y){return{type:"error",result:y}}finally{h&&e.signal.removeEventListener("abort",h)}return c}async function hI(n){var i,o,l,c;let{result:e,type:t}=n;if(j_(e)){let h;try{let p=e.headers.get("Content-Type");p&&/\bapplication\/json\b/.test(p)?e.body==null?h=null:h=await e.json():h=await e.text()}catch(p){return{type:"error",error:p}}return t==="error"?{type:"error",error:new mc(e.status,e.statusText,h),statusCode:e.status,headers:e.headers}:{type:"data",data:h,statusCode:e.status,headers:e.headers}}if(t==="error"){if(sy(e)){if(e.data instanceof Error)return{type:"error",error:e.data,statusCode:(i=e.init)==null?void 0:i.status};e=new mc(((o=e.init)==null?void 0:o.status)||500,void 0,e.data)}return{type:"error",error:e,statusCode:bc(e)?e.status:void 0}}return sy(e)?{type:"data",data:e.data,statusCode:(l=e.init)==null?void 0:l.status,headers:(c=e.init)!=null&&c.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function fI(n,e,t,i,o){let l=n.headers.get("Location");if(Ke(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!xf.test(l)){let c=i.slice(0,i.findIndex(h=>h.route.id===t)+1);l=Xh(new URL(e.url),c,o,l),n.headers.set("Location",l)}return n}function Zg(n,e,t){if(xf.test(n)){let i=n,o=i.startsWith("//")?new URL(e.protocol+i):new URL(i),l=Tr(o.pathname,t)!=null;if(o.origin===e.origin&&l)return o.pathname+o.search+o.hash}return n}function qo(n,e,t,i){let o=n.createURL(U_(e)).toString(),l={signal:t};if(i&&vr(i.formMethod)){let{formMethod:c,formEncType:h}=i;l.method=c.toUpperCase(),h==="application/json"?(l.headers=new Headers({"Content-Type":h}),l.body=JSON.stringify(i.json)):h==="text/plain"?l.body=i.text:h==="application/x-www-form-urlencoded"&&i.formData?l.body=Zh(i.formData):l.body=i.formData}return new Request(o,l)}function Zh(n){let e=new URLSearchParams;for(let[t,i]of n.entries())e.append(t,typeof i=="string"?i:i.name);return e}function ey(n){let e=new FormData;for(let[t,i]of n.entries())e.append(t,i);return e}function pI(n,e,t,i=!1,o=!1){let l={},c=null,h,p=!1,y={},v=t&&Bn(t[1])?t[1].error:void 0;return n.forEach(T=>{if(!(T.route.id in e))return;let I=T.route.id,C=e[I];if(Ke(!Qs(C),"Cannot handle redirect results in processLoaderData"),Bn(C)){let b=C.error;if(v!==void 0&&(b=v,v=void 0),c=c||{},o)c[I]=b;else{let B=Gs(n,I);c[B.route.id]==null&&(c[B.route.id]=b)}i||(l[I]=M_),p||(p=!0,h=bc(C.error)?C.error.status:500),C.headers&&(y[I]=C.headers)}else l[I]=C.data,C.statusCode&&C.statusCode!==200&&!p&&(h=C.statusCode),C.headers&&(y[I]=C.headers)}),v!==void 0&&t&&(c={[t[0]]:v},l[t[0]]=void 0),{loaderData:l,errors:c,statusCode:h||200,loaderHeaders:y}}function ty(n,e,t,i,o,l){let{loaderData:c,errors:h}=pI(e,t,i);return o.forEach(p=>{let{key:y,match:v,controller:T}=p,I=l[y];if(Ke(I,"Did not find corresponding fetcher result"),!(T&&T.signal.aborted))if(Bn(I)){let C=Gs(n.matches,v==null?void 0:v.route.id);h&&h[C.route.id]||(h={...h,[C.route.id]:I.error}),n.fetchers.delete(y)}else if(Qs(I))Ke(!1,"Unhandled fetcher revalidation redirect");else{let C=es(I.data);n.fetchers.set(y,C)}}),{loaderData:c,errors:h}}function ny(n,e,t,i){let o=Object.entries(e).filter(([,l])=>l!==M_).reduce((l,[c,h])=>(l[c]=h,l),{});for(let l of t){let c=l.route.id;if(!e.hasOwnProperty(c)&&n.hasOwnProperty(c)&&l.route.loader&&(o[c]=n[c]),i&&i.hasOwnProperty(c))break}return o}function ry(n){return n?Bn(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function Gs(n,e){return(e?n.slice(0,n.findIndex(i=>i.route.id===e)+1):[...n]).reverse().find(i=>i.route.hasErrorBoundary===!0)||n[0]}function iy(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Zn(n,{pathname:e,routeId:t,method:i,type:o,message:l}={}){let c="Unknown Server Error",h="Unknown @remix-run/router error";return n===400?(c="Bad Request",i&&e&&t?h=`You made a ${i} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:o==="invalid-body"&&(h="Unable to encode submission body")):n===403?(c="Forbidden",h=`Route "${t}" does not match URL "${e}"`):n===404?(c="Not Found",h=`No route matches URL "${e}"`):n===405&&(c="Method Not Allowed",i&&e&&t?h=`You made a ${i.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:i&&(h=`Invalid request method "${i.toUpperCase()}"`)),new mc(n||500,c,new Error(h),!0)}function qu(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[i,o]=e[t];if(Qs(o))return{key:i,result:o}}}function U_(n){let e=typeof n=="string"?_s(n):n;return hs({...e,hash:""})}function mI(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function gI(n){return j_(n.result)&&eI.has(n.result.status)}function Bn(n){return n.type==="error"}function Qs(n){return(n&&n.type)==="redirect"}function sy(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function j_(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function yI(n){return ZT.has(n.toUpperCase())}function vr(n){return XT.has(n.toUpperCase())}function Nf(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function Ja(n,e){let t=typeof e=="string"?_s(e).search:e.search;if(n[n.length-1].route.index&&Nf(t||""))return n[n.length-1];let i=L_(n);return i[i.length-1]}function oy(n){let{formMethod:e,formAction:t,formEncType:i,text:o,formData:l,json:c}=n;if(!(!e||!t||!i)){if(o!=null)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:void 0,text:o};if(l!=null)return{formMethod:e,formAction:t,formEncType:i,formData:l,json:void 0,text:void 0};if(c!==void 0)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:c,text:void 0}}}function Fh(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function _I(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Ya(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function vI(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function es(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function wI(n,e){try{let t=n.sessionStorage.getItem(V_);if(t){let i=JSON.parse(t);for(let[o,l]of Object.entries(i||{}))l&&Array.isArray(l)&&e.set(o,new Set(l||[]))}}catch{}}function EI(n,e){if(e.size>0){let t={};for(let[i,o]of e)t[i]=[...o];try{n.sessionStorage.setItem(V_,JSON.stringify(t))}catch(i){tn(!1,`Failed to save applied view transitions in sessionStorage (${i}).`)}}}function TI(){let n,e,t=new Promise((i,o)=>{n=async l=>{i(l);try{await t}catch{}},e=async l=>{o(l);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var io=H.createContext(null);io.displayName="DataRouter";var El=H.createContext(null);El.displayName="DataRouterState";var Df=H.createContext({isTransitioning:!1});Df.displayName="ViewTransition";var z_=H.createContext(new Map);z_.displayName="Fetchers";var II=H.createContext(null);II.displayName="Await";var Kr=H.createContext(null);Kr.displayName="Navigation";var Lc=H.createContext(null);Lc.displayName="Location";var Gr=H.createContext({outlet:null,matches:[],isDataRoute:!1});Gr.displayName="Route";var bf=H.createContext(null);bf.displayName="RouteError";function SI(n,{relative:e}={}){Ke(Tl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=H.useContext(Kr),{hash:o,pathname:l,search:c}=Sl(n,{relative:e}),h=l;return t!=="/"&&(h=l==="/"?t:zr([t,l])),i.createHref({pathname:h,search:c,hash:o})}function Tl(){return H.useContext(Lc)!=null}function so(){return Ke(Tl(),"useLocation() may be used only in the context of a <Router> component."),H.useContext(Lc).location}var B_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function $_(n){H.useContext(Kr).static||H.useLayoutEffect(n)}function Il(){let{isDataRoute:n}=H.useContext(Gr);return n?UI():RI()}function RI(){Ke(Tl(),"useNavigate() may be used only in the context of a <Router> component.");let n=H.useContext(io),{basename:e,navigator:t}=H.useContext(Kr),{matches:i}=H.useContext(Gr),{pathname:o}=so(),l=JSON.stringify(Pf(i)),c=H.useRef(!1);return $_(()=>{c.current=!0}),H.useCallback((p,y={})=>{if(tn(c.current,B_),!c.current)return;if(typeof p=="number"){t.go(p);return}let v=kf(p,JSON.parse(l),o,y.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:zr([e,v.pathname])),(y.replace?t.replace:t.push)(v,y.state,y)},[e,t,l,o,n])}var AI=H.createContext(null);function CI(n){let e=H.useContext(Gr).outlet;return e&&H.createElement(AI.Provider,{value:n},e)}function Sl(n,{relative:e}={}){let{matches:t}=H.useContext(Gr),{pathname:i}=so(),o=JSON.stringify(Pf(t));return H.useMemo(()=>kf(n,JSON.parse(o),i,e==="path"),[n,o,i,e])}function PI(n,e,t,i){Ke(Tl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=H.useContext(Kr),{matches:l}=H.useContext(Gr),c=l[l.length-1],h=c?c.params:{},p=c?c.pathname:"/",y=c?c.pathnameBase:"/",v=c&&c.route;{let W=v&&v.path||"";H_(p,!v||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let T=so(),I;I=T;let C=I.pathname||"/",b=C;if(y!=="/"){let W=y.replace(/^\//,"").split("/");b="/"+C.replace(/^\//,"").split("/").slice(W.length).join("/")}let B=ts(n,{pathname:b});return tn(v||B!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),tn(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),bI(B&&B.map(W=>Object.assign({},W,{params:Object.assign({},h,W.params),pathname:zr([y,o.encodeLocation?o.encodeLocation(W.pathname).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?y:zr([y,o.encodeLocation?o.encodeLocation(W.pathnameBase).pathname:W.pathnameBase])})),l,t,i)}function kI(){let n=FI(),e=bc(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=H.createElement(H.Fragment,null,H.createElement("p",null," Hey developer "),H.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",H.createElement("code",{style:l},"ErrorBoundary")," or"," ",H.createElement("code",{style:l},"errorElement")," prop on your route.")),H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),t?H.createElement("pre",{style:o},t):null,c)}var xI=H.createElement(kI,null),NI=class extends H.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?H.createElement(Gr.Provider,{value:this.props.routeContext},H.createElement(bf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function DI({routeContext:n,match:e,children:t}){let i=H.useContext(io);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),H.createElement(Gr.Provider,{value:n},t)}function bI(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=t==null?void 0:t.errors;if(l!=null){let p=o.findIndex(y=>y.route.id&&(l==null?void 0:l[y.route.id])!==void 0);Ke(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let c=!1,h=-1;if(t)for(let p=0;p<o.length;p++){let y=o[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(h=p),y.route.id){let{loaderData:v,errors:T}=t,I=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!T||T[y.route.id]===void 0);if(y.route.lazy||I){c=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((p,y,v)=>{let T,I=!1,C=null,b=null;t&&(T=l&&y.route.id?l[y.route.id]:void 0,C=y.route.errorElement||xI,c&&(h<0&&v===0?(H_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,b=null):h===v&&(I=!0,b=y.route.hydrateFallbackElement||null)));let B=e.concat(o.slice(0,v+1)),F=()=>{let W;return T?W=C:I?W=b:y.route.Component?W=H.createElement(y.route.Component,null):y.route.element?W=y.route.element:W=p,H.createElement(DI,{match:y,routeContext:{outlet:p,matches:B,isDataRoute:t!=null},children:W})};return t&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?H.createElement(NI,{location:t.location,revalidation:t.revalidation,component:C,error:T,children:F(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):F()},null)}function Lf(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function LI(n){let e=H.useContext(io);return Ke(e,Lf(n)),e}function OI(n){let e=H.useContext(El);return Ke(e,Lf(n)),e}function VI(n){let e=H.useContext(Gr);return Ke(e,Lf(n)),e}function Of(n){let e=VI(n),t=e.matches[e.matches.length-1];return Ke(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function MI(){return Of("useRouteId")}function FI(){var i;let n=H.useContext(bf),e=OI("useRouteError"),t=Of("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function UI(){let{router:n}=LI("useNavigate"),e=Of("useNavigate"),t=H.useRef(!1);return $_(()=>{t.current=!0}),H.useCallback(async(o,l={})=>{tn(t.current,B_),t.current&&(typeof o=="number"?n.navigate(o):await n.navigate(o,{fromRouteId:e,...l}))},[n,e])}var ay={};function H_(n,e,t){!e&&!ay[n]&&(ay[n]=!0,tn(!1,t))}var ly={};function uy(n,e){!n&&!ly[e]&&(ly[e]=!0,console.warn(e))}function jI(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&tn(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:H.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&tn(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:H.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&tn(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:H.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var zI=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",e(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",t(i))}})}};function BI({router:n,flushSync:e}){let[t,i]=H.useState(n.state),[o,l]=H.useState(),[c,h]=H.useState({isTransitioning:!1}),[p,y]=H.useState(),[v,T]=H.useState(),[I,C]=H.useState(),b=H.useRef(new Map),B=H.useCallback((J,{deletedFetchers:oe,flushSync:V,viewTransitionOpts:de})=>{oe.forEach(S=>b.current.delete(S)),J.fetchers.forEach((S,R)=>{S.data!==void 0&&b.current.set(R,S.data)}),uy(V===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let x=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(uy(de==null||x,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!de||!x){e&&V?e(()=>i(J)):H.startTransition(()=>i(J));return}if(e&&V){e(()=>{v&&(p&&p.resolve(),v.skipTransition()),h({isTransitioning:!0,flushSync:!0,currentLocation:de.currentLocation,nextLocation:de.nextLocation})});let S=n.window.document.startViewTransition(()=>{e(()=>i(J))});S.finished.finally(()=>{e(()=>{y(void 0),T(void 0),l(void 0),h({isTransitioning:!1})})}),e(()=>T(S));return}v?(p&&p.resolve(),v.skipTransition(),C({state:J,currentLocation:de.currentLocation,nextLocation:de.nextLocation})):(l(J),h({isTransitioning:!0,flushSync:!1,currentLocation:de.currentLocation,nextLocation:de.nextLocation}))},[n.window,e,v,p]);H.useLayoutEffect(()=>n.subscribe(B),[n,B]),H.useEffect(()=>{c.isTransitioning&&!c.flushSync&&y(new zI)},[c]),H.useEffect(()=>{if(p&&o&&n.window){let J=o,oe=p.promise,V=n.window.document.startViewTransition(async()=>{H.startTransition(()=>i(J)),await oe});V.finished.finally(()=>{y(void 0),T(void 0),l(void 0),h({isTransitioning:!1})}),T(V)}},[o,p,n.window]),H.useEffect(()=>{p&&o&&t.location.key===o.location.key&&p.resolve()},[p,v,t.location,o]),H.useEffect(()=>{!c.isTransitioning&&I&&(l(I.state),h({isTransitioning:!0,flushSync:!1,currentLocation:I.currentLocation,nextLocation:I.nextLocation}),C(void 0))},[c.isTransitioning,I]);let F=H.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:J=>n.navigate(J),push:(J,oe,V)=>n.navigate(J,{state:oe,preventScrollReset:V==null?void 0:V.preventScrollReset}),replace:(J,oe,V)=>n.navigate(J,{replace:!0,state:oe,preventScrollReset:V==null?void 0:V.preventScrollReset})}),[n]),W=n.basename||"/",Y=H.useMemo(()=>({router:n,navigator:F,static:!1,basename:W}),[n,F,W]);return H.createElement(H.Fragment,null,H.createElement(io.Provider,{value:Y},H.createElement(El.Provider,{value:t},H.createElement(z_.Provider,{value:b.current},H.createElement(Df.Provider,{value:c},H.createElement(WI,{basename:W,location:t.location,navigationType:t.historyAction,navigator:F},H.createElement($I,{routes:n.routes,future:n.future,state:t})))))),null)}var $I=H.memo(HI);function HI({routes:n,future:e,state:t}){return PI(n,void 0,t,e)}function qI(n){return CI(n.context)}function WI({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:o,static:l=!1}){Ke(!Tl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),h=H.useMemo(()=>({basename:c,navigator:o,static:l,future:{}}),[c,o,l]);typeof t=="string"&&(t=_s(t));let{pathname:p="/",search:y="",hash:v="",state:T=null,key:I="default"}=t,C=H.useMemo(()=>{let b=Tr(p,c);return b==null?null:{location:{pathname:b,search:y,hash:v,state:T,key:I},navigationType:i}},[c,p,y,v,T,I,i]);return tn(C!=null,`<Router basename="${c}"> is not able to match the URL "${p}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:H.createElement(Kr.Provider,{value:h},H.createElement(Lc.Provider,{children:e,value:C}))}var tc="get",nc="application/x-www-form-urlencoded";function Oc(n){return n!=null&&typeof n.tagName=="string"}function KI(n){return Oc(n)&&n.tagName.toLowerCase()==="button"}function GI(n){return Oc(n)&&n.tagName.toLowerCase()==="form"}function QI(n){return Oc(n)&&n.tagName.toLowerCase()==="input"}function YI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function XI(n,e){return n.button===0&&(!e||e==="_self")&&!YI(n)}var Wu=null;function JI(){if(Wu===null)try{new FormData(document.createElement("form"),0),Wu=!1}catch{Wu=!0}return Wu}var ZI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Uh(n){return n!=null&&!ZI.has(n)?(tn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${nc}"`),null):n}function e0(n,e){let t,i,o,l,c;if(GI(n)){let h=n.getAttribute("action");i=h?Tr(h,e):null,t=n.getAttribute("method")||tc,o=Uh(n.getAttribute("enctype"))||nc,l=new FormData(n)}else if(KI(n)||QI(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||h.getAttribute("action");if(i=p?Tr(p,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||tc,o=Uh(n.getAttribute("formenctype"))||Uh(h.getAttribute("enctype"))||nc,l=new FormData(h,n),!JI()){let{name:y,type:v,value:T}=n;if(v==="image"){let I=y?`${y}.`:"";l.append(`${I}x`,"0"),l.append(`${I}y`,"0")}else y&&l.append(y,T)}}else{if(Oc(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=tc,i=null,o=nc,c=n}return l&&o==="text/plain"&&(c=l,l=void 0),{action:i,method:t.toLowerCase(),encType:o,formData:l,body:c}}function Vf(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function t0(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function n0(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function r0(n,e,t){let i=await Promise.all(n.map(async o=>{let l=e.routes[o.route.id];if(l){let c=await t0(l,t);return c.links?c.links():[]}return[]}));return a0(i.flat(1).filter(n0).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function cy(n,e,t,i,o,l){let c=(p,y)=>t[y]?p.route.id!==t[y].route.id:!0,h=(p,y)=>{var v;return t[y].pathname!==p.pathname||((v=t[y].route.path)==null?void 0:v.endsWith("*"))&&t[y].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,y)=>c(p,y)||h(p,y)):l==="data"?e.filter((p,y)=>{var T;let v=i.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(c(p,y)||h(p,y))return!0;if(p.route.shouldRevalidate){let I=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((T=t[0])==null?void 0:T.params)||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof I=="boolean")return I}return!0}):[]}function i0(n,e){return s0(n.map(t=>{let i=e.routes[t.route.id];if(!i)return[];let o=[i.module];return i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function s0(n){return[...new Set(n)]}function o0(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function a0(n,e){let t=new Set;return new Set(e),n.reduce((i,o)=>{let l=JSON.stringify(o0(o));return t.has(l)||(t.add(l),i.push({key:l,link:o})),i},[])}function l0(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function u0(){let n=H.useContext(io);return Vf(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function c0(){let n=H.useContext(El);return Vf(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Mf=H.createContext(void 0);Mf.displayName="FrameworkContext";function q_(){let n=H.useContext(Mf);return Vf(n,"You must render this element inside a <HydratedRouter> element"),n}function d0(n,e){let t=H.useContext(Mf),[i,o]=H.useState(!1),[l,c]=H.useState(!1),{onFocus:h,onBlur:p,onMouseEnter:y,onMouseLeave:v,onTouchStart:T}=e,I=H.useRef(null);H.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let B=W=>{W.forEach(Y=>{c(Y.isIntersecting)})},F=new IntersectionObserver(B,{threshold:.5});return I.current&&F.observe(I.current),()=>{F.disconnect()}}},[n]),H.useEffect(()=>{if(i){let B=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(B)}}},[i]);let C=()=>{o(!0)},b=()=>{o(!1),c(!1)};return t?n!=="intent"?[l,I,{}]:[l,I,{onFocus:Xa(h,C),onBlur:Xa(p,b),onMouseEnter:Xa(y,C),onMouseLeave:Xa(v,b),onTouchStart:Xa(T,C)}]:[!1,I,{}]}function Xa(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function h0({page:n,...e}){let{router:t}=u0(),i=H.useMemo(()=>ts(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?H.createElement(p0,{page:n,matches:i,...e}):null}function f0(n){let{manifest:e,routeModules:t}=q_(),[i,o]=H.useState([]);return H.useEffect(()=>{let l=!1;return r0(n,e,t).then(c=>{l||o(c)}),()=>{l=!0}},[n,e,t]),i}function p0({page:n,matches:e,...t}){let i=so(),{manifest:o,routeModules:l}=q_(),{loaderData:c,matches:h}=c0(),p=H.useMemo(()=>cy(n,e,h,o,i,"data"),[n,e,h,o,i]),y=H.useMemo(()=>cy(n,e,h,o,i,"assets"),[n,e,h,o,i]),v=H.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let C=new Set,b=!1;if(e.forEach(F=>{var Y;let W=o.routes[F.route.id];!W||!W.hasLoader||(!p.some(J=>J.route.id===F.route.id)&&F.route.id in c&&((Y=l[F.route.id])!=null&&Y.shouldRevalidate)||W.hasClientLoader?b=!0:C.add(F.route.id))}),C.size===0)return[];let B=l0(n);return b&&C.size>0&&B.searchParams.set("_routes",e.filter(F=>C.has(F.route.id)).map(F=>F.route.id).join(",")),[B.pathname+B.search]},[c,i,o,p,e,n,l]),T=H.useMemo(()=>i0(y,o),[y,o]),I=f0(y);return H.createElement(H.Fragment,null,v.map(C=>H.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),T.map(C=>H.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),I.map(({key:C,link:b})=>H.createElement("link",{key:C,...b})))}function m0(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var W_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{W_&&(window.__reactRouterVersion="7.1.1")}catch{}function g0(n,e){return iI({basename:e==null?void 0:e.basename,future:e==null?void 0:e.future,history:PT({window:e==null?void 0:e.window}),hydrationData:y0(),routes:n,mapRouteProperties:jI,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function y0(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:_0(n.errors)}),n}function _0(n){if(!n)return null;let e=Object.entries(n),t={};for(let[i,o]of e)if(o&&o.__type==="RouteErrorResponse")t[i]=new mc(o.status,o.statusText,o.data,o.internal===!0);else if(o&&o.__type==="Error"){if(o.__subType){let l=window[o.__subType];if(typeof l=="function")try{let c=new l(o.message);c.stack="",t[i]=c}catch{}}if(t[i]==null){let l=new Error(o.message);l.stack="",t[i]=l}}else t[i]=o;return t}var K_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Js=H.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:o,reloadDocument:l,replace:c,state:h,target:p,to:y,preventScrollReset:v,viewTransition:T,...I},C){let{basename:b}=H.useContext(Kr),B=typeof y=="string"&&K_.test(y),F,W=!1;if(typeof y=="string"&&B&&(F=y,W_))try{let R=new URL(window.location.href),k=y.startsWith("//")?new URL(R.protocol+y):new URL(y),L=Tr(k.pathname,b);k.origin===R.origin&&L!=null?y=L+k.search+k.hash:W=!0}catch{tn(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Y=SI(y,{relative:o}),[J,oe,V]=d0(i,I),de=T0(y,{replace:c,state:h,target:p,preventScrollReset:v,relative:o,viewTransition:T});function x(R){e&&e(R),R.defaultPrevented||de(R)}let S=H.createElement("a",{...I,...V,href:F||Y,onClick:W||l?e:x,ref:m0(C,oe),target:p,"data-discover":!B&&t==="render"?"true":void 0});return J&&!B?H.createElement(H.Fragment,null,S,H.createElement(h0,{page:Y})):S});Js.displayName="Link";var v0=H.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:h,children:p,...y},v){let T=Sl(c,{relative:y.relative}),I=so(),C=H.useContext(El),{navigator:b,basename:B}=H.useContext(Kr),F=C!=null&&C0(T)&&h===!0,W=b.encodeLocation?b.encodeLocation(T).pathname:T.pathname,Y=I.pathname,J=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;t||(Y=Y.toLowerCase(),J=J?J.toLowerCase():null,W=W.toLowerCase()),J&&B&&(J=Tr(J,B)||J);const oe=W!=="/"&&W.endsWith("/")?W.length-1:W.length;let V=Y===W||!o&&Y.startsWith(W)&&Y.charAt(oe)==="/",de=J!=null&&(J===W||!o&&J.startsWith(W)&&J.charAt(W.length)==="/"),x={isActive:V,isPending:de,isTransitioning:F},S=V?e:void 0,R;typeof i=="function"?R=i(x):R=[i,V?"active":null,de?"pending":null,F?"transitioning":null].filter(Boolean).join(" ");let k=typeof l=="function"?l(x):l;return H.createElement(Js,{...y,"aria-current":S,className:R,ref:v,style:k,to:c,viewTransition:h},typeof p=="function"?p(x):p)});v0.displayName="NavLink";var w0=H.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:o,state:l,method:c=tc,action:h,onSubmit:p,relative:y,preventScrollReset:v,viewTransition:T,...I},C)=>{let b=R0(),B=A0(h,{relative:y}),F=c.toLowerCase()==="get"?"get":"post",W=typeof h=="string"&&K_.test(h),Y=J=>{if(p&&p(J),J.defaultPrevented)return;J.preventDefault();let oe=J.nativeEvent.submitter,V=(oe==null?void 0:oe.getAttribute("formmethod"))||c;b(oe||J.currentTarget,{fetcherKey:e,method:V,navigate:t,replace:o,state:l,relative:y,preventScrollReset:v,viewTransition:T})};return H.createElement("form",{ref:C,method:F,action:B,onSubmit:i?p:Y,...I,"data-discover":!W&&n==="render"?"true":void 0})});w0.displayName="Form";function E0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function G_(n){let e=H.useContext(io);return Ke(e,E0(n)),e}function T0(n,{target:e,replace:t,state:i,preventScrollReset:o,relative:l,viewTransition:c}={}){let h=Il(),p=so(),y=Sl(n,{relative:l});return H.useCallback(v=>{if(XI(v,e)){v.preventDefault();let T=t!==void 0?t:hs(p)===hs(y);h(n,{replace:T,state:i,preventScrollReset:o,relative:l,viewTransition:c})}},[p,h,y,t,i,e,n,o,l,c])}var I0=0,S0=()=>`__${String(++I0)}__`;function R0(){let{router:n}=G_("useSubmit"),{basename:e}=H.useContext(Kr),t=MI();return H.useCallback(async(i,o={})=>{let{action:l,method:c,encType:h,formData:p,body:y}=e0(i,e);if(o.navigate===!1){let v=o.fetcherKey||S0();await n.fetch(v,t,o.action||l,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||c,formEncType:o.encType||h,flushSync:o.flushSync})}else await n.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||c,formEncType:o.encType||h,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,e,t])}function A0(n,{relative:e}={}){let{basename:t}=H.useContext(Kr),i=H.useContext(Gr);Ke(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),l={...Sl(n||".",{relative:e})},c=so();if(n==null){l.search=c.search;let h=new URLSearchParams(l.search),p=h.getAll("index");if(p.some(v=>v==="")){h.delete("index"),p.filter(T=>T).forEach(T=>h.append("index",T));let v=h.toString();l.search=v?`?${v}`:""}}return(!n||n===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:zr([t,l.pathname])),hs(l)}function C0(n,e={}){let t=H.useContext(Df);Ke(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=G_("useViewTransitionState"),o=Sl(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Tr(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=Tr(t.nextLocation.pathname,i)||t.nextLocation.pathname;return pc(o.pathname,c)!=null||pc(o.pathname,l)!=null}new TextEncoder;var P0=N_();/**
 * react-router v7.1.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function k0(n){return H.createElement(BI,{flushSync:P0.flushSync,...n})}var dy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},x0=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],h=n[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},Y_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,h=c?n[o+1]:0,p=o+2<n.length,y=p?n[o+2]:0,v=l>>2,T=(l&3)<<4|h>>4;let I=(h&15)<<2|y>>6,C=y&63;p||(C=64,c||(I=64)),i.push(t[v],t[T],t[I],t[C])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Q_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):x0(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],h=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const T=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||h==null||y==null||T==null)throw new N0;const I=l<<2|h>>4;if(i.push(I),y!==64){const C=h<<4&240|y>>2;if(i.push(C),T!==64){const b=y<<6&192|T;i.push(b)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class N0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const D0=function(n){const e=Q_(n);return Y_.encodeByteArray(e,!0)},gc=function(n){return D0(n).replace(/\./g,"")},X_=function(n){try{return Y_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0=()=>b0().__FIREBASE_DEFAULTS__,O0=()=>{if(typeof process>"u"||typeof dy>"u")return;const n=dy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},V0=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&X_(n[1]);return e&&JSON.parse(e)},Vc=()=>{try{return L0()||O0()||V0()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},J_=n=>{var e,t;return(t=(e=Vc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},M0=n=>{const e=J_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Z_=()=>{var n;return(n=Vc())===null||n===void 0?void 0:n.config},ev=n=>{var e;return(e=Vc())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[gc(JSON.stringify(t)),gc(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function j0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function z0(){var n;const e=(n=Vc())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function B0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $0(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function H0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function q0(){const n=pn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function W0(){return!z0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function K0(){try{return typeof indexedDB=="object"}catch{return!1}}function G0(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="FirebaseError";class Ti extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Q0,Object.setPrototypeOf(this,Ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rl.prototype.create)}}class Rl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?Y0(l,i):"Error",h=`${this.serviceName}: ${c} (${o}).`;return new Ti(o,h,i)}}function Y0(n,e){return n.replace(X0,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const X0=/\{\$([^}]+)}/g;function J0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function yc(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=n[o],c=e[o];if(hy(l)&&hy(c)){if(!yc(l,c))return!1}else if(l!==c)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function hy(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Za(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function el(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Z0(n,e){const t=new eS(n,e);return t.subscribe.bind(t)}class eS{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");tS(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=jh),o.error===void 0&&(o.error=jh),o.complete===void 0&&(o.complete=jh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tS(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function jh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(n){return n&&n._delegate?n._delegate:n}class Zs{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new F0;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iS(e))try{this.getOrInitializeService({instanceIdentifier:Ks})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Ks){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ks){return this.instances.has(e)}getOptions(e=Ks){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);i===h&&c.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&e(c,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:rS(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ks){return this.component?this.component.multipleInstances?e:Ks:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rS(n){return n===Ks?void 0:n}function iS(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new nS(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Be||(Be={}));const oS={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},aS=Be.INFO,lS={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},uS=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=lS[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ff{constructor(e){this.name=e,this._logLevel=aS,this._logHandler=uS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const cS=(n,e)=>e.some(t=>n instanceof t);let fy,py;function dS(){return fy||(fy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hS(){return py||(py=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tv=new WeakMap,ef=new WeakMap,nv=new WeakMap,zh=new WeakMap,Uf=new WeakMap;function fS(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(as(n.result)),o()},c=()=>{i(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&tv.set(t,n)}).catch(()=>{}),Uf.set(e,n),e}function pS(n){if(ef.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});ef.set(n,e)}let tf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ef.get(n);if(e==="objectStoreNames")return n.objectStoreNames||nv.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return as(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function mS(n){tf=n(tf)}function gS(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Bh(this),e,...t);return nv.set(i,e.sort?e.sort():[e]),as(i)}:hS().includes(n)?function(...e){return n.apply(Bh(this),e),as(tv.get(this))}:function(...e){return as(n.apply(Bh(this),e))}}function yS(n){return typeof n=="function"?gS(n):(n instanceof IDBTransaction&&pS(n),cS(n,dS())?new Proxy(n,tf):n)}function as(n){if(n instanceof IDBRequest)return fS(n);if(zh.has(n))return zh.get(n);const e=yS(n);return e!==n&&(zh.set(n,e),Uf.set(e,n)),e}const Bh=n=>Uf.get(n);function _S(n,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),h=as(c);return i&&c.addEventListener("upgradeneeded",p=>{i(as(c.result),p.oldVersion,p.newVersion,as(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),h}const vS=["get","getKey","getAll","getAllKeys","count"],wS=["put","add","delete","clear"],$h=new Map;function my(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if($h.get(e))return $h.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=wS.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||vS.includes(t)))return;const l=async function(c,...h){const p=this.transaction(c,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(h.shift())),(await Promise.all([y[t](...h),o&&p.done]))[0]};return $h.set(e,l),l}mS(n=>({...n,get:(e,t,i)=>my(e,t)||n.get(e,t,i),has:(e,t)=>!!my(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(TS(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function TS(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const nf="@firebase/app",gy="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i=new Ff("@firebase/app"),IS="@firebase/app-compat",SS="@firebase/analytics-compat",RS="@firebase/analytics",AS="@firebase/app-check-compat",CS="@firebase/app-check",PS="@firebase/auth",kS="@firebase/auth-compat",xS="@firebase/database",NS="@firebase/data-connect",DS="@firebase/database-compat",bS="@firebase/functions",LS="@firebase/functions-compat",OS="@firebase/installations",VS="@firebase/installations-compat",MS="@firebase/messaging",FS="@firebase/messaging-compat",US="@firebase/performance",jS="@firebase/performance-compat",zS="@firebase/remote-config",BS="@firebase/remote-config-compat",$S="@firebase/storage",HS="@firebase/storage-compat",qS="@firebase/firestore",WS="@firebase/vertexai",KS="@firebase/firestore-compat",GS="firebase",QS="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf="[DEFAULT]",YS={[nf]:"fire-core",[IS]:"fire-core-compat",[RS]:"fire-analytics",[SS]:"fire-analytics-compat",[CS]:"fire-app-check",[AS]:"fire-app-check-compat",[PS]:"fire-auth",[kS]:"fire-auth-compat",[xS]:"fire-rtdb",[NS]:"fire-data-connect",[DS]:"fire-rtdb-compat",[bS]:"fire-fn",[LS]:"fire-fn-compat",[OS]:"fire-iid",[VS]:"fire-iid-compat",[MS]:"fire-fcm",[FS]:"fire-fcm-compat",[US]:"fire-perf",[jS]:"fire-perf-compat",[zS]:"fire-rc",[BS]:"fire-rc-compat",[$S]:"fire-gcs",[HS]:"fire-gcs-compat",[qS]:"fire-fst",[KS]:"fire-fst-compat",[WS]:"fire-vertex","fire-js":"fire-js",[GS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=new Map,XS=new Map,sf=new Map;function yy(n,e){try{n.container.addComponent(e)}catch(t){_i.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ta(n){const e=n.name;if(sf.has(e))return _i.debug(`There were multiple attempts to register component ${e}.`),!1;sf.set(e,n);for(const t of _c.values())yy(t,n);for(const t of XS.values())yy(t,n);return!0}function jf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function jr(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ls=new Rl("app","Firebase",JS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Zs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ls.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=QS;function rv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:rf,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw ls.create("bad-app-name",{appName:String(o)});if(t||(t=Z_()),!t)throw ls.create("no-options");const l=_c.get(o);if(l){if(yc(t,l.options)&&yc(i,l.config))return l;throw ls.create("duplicate-app",{appName:o})}const c=new sS(o);for(const p of sf.values())c.addComponent(p);const h=new ZS(t,i,c);return _c.set(o,h),h}function iv(n=rf){const e=_c.get(n);if(!e&&n===rf&&Z_())return rv();if(!e)throw ls.create("no-app",{appName:n});return e}function us(n,e,t){var i;let o=(i=YS[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const l=o.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const h=[`Unable to register library "${o}" with version "${e}":`];l&&h.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_i.warn(h.join(" "));return}ta(new Zs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR="firebase-heartbeat-database",tR=1,dl="firebase-heartbeat-store";let Hh=null;function sv(){return Hh||(Hh=_S(eR,tR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(dl)}catch(t){console.warn(t)}}}}).catch(n=>{throw ls.create("idb-open",{originalErrorMessage:n.message})})),Hh}async function nR(n){try{const t=(await sv()).transaction(dl),i=await t.objectStore(dl).get(ov(n));return await t.done,i}catch(e){if(e instanceof Ti)_i.warn(e.message);else{const t=ls.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_i.warn(t.message)}}}async function _y(n,e){try{const i=(await sv()).transaction(dl,"readwrite");await i.objectStore(dl).put(e,ov(n)),await i.done}catch(t){if(t instanceof Ti)_i.warn(t.message);else{const i=ls.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});_i.warn(i.message)}}}function ov(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=1024,iR=30*24*60*60*1e3;class sR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new aR(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=vy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const h=new Date(c.date).valueOf();return Date.now()-h<=iR}),this._storage.overwrite(this._heartbeatsCache))}catch(i){_i.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=vy(),{heartbeatsToSend:i,unsentEntries:o}=oR(this._heartbeatsCache.heartbeats),l=gc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return _i.warn(t),""}}}function vy(){return new Date().toISOString().substring(0,10)}function oR(n,e=rR){const t=[];let i=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),wy(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),wy(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class aR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return K0()?G0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await nR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return _y(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return _y(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function wy(n){return gc(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(n){ta(new Zs("platform-logger",e=>new ES(e),"PRIVATE")),ta(new Zs("heartbeat",e=>new sR(e),"PRIVATE")),us(nf,gy,n),us(nf,gy,"esm2017"),us("fire-js","")}lR("");function zf(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function av(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uR=av,lv=new Rl("auth","Firebase",av());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc=new Ff("@firebase/auth");function cR(n,...e){vc.logLevel<=Be.WARN&&vc.warn(`Auth (${ua}): ${n}`,...e)}function rc(n,...e){vc.logLevel<=Be.ERROR&&vc.error(`Auth (${ua}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(n,...e){throw Bf(n,...e)}function Br(n,...e){return Bf(n,...e)}function uv(n,e,t){const i=Object.assign(Object.assign({},uR()),{[e]:t});return new Rl("auth","Firebase",i).create(e,{appName:n.name})}function yi(n){return uv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bf(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return lv.create(n,...e)}function Ne(n,e,...t){if(!n)throw Bf(e,...t)}function pi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw rc(e),new Error(e)}function vi(n,e){n||pi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function dR(){return Ey()==="http:"||Ey()==="https:"}function Ey(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dR()||$0()||"connection"in navigator)?navigator.onLine:!0}function fR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,t){this.shortDelay=e,this.longDelay=t,vi(t>e,"Short delay should be less than long delay!"),this.isMobile=j0()||H0()}get(){return hR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(n,e){vi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=new Cl(3e4,6e4);function vs(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ws(n,e,t,i,o={}){return dv(n,o,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const h=Al(Object.assign({key:n.config.apiKey},c)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const y=Object.assign({method:e,headers:p},l);return B0()||(y.referrerPolicy="no-referrer"),cv.fetch()(hv(n,n.config.apiHost,t,h),y)})}async function dv(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},pR),e);try{const o=new yR(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Ku(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const h=l.ok?c.errorMessage:c.error.message,[p,y]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ku(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Ku(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw Ku(n,"user-disabled",c);const v=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw uv(n,v,y);Ir(n,v)}}catch(o){if(o instanceof Ti)throw o;Ir(n,"network-request-failed",{message:String(o)})}}async function Pl(n,e,t,i,o={}){const l=await ws(n,e,t,i,o);return"mfaPendingCredential"in l&&Ir(n,"multi-factor-auth-required",{_serverResponse:l}),l}function hv(n,e,t,i){const o=`${e}${t}?${i}`;return n.config.emulator?$f(n.config,o):`${n.config.apiScheme}://${o}`}function gR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class yR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Br(this.auth,"network-request-failed")),mR.get())})}}function Ku(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Br(n,e,i);return o.customData._tokenResponse=t,o}function Ty(n){return n!==void 0&&n.enterprise!==void 0}class _R{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return gR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function vR(n,e){return ws(n,"GET","/v2/recaptchaConfig",vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wR(n,e){return ws(n,"POST","/v1/accounts:delete",e)}async function fv(n,e){return ws(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ER(n,e=!1){const t=Ut(n),i=await t.getIdToken(e),o=Hf(i);Ne(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:sl(qh(o.auth_time)),issuedAtTime:sl(qh(o.iat)),expirationTime:sl(qh(o.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function qh(n){return Number(n)*1e3}function Hf(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return rc("JWT malformed, contained fewer than 3 sections"),null;try{const o=X_(t);return o?JSON.parse(o):(rc("Failed to decode base64 JWT payload"),null)}catch(o){return rc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Iy(n){const e=Hf(n);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ti&&TR(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function TR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=sl(this.lastLoginAt),this.creationTime=sl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wc(n){var e;const t=n.auth,i=await n.getIdToken(),o=await hl(n,fv(t,{idToken:i}));Ne(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];n._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?pv(l.providerUserInfo):[],h=RR(n.providerData,c),p=n.isAnonymous,y=!(n.email&&l.passwordHash)&&!(h!=null&&h.length),v=p?y:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new af(l.createdAt,l.lastLoginAt),isAnonymous:v};Object.assign(n,T)}async function SR(n){const e=Ut(n);await wc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function RR(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function pv(n){return n.map(e=>{var{providerId:t}=e,i=zf(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AR(n,e){const t=await dv(n,{},async()=>{const i=Al({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,c=hv(n,o,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",cv.fetch()(c,{method:"POST",headers:h,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function CR(n,e){return ws(n,"POST","/v2/accounts:revokeToken",vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Iy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const t=Iy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await AR(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,c=new Xo;return i&&(Ne(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),o&&(Ne(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(Ne(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xo,this.toJSON())}_performRefresh(){return pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(n,e){Ne(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class mi{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=zf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new IR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new af(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await hl(this,this.stsTokenManager.getToken(this.auth,e));return Ne(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return ER(this,e)}reload(){return SR(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new mi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await wc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jr(this.auth.app))return Promise.reject(yi(this.auth));const e=await this.getIdToken();return await hl(this,wR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,c,h,p,y,v;const T=(i=t.displayName)!==null&&i!==void 0?i:void 0,I=(o=t.email)!==null&&o!==void 0?o:void 0,C=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,b=(c=t.photoURL)!==null&&c!==void 0?c:void 0,B=(h=t.tenantId)!==null&&h!==void 0?h:void 0,F=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,W=(y=t.createdAt)!==null&&y!==void 0?y:void 0,Y=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:J,emailVerified:oe,isAnonymous:V,providerData:de,stsTokenManager:x}=t;Ne(J&&x,e,"internal-error");const S=Xo.fromJSON(this.name,x);Ne(typeof J=="string",e,"internal-error"),Zi(T,e.name),Zi(I,e.name),Ne(typeof oe=="boolean",e,"internal-error"),Ne(typeof V=="boolean",e,"internal-error"),Zi(C,e.name),Zi(b,e.name),Zi(B,e.name),Zi(F,e.name),Zi(W,e.name),Zi(Y,e.name);const R=new mi({uid:J,auth:e,email:I,emailVerified:oe,displayName:T,isAnonymous:V,photoURL:b,phoneNumber:C,tenantId:B,stsTokenManager:S,createdAt:W,lastLoginAt:Y});return de&&Array.isArray(de)&&(R.providerData=de.map(k=>Object.assign({},k))),F&&(R._redirectEventId=F),R}static async _fromIdTokenResponse(e,t,i=!1){const o=new Xo;o.updateFromServerResponse(t);const l=new mi({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await wc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ne(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?pv(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),h=new Xo;h.updateFromIdToken(i);const p=new mi({uid:o.localId,auth:e,stsTokenManager:h,isAnonymous:c}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new af(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy=new Map;function gi(n){vi(n instanceof Function,"Expected a class definition");let e=Sy.get(n);return e?(vi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Sy.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}mv.type="NONE";const Ry=mv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(n,e,t){return`firebase:${n}:${e}:${t}`}class Jo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=ic(this.userKey,o.apiKey,l),this.fullPersistenceKey=ic("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?mi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Jo(gi(Ry),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||gi(Ry);const c=ic(i,e.config.apiKey,e.name);let h=null;for(const y of t)try{const v=await y._get(c);if(v){const T=mi._fromJSON(e,v);y!==l&&(h=T),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Jo(l,e,i):(l=p[0],h&&await l._set(c,h.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(c)}catch{}})),new Jo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ay(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ev(e))return"Blackberry";if(Tv(e))return"Webos";if(yv(e))return"Safari";if((e.includes("chrome/")||_v(e))&&!e.includes("edge/"))return"Chrome";if(wv(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function gv(n=pn()){return/firefox\//i.test(n)}function yv(n=pn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _v(n=pn()){return/crios\//i.test(n)}function vv(n=pn()){return/iemobile/i.test(n)}function wv(n=pn()){return/android/i.test(n)}function Ev(n=pn()){return/blackberry/i.test(n)}function Tv(n=pn()){return/webos/i.test(n)}function qf(n=pn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function PR(n=pn()){var e;return qf(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function kR(){return q0()&&document.documentMode===10}function Iv(n=pn()){return qf(n)||wv(n)||Tv(n)||Ev(n)||/windows phone/i.test(n)||vv(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(n,e=[]){let t;switch(n){case"Browser":t=Ay(pn());break;case"Worker":t=`${Ay(pn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ua}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,h)=>{try{const p=e(l);c(p)}catch(p){h(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NR(n,e={}){return ws(n,"GET","/v2/passwordPolicy",vs(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=6;class bR{constructor(e){var t,i,o,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:DR,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,c,h;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(h=p.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cy(this),this.idTokenSubscription=new Cy(this),this.beforeStateQueue=new xR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=gi(t)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await Jo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await fv(this,{idToken:e}),i=await mi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(jr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===h)&&(p!=null&&p.user)&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await wc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jr(this.app))return Promise.reject(yi(this));const t=e?Ut(e):null;return t&&Ne(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jr(this.app)?Promise.reject(yi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jr(this.app)?Promise.reject(yi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await NR(this),t=new bR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Rl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await CR(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&gi(e)||this._popupRedirectResolver;Ne(t,this,"argument-error"),this.redirectPersistenceManager=await Jo.create(this,[gi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(h,this,"internal-error"),h.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Sv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&cR(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function oo(n){return Ut(n)}class Cy{constructor(e){this.auth=e,this.observer=null,this.addObserver=Z0(t=>this.observer=t)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OR(n){Mc=n}function Rv(n){return Mc.loadJS(n)}function VR(){return Mc.recaptchaEnterpriseScript}function MR(){return Mc.gapiScript}function FR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class UR{constructor(){this.enterprise=new jR}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class jR{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const zR="recaptcha-enterprise",Av="NO_RECAPTCHA";class BR{constructor(e){this.type=zR,this.auth=oo(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,h)=>{vR(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const y=new _R(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,c(y.siteKey)}}).catch(p=>{h(p)})})}function o(l,c,h){const p=window.grecaptcha;Ty(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{c(y)}).catch(()=>{c(Av)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new UR().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(h=>{if(!t&&Ty(window.grecaptcha))o(h,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=VR();p.length!==0&&(p+=h),Rv(p).then(()=>{o(h,l,c)}).catch(y=>{c(y)})}}).catch(h=>{c(h)})})}}async function Py(n,e,t,i=!1,o=!1){const l=new BR(n);let c;if(o)c=Av;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const h=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const p=h.phoneEnrollmentInfo.phoneNumber,y=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const p=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function lf(n,e,t,i,o){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Py(n,e,t,t==="getOobCode");return i(n,c)}else return i(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Py(n,e,t,t==="getOobCode");return i(n,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(n,e){const t=jf(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(yc(l,e??{}))return o;Ir(o,"already-initialized")}return t.initialize({options:e})}function HR(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(gi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function qR(n,e,t){const i=oo(n);Ne(i._canInitEmulator,i,"emulator-config-failed"),Ne(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=Cv(e),{host:c,port:h}=WR(e),p=h===null?"":`:${h}`;i.config.emulator={url:`${l}//${c}${p}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:c,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})}),KR()}function Cv(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function WR(n){const e=Cv(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:ky(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:ky(c)}}}function ky(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function KR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return pi("not implemented")}_getIdTokenResponse(e){return pi("not implemented")}_linkToIdToken(e,t){return pi("not implemented")}_getReauthenticationResolver(e){return pi("not implemented")}}async function GR(n,e){return ws(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QR(n,e){return Pl(n,"POST","/v1/accounts:signInWithPassword",vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YR(n,e){return Pl(n,"POST","/v1/accounts:signInWithEmailLink",vs(n,e))}async function XR(n,e){return Pl(n,"POST","/v1/accounts:signInWithEmailLink",vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl extends Wf{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new fl(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new fl(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lf(e,t,"signInWithPassword",QR);case"emailLink":return YR(e,{email:this._email,oobCode:this._password});default:Ir(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lf(e,i,"signUpPassword",GR);case"emailLink":return XR(e,{idToken:t,email:this._email,oobCode:this._password});default:Ir(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zo(n,e){return Pl(n,"POST","/v1/accounts:signInWithIdp",vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR="http://localhost";class eo extends Wf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new eo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ir("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=zf(t,["providerId","signInMethod"]);if(!i||!o)return null;const c=new eo(i,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Zo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Zo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Zo(e,t)}buildRequest(){const e={requestUri:JR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Al(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function eA(n){const e=Za(el(n)).link,t=e?Za(el(e)).deep_link_id:null,i=Za(el(n)).deep_link_id;return(i?Za(el(i)).link:null)||i||t||e||n}class Kf{constructor(e){var t,i,o,l,c,h;const p=Za(el(e)),y=(t=p.apiKey)!==null&&t!==void 0?t:null,v=(i=p.oobCode)!==null&&i!==void 0?i:null,T=ZR((o=p.mode)!==null&&o!==void 0?o:null);Ne(y&&v&&T,"argument-error"),this.apiKey=y,this.operation=T,this.code=v,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=p.languageCode)!==null&&c!==void 0?c:null,this.tenantId=(h=p.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=eA(e);try{return new Kf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(){this.providerId=ca.PROVIDER_ID}static credential(e,t){return fl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Kf.parseLink(t);return Ne(i,"argument-error"),fl._fromEmailAndCode(e,i.code,i.tenantId)}}ca.PROVIDER_ID="password";ca.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ca.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl extends Pv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends kl{constructor(){super("facebook.com")}static credential(e){return eo._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ns.credential(e.oauthAccessToken)}catch{return null}}}ns.FACEBOOK_SIGN_IN_METHOD="facebook.com";ns.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends kl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return eo._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return rs.credential(t,i)}catch{return null}}}rs.GOOGLE_SIGN_IN_METHOD="google.com";rs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends kl{constructor(){super("github.com")}static credential(e){return eo._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return is.credential(e.oauthAccessToken)}catch{return null}}}is.GITHUB_SIGN_IN_METHOD="github.com";is.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends kl{constructor(){super("twitter.com")}static credential(e,t){return eo._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ss.credential(t,i)}catch{return null}}}ss.TWITTER_SIGN_IN_METHOD="twitter.com";ss.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tA(n,e){return Pl(n,"POST","/v1/accounts:signUp",vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await mi._fromIdTokenResponse(e,i,o),c=xy(i);return new to({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=xy(i);return new to({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function xy(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec extends Ti{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Ec.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Ec(e,t,i,o)}}function kv(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Ec._fromErrorAndOperation(n,l,e,i):l})}async function nA(n,e,t=!1){const i=await hl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return to._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rA(n,e,t=!1){const{auth:i}=n;if(jr(i.app))return Promise.reject(yi(i));const o="reauthenticate";try{const l=await hl(n,kv(i,o,e,n),t);Ne(l.idToken,i,"internal-error");const c=Hf(l.idToken);Ne(c,i,"internal-error");const{sub:h}=c;return Ne(n.uid===h,i,"user-mismatch"),to._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Ir(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xv(n,e,t=!1){if(jr(n.app))return Promise.reject(yi(n));const i="signIn",o=await kv(n,i,e),l=await to._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(l.user),l}async function iA(n,e){return xv(oo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nv(n){const e=oo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function sA(n,e,t){if(jr(n.app))return Promise.reject(yi(n));const i=oo(n),c=await lf(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tA).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&Nv(n),p}),h=await to._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(h.user),h}function oA(n,e,t){return jr(n.app)?Promise.reject(yi(n)):iA(Ut(n),ca.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Nv(n),i})}function aA(n,e,t,i){return Ut(n).onIdTokenChanged(e,t,i)}function lA(n,e,t){return Ut(n).beforeAuthStateChanged(e,t)}function uA(n,e,t,i){return Ut(n).onAuthStateChanged(e,t,i)}function cA(n){return Ut(n).signOut()}const Tc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Tc,"1"),this.storage.removeItem(Tc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=1e3,hA=10;class bv extends Dv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Iv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,p)=>{this.notifyListeners(c,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);kR()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,hA):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},dA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}bv.type="LOCAL";const fA=bv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv extends Dv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Lv.type="SESSION";const Ov=Lv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Fc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const h=Array.from(c).map(async y=>y(t.origin,l)),p=await pA(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((h,p)=>{const y=Gf("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:o,onMessage(T){const I=T;if(I.data.eventId===y)switch(I.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(I.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(){return window}function gA(n){$r().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(){return typeof $r().WorkerGlobalScope<"u"&&typeof $r().importScripts=="function"}async function yA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _A(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function vA(){return Vv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv="firebaseLocalStorageDb",wA=1,Ic="firebaseLocalStorage",Fv="fbase_key";class xl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Uc(n,e){return n.transaction([Ic],e?"readwrite":"readonly").objectStore(Ic)}function EA(){const n=indexedDB.deleteDatabase(Mv);return new xl(n).toPromise()}function uf(){const n=indexedDB.open(Mv,wA);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Ic,{keyPath:Fv})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Ic)?e(i):(i.close(),await EA(),e(await uf()))})})}async function Ny(n,e,t){const i=Uc(n,!0).put({[Fv]:e,value:t});return new xl(i).toPromise()}async function TA(n,e){const t=Uc(n,!1).get(e),i=await new xl(t).toPromise();return i===void 0?null:i.value}function Dy(n,e){const t=Uc(n,!0).delete(e);return new xl(t).toPromise()}const IA=800,SA=3;class Uv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await uf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>SA)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Vv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fc._getInstance(vA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await yA(),!this.activeServiceWorker)return;this.sender=new mA(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_A()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await uf();return await Ny(e,Tc,"1"),await Dy(e,Tc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Ny(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>TA(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Dy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Uc(o,!1).getAll();return new xl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),IA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Uv.type="LOCAL";const RA=Uv;new Cl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(n,e){return e?gi(e):(Ne(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf extends Wf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Zo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Zo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function CA(n){return xv(n.auth,new Qf(n),n.bypassAuthState)}function PA(n){const{auth:e,user:t}=n;return Ne(t,e,"internal-error"),rA(t,new Qf(n),n.bypassAuthState)}async function kA(n){const{auth:e,user:t}=n;return Ne(t,e,"internal-error"),nA(t,new Qf(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:c,type:h}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return CA;case"linkViaPopup":case"linkViaRedirect":return kA;case"reauthViaPopup":case"reauthViaRedirect":return PA;default:Ir(this.auth,"internal-error")}}resolve(e){vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA=new Cl(2e3,1e4);class Yo extends jv{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,Yo.currentPopupAction&&Yo.currentPopupAction.cancel(),Yo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){vi(this.filter.length===1,"Popup operations only handle one event");const e=Gf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Br(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Br(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Br(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xA.get())};e()}}Yo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA="pendingRedirect",sc=new Map;class DA extends jv{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=sc.get(this.auth._key());if(!e){try{const i=await bA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}sc.set(this.auth._key(),e)}return this.bypassAuthState||sc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bA(n,e){const t=VA(e),i=OA(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function LA(n,e){sc.set(n._key(),e)}function OA(n){return gi(n._redirectPersistence)}function VA(n){return ic(NA,n.config.apiKey,n.name)}async function MA(n,e,t=!1){if(jr(n.app))return Promise.reject(yi(n));const i=oo(n),o=AA(i,e),c=await new DA(i,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=10*60*1e3;class UA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jA(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!zv(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Br(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=FA&&this.cachedEventUids.clear(),this.cachedEventUids.has(by(e))}saveEventToCache(e){this.cachedEventUids.add(by(e)),this.lastProcessedEventTime=Date.now()}}function by(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function zv({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jA(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zv(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zA(n,e={}){return ws(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$A=/^https?/;async function HA(n){if(n.config.emulator)return;const{authorizedDomains:e}=await zA(n);for(const t of e)try{if(qA(t))return}catch{}Ir(n,"unauthorized-domain")}function qA(n){const e=of(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!$A.test(t))return!1;if(BA.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=new Cl(3e4,6e4);function Ly(){const n=$r().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function KA(n){return new Promise((e,t)=>{var i,o,l;function c(){Ly(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ly(),t(Br(n,"network-request-failed"))},timeout:WA.get()})}if(!((o=(i=$r().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=$r().gapi)===null||l===void 0)&&l.load)c();else{const h=FR("iframefcb");return $r()[h]=()=>{gapi.load?c():t(Br(n,"network-request-failed"))},Rv(`${MR()}?onload=${h}`).catch(p=>t(p))}}).catch(e=>{throw oc=null,e})}let oc=null;function GA(n){return oc=oc||KA(n),oc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=new Cl(5e3,15e3),YA="__/auth/iframe",XA="emulator/auth/iframe",JA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eC(n){const e=n.config;Ne(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?$f(e,XA):`https://${n.config.authDomain}/${YA}`,i={apiKey:e.apiKey,appName:n.name,v:ua},o=ZA.get(n.config.apiHost);o&&(i.eid=o);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Al(i).slice(1)}`}async function tC(n){const e=await GA(n),t=$r().gapi;return Ne(t,n,"internal-error"),e.open({where:document.body,url:eC(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JA,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const c=Br(n,"network-request-failed"),h=$r().setTimeout(()=>{l(c)},QA.get());function p(){$r().clearTimeout(h),o(i)}i.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rC=500,iC=600,sC="_blank",oC="http://localhost";class Oy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aC(n,e,t,i=rC,o=iC){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const p=Object.assign(Object.assign({},nC),{width:i.toString(),height:o.toString(),top:l,left:c}),y=pn().toLowerCase();t&&(h=_v(y)?sC:t),gv(y)&&(e=e||oC,p.scrollbars="yes");const v=Object.entries(p).reduce((I,[C,b])=>`${I}${C}=${b},`,"");if(PR(y)&&h!=="_self")return lC(e||"",h),new Oy(null);const T=window.open(e||"",h,v);Ne(T,n,"popup-blocked");try{T.focus()}catch{}return new Oy(T)}function lC(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC="__/auth/handler",cC="emulator/auth/handler",dC=encodeURIComponent("fac");async function Vy(n,e,t,i,o,l){Ne(n.config.authDomain,n,"auth-domain-config-required"),Ne(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:ua,eventId:o};if(e instanceof Pv){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",J0(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,T]of Object.entries({}))c[v]=T}if(e instanceof kl){const v=e.getScopes().filter(T=>T!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const p=await n._getAppCheckToken(),y=p?`#${dC}=${encodeURIComponent(p)}`:"";return`${hC(n)}?${Al(h).slice(1)}${y}`}function hC({config:n}){return n.emulator?$f(n,cC):`https://${n.authDomain}/${uC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh="webStorageSupport";class fC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ov,this._completeRedirectFn=MA,this._overrideRedirectResult=LA}async _openPopup(e,t,i,o){var l;vi((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await Vy(e,t,i,of(),o);return aC(e,c,Gf())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await Vy(e,t,i,of(),o);return gA(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(vi(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await tC(e),i=new UA(e);return t.register("authEvent",o=>(Ne(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Wh,{type:Wh},o=>{var l;const c=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Wh];c!==void 0&&t(!!c),Ir(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=HA(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Iv()||yv()||qf()}}const pC=fC;var My="@firebase/auth",Fy="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yC(n){ta(new Zs("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=i.options;Ne(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sv(n)},y=new LR(i,o,l,p);return HR(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ta(new Zs("auth-internal",e=>{const t=oo(e.getProvider("auth").getImmediate());return(i=>new mC(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),us(My,Fy,gC(n)),us(My,Fy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=5*60,vC=ev("authIdTokenMaxAge")||_C;let Uy=null;const wC=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>vC)return;const o=t==null?void 0:t.token;Uy!==o&&(Uy=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function EC(n=iv()){const e=jf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=$R(n,{popupRedirectResolver:pC,persistence:[RA,fA,Ov]}),i=ev("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=wC(l.toString());lA(t,c,()=>c(t.currentUser)),aA(t,h=>c(h))}}const o=J_("auth");return o&&qR(t,`http://${o}`),t}function TC(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}OR({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const l=Br("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",TC().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yC("Browser");var IC="firebase",SC="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */us(IC,SC,"app");var jy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xs,Bv;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,S){function R(){}R.prototype=S.prototype,x.D=S.prototype,x.prototype=new R,x.prototype.constructor=x,x.C=function(k,L,j){for(var P=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)P[dt-2]=arguments[dt];return S.prototype[L].apply(k,P)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,S,R){R||(R=0);var k=Array(16);if(typeof S=="string")for(var L=0;16>L;++L)k[L]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(L=0;16>L;++L)k[L]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=x.g[0],R=x.g[1],L=x.g[2];var j=x.g[3],P=S+(j^R&(L^j))+k[0]+3614090360&4294967295;S=R+(P<<7&4294967295|P>>>25),P=j+(L^S&(R^L))+k[1]+3905402710&4294967295,j=S+(P<<12&4294967295|P>>>20),P=L+(R^j&(S^R))+k[2]+606105819&4294967295,L=j+(P<<17&4294967295|P>>>15),P=R+(S^L&(j^S))+k[3]+3250441966&4294967295,R=L+(P<<22&4294967295|P>>>10),P=S+(j^R&(L^j))+k[4]+4118548399&4294967295,S=R+(P<<7&4294967295|P>>>25),P=j+(L^S&(R^L))+k[5]+1200080426&4294967295,j=S+(P<<12&4294967295|P>>>20),P=L+(R^j&(S^R))+k[6]+2821735955&4294967295,L=j+(P<<17&4294967295|P>>>15),P=R+(S^L&(j^S))+k[7]+4249261313&4294967295,R=L+(P<<22&4294967295|P>>>10),P=S+(j^R&(L^j))+k[8]+1770035416&4294967295,S=R+(P<<7&4294967295|P>>>25),P=j+(L^S&(R^L))+k[9]+2336552879&4294967295,j=S+(P<<12&4294967295|P>>>20),P=L+(R^j&(S^R))+k[10]+4294925233&4294967295,L=j+(P<<17&4294967295|P>>>15),P=R+(S^L&(j^S))+k[11]+2304563134&4294967295,R=L+(P<<22&4294967295|P>>>10),P=S+(j^R&(L^j))+k[12]+1804603682&4294967295,S=R+(P<<7&4294967295|P>>>25),P=j+(L^S&(R^L))+k[13]+4254626195&4294967295,j=S+(P<<12&4294967295|P>>>20),P=L+(R^j&(S^R))+k[14]+2792965006&4294967295,L=j+(P<<17&4294967295|P>>>15),P=R+(S^L&(j^S))+k[15]+1236535329&4294967295,R=L+(P<<22&4294967295|P>>>10),P=S+(L^j&(R^L))+k[1]+4129170786&4294967295,S=R+(P<<5&4294967295|P>>>27),P=j+(R^L&(S^R))+k[6]+3225465664&4294967295,j=S+(P<<9&4294967295|P>>>23),P=L+(S^R&(j^S))+k[11]+643717713&4294967295,L=j+(P<<14&4294967295|P>>>18),P=R+(j^S&(L^j))+k[0]+3921069994&4294967295,R=L+(P<<20&4294967295|P>>>12),P=S+(L^j&(R^L))+k[5]+3593408605&4294967295,S=R+(P<<5&4294967295|P>>>27),P=j+(R^L&(S^R))+k[10]+38016083&4294967295,j=S+(P<<9&4294967295|P>>>23),P=L+(S^R&(j^S))+k[15]+3634488961&4294967295,L=j+(P<<14&4294967295|P>>>18),P=R+(j^S&(L^j))+k[4]+3889429448&4294967295,R=L+(P<<20&4294967295|P>>>12),P=S+(L^j&(R^L))+k[9]+568446438&4294967295,S=R+(P<<5&4294967295|P>>>27),P=j+(R^L&(S^R))+k[14]+3275163606&4294967295,j=S+(P<<9&4294967295|P>>>23),P=L+(S^R&(j^S))+k[3]+4107603335&4294967295,L=j+(P<<14&4294967295|P>>>18),P=R+(j^S&(L^j))+k[8]+1163531501&4294967295,R=L+(P<<20&4294967295|P>>>12),P=S+(L^j&(R^L))+k[13]+2850285829&4294967295,S=R+(P<<5&4294967295|P>>>27),P=j+(R^L&(S^R))+k[2]+4243563512&4294967295,j=S+(P<<9&4294967295|P>>>23),P=L+(S^R&(j^S))+k[7]+1735328473&4294967295,L=j+(P<<14&4294967295|P>>>18),P=R+(j^S&(L^j))+k[12]+2368359562&4294967295,R=L+(P<<20&4294967295|P>>>12),P=S+(R^L^j)+k[5]+4294588738&4294967295,S=R+(P<<4&4294967295|P>>>28),P=j+(S^R^L)+k[8]+2272392833&4294967295,j=S+(P<<11&4294967295|P>>>21),P=L+(j^S^R)+k[11]+1839030562&4294967295,L=j+(P<<16&4294967295|P>>>16),P=R+(L^j^S)+k[14]+4259657740&4294967295,R=L+(P<<23&4294967295|P>>>9),P=S+(R^L^j)+k[1]+2763975236&4294967295,S=R+(P<<4&4294967295|P>>>28),P=j+(S^R^L)+k[4]+1272893353&4294967295,j=S+(P<<11&4294967295|P>>>21),P=L+(j^S^R)+k[7]+4139469664&4294967295,L=j+(P<<16&4294967295|P>>>16),P=R+(L^j^S)+k[10]+3200236656&4294967295,R=L+(P<<23&4294967295|P>>>9),P=S+(R^L^j)+k[13]+681279174&4294967295,S=R+(P<<4&4294967295|P>>>28),P=j+(S^R^L)+k[0]+3936430074&4294967295,j=S+(P<<11&4294967295|P>>>21),P=L+(j^S^R)+k[3]+3572445317&4294967295,L=j+(P<<16&4294967295|P>>>16),P=R+(L^j^S)+k[6]+76029189&4294967295,R=L+(P<<23&4294967295|P>>>9),P=S+(R^L^j)+k[9]+3654602809&4294967295,S=R+(P<<4&4294967295|P>>>28),P=j+(S^R^L)+k[12]+3873151461&4294967295,j=S+(P<<11&4294967295|P>>>21),P=L+(j^S^R)+k[15]+530742520&4294967295,L=j+(P<<16&4294967295|P>>>16),P=R+(L^j^S)+k[2]+3299628645&4294967295,R=L+(P<<23&4294967295|P>>>9),P=S+(L^(R|~j))+k[0]+4096336452&4294967295,S=R+(P<<6&4294967295|P>>>26),P=j+(R^(S|~L))+k[7]+1126891415&4294967295,j=S+(P<<10&4294967295|P>>>22),P=L+(S^(j|~R))+k[14]+2878612391&4294967295,L=j+(P<<15&4294967295|P>>>17),P=R+(j^(L|~S))+k[5]+4237533241&4294967295,R=L+(P<<21&4294967295|P>>>11),P=S+(L^(R|~j))+k[12]+1700485571&4294967295,S=R+(P<<6&4294967295|P>>>26),P=j+(R^(S|~L))+k[3]+2399980690&4294967295,j=S+(P<<10&4294967295|P>>>22),P=L+(S^(j|~R))+k[10]+4293915773&4294967295,L=j+(P<<15&4294967295|P>>>17),P=R+(j^(L|~S))+k[1]+2240044497&4294967295,R=L+(P<<21&4294967295|P>>>11),P=S+(L^(R|~j))+k[8]+1873313359&4294967295,S=R+(P<<6&4294967295|P>>>26),P=j+(R^(S|~L))+k[15]+4264355552&4294967295,j=S+(P<<10&4294967295|P>>>22),P=L+(S^(j|~R))+k[6]+2734768916&4294967295,L=j+(P<<15&4294967295|P>>>17),P=R+(j^(L|~S))+k[13]+1309151649&4294967295,R=L+(P<<21&4294967295|P>>>11),P=S+(L^(R|~j))+k[4]+4149444226&4294967295,S=R+(P<<6&4294967295|P>>>26),P=j+(R^(S|~L))+k[11]+3174756917&4294967295,j=S+(P<<10&4294967295|P>>>22),P=L+(S^(j|~R))+k[2]+718787259&4294967295,L=j+(P<<15&4294967295|P>>>17),P=R+(j^(L|~S))+k[9]+3951481745&4294967295,x.g[0]=x.g[0]+S&4294967295,x.g[1]=x.g[1]+(L+(P<<21&4294967295|P>>>11))&4294967295,x.g[2]=x.g[2]+L&4294967295,x.g[3]=x.g[3]+j&4294967295}i.prototype.u=function(x,S){S===void 0&&(S=x.length);for(var R=S-this.blockSize,k=this.B,L=this.h,j=0;j<S;){if(L==0)for(;j<=R;)o(this,x,j),j+=this.blockSize;if(typeof x=="string"){for(;j<S;)if(k[L++]=x.charCodeAt(j++),L==this.blockSize){o(this,k),L=0;break}}else for(;j<S;)if(k[L++]=x[j++],L==this.blockSize){o(this,k),L=0;break}}this.h=L,this.o+=S},i.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var S=1;S<x.length-8;++S)x[S]=0;var R=8*this.o;for(S=x.length-8;S<x.length;++S)x[S]=R&255,R/=256;for(this.u(x),x=Array(16),S=R=0;4>S;++S)for(var k=0;32>k;k+=8)x[R++]=this.g[S]>>>k&255;return x};function l(x,S){var R=h;return Object.prototype.hasOwnProperty.call(R,x)?R[x]:R[x]=S(x)}function c(x,S){this.h=S;for(var R=[],k=!0,L=x.length-1;0<=L;L--){var j=x[L]|0;k&&j==S||(R[L]=j,k=!1)}this.g=R}var h={};function p(x){return-128<=x&&128>x?l(x,function(S){return new c([S|0],0>S?-1:0)}):new c([x|0],0>x?-1:0)}function y(x){if(isNaN(x)||!isFinite(x))return T;if(0>x)return F(y(-x));for(var S=[],R=1,k=0;x>=R;k++)S[k]=x/R|0,R*=4294967296;return new c(S,0)}function v(x,S){if(x.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(x.charAt(0)=="-")return F(v(x.substring(1),S));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=y(Math.pow(S,8)),k=T,L=0;L<x.length;L+=8){var j=Math.min(8,x.length-L),P=parseInt(x.substring(L,L+j),S);8>j?(j=y(Math.pow(S,j)),k=k.j(j).add(y(P))):(k=k.j(R),k=k.add(y(P)))}return k}var T=p(0),I=p(1),C=p(16777216);n=c.prototype,n.m=function(){if(B(this))return-F(this).m();for(var x=0,S=1,R=0;R<this.g.length;R++){var k=this.i(R);x+=(0<=k?k:4294967296+k)*S,S*=4294967296}return x},n.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(b(this))return"0";if(B(this))return"-"+F(this).toString(x);for(var S=y(Math.pow(x,6)),R=this,k="";;){var L=oe(R,S).g;R=W(R,L.j(S));var j=((0<R.g.length?R.g[0]:R.h)>>>0).toString(x);if(R=L,b(R))return j+k;for(;6>j.length;)j="0"+j;k=j+k}},n.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function b(x){if(x.h!=0)return!1;for(var S=0;S<x.g.length;S++)if(x.g[S]!=0)return!1;return!0}function B(x){return x.h==-1}n.l=function(x){return x=W(this,x),B(x)?-1:b(x)?0:1};function F(x){for(var S=x.g.length,R=[],k=0;k<S;k++)R[k]=~x.g[k];return new c(R,~x.h).add(I)}n.abs=function(){return B(this)?F(this):this},n.add=function(x){for(var S=Math.max(this.g.length,x.g.length),R=[],k=0,L=0;L<=S;L++){var j=k+(this.i(L)&65535)+(x.i(L)&65535),P=(j>>>16)+(this.i(L)>>>16)+(x.i(L)>>>16);k=P>>>16,j&=65535,P&=65535,R[L]=P<<16|j}return new c(R,R[R.length-1]&-2147483648?-1:0)};function W(x,S){return x.add(F(S))}n.j=function(x){if(b(this)||b(x))return T;if(B(this))return B(x)?F(this).j(F(x)):F(F(this).j(x));if(B(x))return F(this.j(F(x)));if(0>this.l(C)&&0>x.l(C))return y(this.m()*x.m());for(var S=this.g.length+x.g.length,R=[],k=0;k<2*S;k++)R[k]=0;for(k=0;k<this.g.length;k++)for(var L=0;L<x.g.length;L++){var j=this.i(k)>>>16,P=this.i(k)&65535,dt=x.i(L)>>>16,Ge=x.i(L)&65535;R[2*k+2*L]+=P*Ge,Y(R,2*k+2*L),R[2*k+2*L+1]+=j*Ge,Y(R,2*k+2*L+1),R[2*k+2*L+1]+=P*dt,Y(R,2*k+2*L+1),R[2*k+2*L+2]+=j*dt,Y(R,2*k+2*L+2)}for(k=0;k<S;k++)R[k]=R[2*k+1]<<16|R[2*k];for(k=S;k<2*S;k++)R[k]=0;return new c(R,0)};function Y(x,S){for(;(x[S]&65535)!=x[S];)x[S+1]+=x[S]>>>16,x[S]&=65535,S++}function J(x,S){this.g=x,this.h=S}function oe(x,S){if(b(S))throw Error("division by zero");if(b(x))return new J(T,T);if(B(x))return S=oe(F(x),S),new J(F(S.g),F(S.h));if(B(S))return S=oe(x,F(S)),new J(F(S.g),S.h);if(30<x.g.length){if(B(x)||B(S))throw Error("slowDivide_ only works with positive integers.");for(var R=I,k=S;0>=k.l(x);)R=V(R),k=V(k);var L=de(R,1),j=de(k,1);for(k=de(k,2),R=de(R,2);!b(k);){var P=j.add(k);0>=P.l(x)&&(L=L.add(R),j=P),k=de(k,1),R=de(R,1)}return S=W(x,L.j(S)),new J(L,S)}for(L=T;0<=x.l(S);){for(R=Math.max(1,Math.floor(x.m()/S.m())),k=Math.ceil(Math.log(R)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),j=y(R),P=j.j(S);B(P)||0<P.l(x);)R-=k,j=y(R),P=j.j(S);b(j)&&(j=I),L=L.add(j),x=W(x,P)}return new J(L,x)}n.A=function(x){return oe(this,x).h},n.and=function(x){for(var S=Math.max(this.g.length,x.g.length),R=[],k=0;k<S;k++)R[k]=this.i(k)&x.i(k);return new c(R,this.h&x.h)},n.or=function(x){for(var S=Math.max(this.g.length,x.g.length),R=[],k=0;k<S;k++)R[k]=this.i(k)|x.i(k);return new c(R,this.h|x.h)},n.xor=function(x){for(var S=Math.max(this.g.length,x.g.length),R=[],k=0;k<S;k++)R[k]=this.i(k)^x.i(k);return new c(R,this.h^x.h)};function V(x){for(var S=x.g.length+1,R=[],k=0;k<S;k++)R[k]=x.i(k)<<1|x.i(k-1)>>>31;return new c(R,x.h)}function de(x,S){var R=S>>5;S%=32;for(var k=x.g.length-R,L=[],j=0;j<k;j++)L[j]=0<S?x.i(j+R)>>>S|x.i(j+R+1)<<32-S:x.i(j+R);return new c(L,x.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Bv=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=v,Xs=c}).apply(typeof jy<"u"?jy:typeof self<"u"?self:typeof window<"u"?window:{});var Gu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $v,tl,Hv,ac,cf,qv,Wv,Kv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gu=="object"&&Gu];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var _=i;u=u.split(".");for(var E=0;E<u.length-1;E++){var z=u[E];if(!(z in _))break e;_=_[z]}u=u[u.length-1],E=_[u],m=m(E),m!=E&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var _=0,E=!1,z={next:function(){if(!E&&_<u.length){var Q=_++;return{value:m(Q,u[Q]),done:!1}}return E=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function v(u,m,_){return u.call.apply(u.bind,arguments)}function T(u,m,_){if(!u)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,E),u.apply(m,z)}}return function(){return u.apply(m,arguments)}}function I(u,m,_){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:T,I.apply(null,arguments)}function C(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var E=_.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function b(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(E,z,Q){for(var ce=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)ce[ut-2]=arguments[ut];return m.prototype[z].apply(E,ce)}}function B(u){const m=u.length;if(0<m){const _=Array(m);for(let E=0;E<m;E++)_[E]=u[E];return _}return[]}function F(u,m){for(let _=1;_<arguments.length;_++){const E=arguments[_];if(p(E)){const z=u.length||0,Q=E.length||0;u.length=z+Q;for(let ce=0;ce<Q;ce++)u[z+ce]=E[ce]}else u.push(E)}}class W{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function Y(u){return/^[\s\xa0]*$/.test(u)}function J(){var u=h.navigator;return u&&(u=u.userAgent)?u:""}function oe(u){return oe[" "](u),u}oe[" "]=function(){};var V=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function de(u,m,_){for(const E in u)m.call(_,u[E],E,u)}function x(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function S(u){const m={};for(const _ in u)m[_]=u[_];return m}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,m){let _,E;for(let z=1;z<arguments.length;z++){E=arguments[z];for(_ in E)u[_]=E[_];for(let Q=0;Q<R.length;Q++)_=R[Q],Object.prototype.hasOwnProperty.call(E,_)&&(u[_]=E[_])}}function L(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function j(u){h.setTimeout(()=>{throw u},0)}function P(){var u=Ie;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class dt{constructor(){this.h=this.g=null}add(m,_){const E=Ge.get();E.set(m,_),this.h?this.h.next=E:this.g=E,this.h=E}}var Ge=new W(()=>new Ct,u=>u.reset());class Ct{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Qe,ae=!1,Ie=new dt,he=()=>{const u=h.Promise.resolve(void 0);Qe=()=>{u.then(M)}};var M=()=>{for(var u;u=P();){try{u.h.call(u.g)}catch(_){j(_)}var m=Ge;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ae=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var Ve=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,m),h.removeEventListener("test",_,m)}catch{}return u}();function Le(u,m){if(Ee.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(V){e:{try{oe(m.nodeName);var z=!0;break e}catch{}z=!1}z||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ze[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Le.aa.h.call(this)}}b(Le,Ee);var ze={2:"touch",3:"pen",4:"mouse"};Le.prototype.h=function(){Le.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ze="closure_listenable_"+(1e6*Math.random()|0),et=0;function Fe(u,m,_,E,z){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!E,this.ha=z,this.key=++et,this.da=this.fa=!1}function ft(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Hn(u){this.src=u,this.g={},this.h=0}Hn.prototype.add=function(u,m,_,E,z){var Q=u.toString();u=this.g[Q],u||(u=this.g[Q]=[],this.h++);var ce=rn(u,m,E,z);return-1<ce?(m=u[ce],_||(m.fa=!1)):(m=new Fe(m,this.src,Q,!!E,z),m.fa=_,u.push(m)),m};function Ii(u,m){var _=m.type;if(_ in u.g){var E=u.g[_],z=Array.prototype.indexOf.call(E,m,void 0),Q;(Q=0<=z)&&Array.prototype.splice.call(E,z,1),Q&&(ft(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function rn(u,m,_,E){for(var z=0;z<u.length;++z){var Q=u[z];if(!Q.da&&Q.listener==m&&Q.capture==!!_&&Q.ha==E)return z}return-1}var Qr="closure_lm_"+(1e6*Math.random()|0),Si={};function Ri(u,m,_,E,z){if(Array.isArray(m)){for(var Q=0;Q<m.length;Q++)Ri(u,m[Q],_,E,z);return null}return _=En(_),u&&u[Ze]?u.K(m,_,y(E)?!!E.capture:!1,z):Ss(u,m,_,!1,E,z)}function Ss(u,m,_,E,z,Q){if(!m)throw Error("Invalid event type");var ce=y(z)?!!z.capture:!!z,ut=Yr(u);if(ut||(u[Qr]=ut=new Hn(u)),_=ut.add(m,_,E,ce,Q),_.proxy)return _;if(E=uo(),_.proxy=E,E.src=u,E.listener=_,u.addEventListener)Ve||(z=ce),z===void 0&&(z=!1),u.addEventListener(m.toString(),E,z);else if(u.attachEvent)u.attachEvent(qt(m.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return _}function uo(){function u(_){return m.call(u.src,u.listener,_)}const m=tr;return u}function Ai(u,m,_,E,z){if(Array.isArray(m))for(var Q=0;Q<m.length;Q++)Ai(u,m[Q],_,E,z);else E=y(E)?!!E.capture:!!E,_=En(_),u&&u[Ze]?(u=u.i,m=String(m).toString(),m in u.g&&(Q=u.g[m],_=rn(Q,_,E,z),-1<_&&(ft(Q[_]),Array.prototype.splice.call(Q,_,1),Q.length==0&&(delete u.g[m],u.h--)))):u&&(u=Yr(u))&&(m=u.g[m.toString()],u=-1,m&&(u=rn(m,_,E,z)),(_=-1<u?m[u]:null)&&er(_))}function er(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Ze])Ii(m.i,u);else{var _=u.type,E=u.proxy;m.removeEventListener?m.removeEventListener(_,E,u.capture):m.detachEvent?m.detachEvent(qt(_),E):m.addListener&&m.removeListener&&m.removeListener(E),(_=Yr(m))?(Ii(_,u),_.h==0&&(_.src=null,m[Qr]=null)):ft(u)}}}function qt(u){return u in Si?Si[u]:Si[u]="on"+u}function tr(u,m){if(u.da)u=!0;else{m=new Le(m,this);var _=u.listener,E=u.ha||u.src;u.fa&&er(u),u=_.call(E,m)}return u}function Yr(u){return u=u[Qr],u instanceof Hn?u:null}var Rr="__closure_events_fn_"+(1e9*Math.random()>>>0);function En(u){return typeof u=="function"?u:(u[Rr]||(u[Rr]=function(m){return u.handleEvent(m)}),u[Rr])}function lt(){X.call(this),this.i=new Hn(this),this.M=this,this.F=null}b(lt,X),lt.prototype[Ze]=!0,lt.prototype.removeEventListener=function(u,m,_,E){Ai(this,u,m,_,E)};function St(u,m){var _,E=u.F;if(E)for(_=[];E;E=E.F)_.push(E);if(u=u.M,E=m.type||m,typeof m=="string")m=new Ee(m,u);else if(m instanceof Ee)m.target=m.target||u;else{var z=m;m=new Ee(E,u),k(m,z)}if(z=!0,_)for(var Q=_.length-1;0<=Q;Q--){var ce=m.g=_[Q];z=Ln(ce,E,!0,m)&&z}if(ce=m.g=u,z=Ln(ce,E,!0,m)&&z,z=Ln(ce,E,!1,m)&&z,_)for(Q=0;Q<_.length;Q++)ce=m.g=_[Q],z=Ln(ce,E,!1,m)&&z}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],E=0;E<_.length;E++)ft(_[E]);delete u.g[m],u.h--}}this.F=null},lt.prototype.K=function(u,m,_,E){return this.i.add(String(u),m,!1,_,E)},lt.prototype.L=function(u,m,_,E){return this.i.add(String(u),m,!0,_,E)};function Ln(u,m,_,E){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var z=!0,Q=0;Q<m.length;++Q){var ce=m[Q];if(ce&&!ce.da&&ce.capture==_){var ut=ce.listener,Lt=ce.ha||ce.src;ce.fa&&Ii(u.i,ce),z=ut.call(Lt,E)!==!1&&z}}return z&&!E.defaultPrevented}function Rs(u,m,_){if(typeof u=="function")_&&(u=I(u,_));else if(u&&typeof u.handleEvent=="function")u=I(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:h.setTimeout(u,m||0)}function Wt(u){u.g=Rs(()=>{u.g=null,u.i&&(u.i=!1,Wt(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Ar extends X{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Wt(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cr(u){X.call(this),this.h=u,this.g={}}b(Cr,X);var Ci=[];function As(u){de(u.g,function(m,_){this.g.hasOwnProperty(_)&&er(m)},u),u.g={}}Cr.prototype.N=function(){Cr.aa.N.call(this),As(this)},Cr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pi=h.JSON.stringify,Pr=h.JSON.parse,ki=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function nr(){}nr.prototype.h=null;function xi(u){return u.h||(u.h=u.i())}function Xr(){}var Tn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function On(){Ee.call(this,"d")}b(On,Ee);function rr(){Ee.call(this,"c")}b(rr,Ee);var mn={},Cs=null;function Jr(){return Cs=Cs||new lt}mn.La="serverreachability";function D(u){Ee.call(this,mn.La,u)}b(D,Ee);function U(u){const m=Jr();St(m,new D(m))}mn.STAT_EVENT="statevent";function G(u,m){Ee.call(this,mn.STAT_EVENT,u),this.stat=m}b(G,Ee);function Z(u){const m=Jr();St(m,new G(m,u))}mn.Ma="timingevent";function fe(u,m){Ee.call(this,mn.Ma,u),this.size=m}b(fe,Ee);function ye(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function Ce(){this.g=!0}Ce.prototype.xa=function(){this.g=!1};function pe(u,m,_,E,z,Q){u.info(function(){if(u.g)if(Q)for(var ce="",ut=Q.split("&"),Lt=0;Lt<ut.length;Lt++){var Xe=ut[Lt].split("=");if(1<Xe.length){var jt=Xe[0];Xe=Xe[1];var xt=jt.split("_");ce=2<=xt.length&&xt[1]=="type"?ce+(jt+"="+Xe+"&"):ce+(jt+"=redacted&")}}else ce=null;else ce=Q;return"XMLHTTP REQ ("+E+") [attempt "+z+"]: "+m+`
`+_+`
`+ce})}function we(u,m,_,E,z,Q,ce){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+z+"]: "+m+`
`+_+`
`+Q+" "+ce})}function ue(u,m,_,E){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Ue(u,_)+(E?" "+E:"")})}function xe(u,m){u.info(function(){return"TIMEOUT: "+m})}Ce.prototype.info=function(){};function Ue(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var E=_[u];if(!(2>E.length)){var z=E[1];if(Array.isArray(z)&&!(1>z.length)){var Q=z[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var ce=1;ce<z.length;ce++)z[ce]=""}}}}return Pi(_)}catch{return m}}var it={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Rt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},He;function tt(){}b(tt,nr),tt.prototype.g=function(){return new XMLHttpRequest},tt.prototype.i=function(){return{}},He=new tt;function st(u,m,_,E){this.j=u,this.i=m,this.l=_,this.R=E||1,this.U=new Cr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ir}function ir(){this.i=null,this.g="",this.h=!1}var sr={},sn={};function Kt(u,m,_){u.L=1,u.v=Li(Vn(m)),u.m=_,u.P=!0,Zr(u,null)}function Zr(u,m){u.F=Date.now(),ot(u),u.A=Vn(u.v);var _=u.A,E=u.R;Array.isArray(E)||(E=[String(E)]),Vi(_.i,"t",E),u.C=0,_=u.j.J,u.h=new ir,u.g=Ql(u.j,_?m:null,!u.m),0<u.O&&(u.M=new Ar(I(u.Y,u,u.g),u.O)),m=u.U,_=u.g,E=u.ca;var z="readystatechange";Array.isArray(z)||(z&&(Ci[0]=z.toString()),z=Ci);for(var Q=0;Q<z.length;Q++){var ce=Ri(_,z[Q],E||m.handleEvent,!1,m.h||m);if(!ce)break;m.g[ce.key]=ce}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),U(),pe(u.i,u.u,u.A,u.l,u.R,u.m)}st.prototype.ca=function(u){u=u.target;const m=this.M;m&&Rn(u)==3?m.j():this.Y(u)},st.prototype.Y=function(u){try{if(u==this.g)e:{const xt=Rn(this.g);var m=this.g.Ba();const Wn=this.g.Z();if(!(3>xt)&&(xt!=3||this.g&&(this.h.h||this.g.oa()||wa(this.g)))){this.J||xt!=4||m==7||(m==8||0>=Wn?U(3):U(2)),Ye(this);var _=this.g.Z();this.X=_;t:if(kr(this)){var E=wa(this.g);u="";var z=E.length,Q=Rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gt(this),pt(this);var ce="";break t}this.h.i=new h.TextDecoder}for(m=0;m<z;m++)this.h.h=!0,u+=this.h.i.decode(E[m],{stream:!(Q&&m==z-1)});E.length=0,this.h.g+=u,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=_==200,we(this.i,this.u,this.A,this.l,this.R,xt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var ut,Lt=this.g;if((ut=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(ut)){var Xe=ut;break t}}Xe=null}if(_=Xe)ue(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ar(this,_);else{this.o=!1,this.s=3,Z(12),Gt(this),pt(this);break e}}if(this.P){_=!0;let Fn;for(;!this.J&&this.C<ce.length;)if(Fn=or(this,ce),Fn==sn){xt==4&&(this.s=4,Z(14),_=!1),ue(this.i,this.l,null,"[Incomplete Response]");break}else if(Fn==sr){this.s=4,Z(15),ue(this.i,this.l,ce,"[Invalid Chunk]"),_=!1;break}else ue(this.i,this.l,Fn,null),ar(this,Fn);if(kr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xt!=4||ce.length!=0||this.h.h||(this.s=1,Z(16),_=!1),this.o=this.o&&_,!_)ue(this.i,this.l,ce,"[Invalid Chunked Response]"),Gt(this),pt(this);else if(0<ce.length&&!this.W){this.W=!0;var jt=this.j;jt.g==this&&jt.ba&&!jt.M&&(jt.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),Ta(jt),jt.M=!0,Z(11))}}else ue(this.i,this.l,ce,null),ar(this,ce);xt==4&&Gt(this),this.o&&!this.J&&(xt==4?To(this.j,this):(this.o=!1,ot(this)))}else yo(this.g),_==400&&0<ce.indexOf("Unknown SID")?(this.s=3,Z(12)):(this.s=0,Z(13)),Gt(this),pt(this)}}}catch{}finally{}};function kr(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function or(u,m){var _=u.C,E=m.indexOf(`
`,_);return E==-1?sn:(_=Number(m.substring(_,E)),isNaN(_)?sr:(E+=1,E+_>m.length?sn:(m=m.slice(E,E+_),u.C=E+_,m)))}st.prototype.cancel=function(){this.J=!0,Gt(this)};function ot(u){u.S=Date.now()+u.I,ei(u,u.I)}function ei(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ye(I(u.ba,u),m)}function Ye(u){u.B&&(h.clearTimeout(u.B),u.B=null)}st.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(xe(this.i,this.A),this.L!=2&&(U(),Z(17)),Gt(this),this.s=2,pt(this)):ei(this,this.S-u)};function pt(u){u.j.G==0||u.J||To(u.j,u)}function Gt(u){Ye(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,As(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function ar(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||gn(_.h,u))){if(!u.K&&gn(_.h,u)&&_.G==3){try{var E=_.Da.g.parse(m)}catch{E=null}if(Array.isArray(E)&&E.length==3){var z=E;if(z[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)Eo(_),hr(_);else break e;wo(_),Z(18)}}else _.za=z[1],0<_.za-_.T&&37500>z[2]&&_.F&&_.v==0&&!_.C&&(_.C=ye(I(_.Za,_),6e3));if(1>=co(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else si(_,11)}else if((u.K||_.g==u)&&Eo(_),!Y(m))for(z=_.Da.g.parse(m),m=0;m<z.length;m++){let Xe=z[m];if(_.T=Xe[0],Xe=Xe[1],_.G==2)if(Xe[0]=="c"){_.K=Xe[1],_.ia=Xe[2];const jt=Xe[3];jt!=null&&(_.la=jt,_.j.info("VER="+_.la));const xt=Xe[4];xt!=null&&(_.Aa=xt,_.j.info("SVER="+_.Aa));const Wn=Xe[5];Wn!=null&&typeof Wn=="number"&&0<Wn&&(E=1.5*Wn,_.L=E,_.j.info("backChannelRequestTimeoutMs_="+E)),E=_;const Fn=u.g;if(Fn){const bs=Fn.g?Fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bs){var Q=E.h;Q.g||bs.indexOf("spdy")==-1&&bs.indexOf("quic")==-1&&bs.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(ga(Q,Q.h),Q.h=null))}if(E.D){const So=Fn.g?Fn.g.getResponseHeader("X-HTTP-Session-Id"):null;So&&(E.ya=So,ct(E.I,E.D,So))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),E=_;var ce=u;if(E.qa=Gl(E,E.J?E.ia:null,E.W),ce.K){Vl(E.h,ce);var ut=ce,Lt=E.L;Lt&&(ut.I=Lt),ut.B&&(Ye(ut),ot(ut)),E.g=ce}else Ds(E);0<_.i.length&&br(_)}else Xe[0]!="stop"&&Xe[0]!="close"||si(_,7);else _.G==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?si(_,7):Yt(_):Xe[0]!="noop"&&_.l&&_.l.ta(Xe),_.v=0)}}U(4)}catch{}}var mt=class{constructor(u,m){this.g=u,this.map=m}};function In(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function on(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function co(u){return u.h?1:u.g?u.g.size:0}function gn(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ga(u,m){u.g?u.g.add(m):u.h=m}function Vl(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}In.prototype.cancel=function(){if(this.i=Ml(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ml(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return B(u.i)}function ho(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],_=u.length,E=0;E<_;E++)m.push(u[E]);return m}m=[],_=0;for(E in u)m[_++]=u[E];return m}function fo(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const E in u)m[_++]=E;return m}}}function Ni(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=fo(u),E=ho(u),z=E.length,Q=0;Q<z;Q++)m.call(void 0,E[Q],_&&_[Q],u)}var Ps=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ad(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var E=u[_].indexOf("="),z=null;if(0<=E){var Q=u[_].substring(0,E);z=u[_].substring(E+1)}else Q=u[_];m(Q,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function ti(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ti){this.h=u.h,ks(this,u.j),this.o=u.o,this.g=u.g,Di(this,u.s),this.l=u.l;var m=u.i,_=new xr;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),bi(this,_),this.m=u.m}else u&&(m=String(u).match(Ps))?(this.h=!1,ks(this,m[1]||"",!0),this.o=qe(m[2]||""),this.g=qe(m[3]||"",!0),Di(this,m[4]),this.l=qe(m[5]||"",!0),bi(this,m[6]||"",!0),this.m=qe(m[7]||"")):(this.h=!1,this.i=new xr(null,this.h))}ti.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Oi(m,po,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Oi(m,po,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Oi(_,_.charAt(0)=="/"?jl:Ul,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Oi(_,ya)),u.join("")};function Vn(u){return new ti(u)}function ks(u,m,_){u.j=_?qe(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Di(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function bi(u,m,_){m instanceof xr?(u.i=m,Nr(u.i,u.h)):(_||(m=Oi(m,zl)),u.i=new xr(m,u.h))}function ct(u,m,_){u.i.set(m,_)}function Li(u){return ct(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function qe(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Oi(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Fl),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Fl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var po=/[#\/\?@]/g,Ul=/[#\?:]/g,jl=/[#\?]/g,zl=/[#\?@]/g,ya=/#/g;function xr(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Qt(u){u.g||(u.g=new Map,u.h=0,u.i&&ad(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}n=xr.prototype,n.add=function(u,m){Qt(this),this.i=null,u=qn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function lr(u,m){Qt(u),m=qn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function ur(u,m){return Qt(u),m=qn(u,m),u.g.has(m)}n.forEach=function(u,m){Qt(this),this.g.forEach(function(_,E){_.forEach(function(z){u.call(m,z,E,this)},this)},this)},n.na=function(){Qt(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let E=0;E<m.length;E++){const z=u[E];for(let Q=0;Q<z.length;Q++)_.push(m[E])}return _},n.V=function(u){Qt(this);let m=[];if(typeof u=="string")ur(this,u)&&(m=m.concat(this.g.get(qn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},n.set=function(u,m){return Qt(this),this.i=null,u=qn(this,u),ur(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},n.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Vi(u,m,_){lr(u,m),0<_.length&&(u.i=null,u.g.set(qn(u,m),B(_)),u.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var E=m[_];const Q=encodeURIComponent(String(E)),ce=this.V(E);for(E=0;E<ce.length;E++){var z=Q;ce[E]!==""&&(z+="="+encodeURIComponent(String(ce[E]))),u.push(z)}}return this.i=u.join("&")};function qn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Nr(u,m){m&&!u.j&&(Qt(u),u.i=null,u.g.forEach(function(_,E){var z=E.toLowerCase();E!=z&&(lr(this,E),Vi(this,z,_))},u)),u.j=m}function ld(u,m){const _=new Ce;if(h.Image){const E=new Image;E.onload=C(Sn,_,"TestLoadImage: loaded",!0,m,E),E.onerror=C(Sn,_,"TestLoadImage: error",!1,m,E),E.onabort=C(Sn,_,"TestLoadImage: abort",!1,m,E),E.ontimeout=C(Sn,_,"TestLoadImage: timeout",!1,m,E),h.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else m(!1)}function Bl(u,m){const _=new Ce,E=new AbortController,z=setTimeout(()=>{E.abort(),Sn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:E.signal}).then(Q=>{clearTimeout(z),Q.ok?Sn(_,"TestPingServer: ok",!0,m):Sn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(z),Sn(_,"TestPingServer: error",!1,m)})}function Sn(u,m,_,E,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),E(_)}catch{}}function ud(){this.g=new ki}function $l(u,m,_){const E=_||"";try{Ni(u,function(z,Q){let ce=z;y(z)&&(ce=Pi(z)),m.push(E+Q+"="+encodeURIComponent(ce))})}catch(z){throw m.push(E+"type="+encodeURIComponent("_badmap")),z}}function ni(u){this.l=u.Ub||null,this.j=u.eb||!1}b(ni,nr),ni.prototype.g=function(){return new xs(this.l,this.j)},ni.prototype.i=function(u){return function(){return u}}({});function xs(u,m){lt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(xs,lt),n=xs.prototype,n.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,dr(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||h).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,cr(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,dr(this)),this.g&&(this.readyState=3,dr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Hl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Hl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?cr(this):dr(this),this.readyState==3&&Hl(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,cr(this))},n.Qa=function(u){this.g&&(this.response=u,cr(this))},n.ga=function(){this.g&&cr(this)};function cr(u){u.readyState=4,u.l=null,u.j=null,u.v=null,dr(u)}n.setRequestHeader=function(u,m){this.u.append(u,m)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function dr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(xs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ri(u){let m="";return de(u,function(_,E){m+=E,m+=":",m+=_,m+=`\r
`}),m}function Mi(u,m,_){e:{for(E in _){var E=!1;break e}E=!0}E||(_=ri(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):ct(u,m,_))}function vt(u){lt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(vt,lt);var cd=/^https?$/i,_a=["POST","PUT"];n=vt.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,m,_,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():He.g(),this.v=this.o?xi(this.o):xi(He),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(Q){Ns(this,Q);return}if(u=_||"",_=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var z in E)_.set(z,E[z]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const Q of E.keys())_.set(Q,E.get(Q));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(_.keys()).find(Q=>Q.toLowerCase()=="content-type"),z=h.FormData&&u instanceof h.FormData,!(0<=Array.prototype.indexOf.call(_a,m,void 0))||E||z||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ce]of _)this.g.setRequestHeader(Q,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{go(this),this.u=!0,this.g.send(u),this.u=!1}catch(Q){Ns(this,Q)}};function Ns(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,mo(u),Mn(u)}function mo(u){u.A||(u.A=!0,St(u,"complete"),St(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,St(this,"complete"),St(this,"abort"),Mn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mn(this,!0)),vt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?va(this):this.bb())},n.bb=function(){va(this)};function va(u){if(u.h&&typeof c<"u"&&(!u.v[1]||Rn(u)!=4||u.Z()!=2)){if(u.u&&Rn(u)==4)Rs(u.Ea,0,u);else if(St(u,"readystatechange"),Rn(u)==4){u.h=!1;try{const ce=u.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var E;if(E=ce===0){var z=String(u.D).match(Ps)[1]||null;!z&&h.self&&h.self.location&&(z=h.self.location.protocol.slice(0,-1)),E=!cd.test(z?z.toLowerCase():"")}_=E}if(_)St(u,"complete"),St(u,"success");else{u.m=6;try{var Q=2<Rn(u)?u.g.statusText:""}catch{Q=""}u.l=Q+" ["+u.Z()+"]",mo(u)}}finally{Mn(u)}}}}function Mn(u,m){if(u.g){go(u);const _=u.g,E=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||St(u,"ready");try{_.onreadystatechange=E}catch{}}}function go(u){u.I&&(h.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Rn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Rn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Pr(m)}};function wa(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function yo(u){const m={};u=(u.g&&2<=Rn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(Y(u[E]))continue;var _=L(u[E]);const z=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Q=m[z]||[];m[z]=Q,Q.push(_)}x(m,function(E){return E.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Dr(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function Ea(u){this.Aa=0,this.i=[],this.j=new Ce,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Dr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Dr("baseRetryDelayMs",5e3,u),this.cb=Dr("retryDelaySeedMs",1e4,u),this.Wa=Dr("forwardChannelMaxRetries",2,u),this.wa=Dr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new In(u&&u.concurrentRequestLimit),this.Da=new ud,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ea.prototype,n.la=8,n.G=1,n.connect=function(u,m,_,E){Z(0),this.W=u,this.H=m||{},_&&E!==void 0&&(this.H.OSID=_,this.H.OAID=E),this.F=this.X,this.I=Gl(this,null,this.W),br(this)};function Yt(u){if(_o(u),u.G==3){var m=u.U++,_=Vn(u.I);if(ct(_,"SID",u.K),ct(_,"RID",m),ct(_,"TYPE","terminate"),ii(u,_),m=new st(u,u.j,m),m.L=2,m.v=Li(Vn(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&h.Image&&(new Image().src=m.v,_=!0),_||(m.g=Ql(m.j,null),m.g.ea(m.v)),m.F=Date.now(),ot(m)}Kl(u)}function hr(u){u.g&&(Ta(u),u.g.cancel(),u.g=null)}function _o(u){hr(u),u.u&&(h.clearTimeout(u.u),u.u=null),Eo(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&h.clearTimeout(u.s),u.s=null)}function br(u){if(!on(u.h)&&!u.s){u.s=!0;var m=u.Ga;Qe||he(),ae||(Qe(),ae=!0),Ie.add(m,u),u.B=0}}function dd(u,m){return co(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ye(I(u.Ga,u,m),Wl(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const z=new st(this,this.j,u);let Q=this.o;if(this.S&&(Q?(Q=S(Q),k(Q,this.S)):Q=this.S),this.m!==null||this.O||(z.H=Q,Q=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var E=this.i[_];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(m+=E,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=Fi(this,z,m),_=Vn(this.I),ct(_,"RID",u),ct(_,"CVER",22),this.D&&ct(_,"X-HTTP-Session-Id",this.D),ii(this,_),Q&&(this.O?m="headers="+encodeURIComponent(String(ri(Q)))+"&"+m:this.m&&Mi(_,this.m,Q)),ga(this.h,z),this.Ua&&ct(_,"TYPE","init"),this.P?(ct(_,"$req",m),ct(_,"SID","null"),z.T=!0,Kt(z,_,null)):Kt(z,_,m),this.G=2}}else this.G==3&&(u?vo(this,u):this.i.length==0||on(this.h)||vo(this))};function vo(u,m){var _;m?_=m.l:_=u.U++;const E=Vn(u.I);ct(E,"SID",u.K),ct(E,"RID",_),ct(E,"AID",u.T),ii(u,E),u.m&&u.o&&Mi(E,u.m,u.o),_=new st(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Fi(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ga(u.h,_),Kt(_,E,m)}function ii(u,m){u.H&&de(u.H,function(_,E){ct(m,E,_)}),u.l&&Ni({},function(_,E){ct(m,E,_)})}function Fi(u,m,_){_=Math.min(u.i.length,_);var E=u.l?I(u.l.Na,u.l,u):null;e:{var z=u.i;let Q=-1;for(;;){const ce=["count="+_];Q==-1?0<_?(Q=z[0].g,ce.push("ofs="+Q)):Q=0:ce.push("ofs="+Q);let ut=!0;for(let Lt=0;Lt<_;Lt++){let Xe=z[Lt].g;const jt=z[Lt].map;if(Xe-=Q,0>Xe)Q=Math.max(0,z[Lt].g-100),ut=!1;else try{$l(jt,ce,"req"+Xe+"_")}catch{E&&E(jt)}}if(ut){E=ce.join("&");break e}}}return u=u.i.splice(0,_),m.D=u,E}function Ds(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;Qe||he(),ae||(Qe(),ae=!0),Ie.add(m,u),u.v=0}}function wo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ye(I(u.Fa,u),Wl(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,ql(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ye(I(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Z(10),hr(this),ql(this))};function Ta(u){u.A!=null&&(h.clearTimeout(u.A),u.A=null)}function ql(u){u.g=new st(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=Vn(u.qa);ct(m,"RID","rpc"),ct(m,"SID",u.K),ct(m,"AID",u.T),ct(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&ct(m,"TO",u.ja),ct(m,"TYPE","xmlhttp"),ii(u,m),u.m&&u.o&&Mi(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Li(Vn(m)),_.m=null,_.P=!0,Zr(_,u)}n.Za=function(){this.C!=null&&(this.C=null,hr(this),wo(this),Z(19))};function Eo(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function To(u,m){var _=null;if(u.g==m){Eo(u),Ta(u),u.g=null;var E=2}else if(gn(u.h,m))_=m.D,Vl(u.h,m),E=1;else return;if(u.G!=0){if(m.o)if(E==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var z=u.B;E=Jr(),St(E,new fe(E,_)),br(u)}else Ds(u);else if(z=m.s,z==3||z==0&&0<m.X||!(E==1&&dd(u,m)||E==2&&wo(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),z){case 1:si(u,5);break;case 4:si(u,10);break;case 3:si(u,6);break;default:si(u,2)}}}function Wl(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function si(u,m){if(u.j.info("Error code "+m),m==2){var _=I(u.fb,u),E=u.Xa;const z=!E;E=new ti(E||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||ks(E,"https"),Li(E),z?ld(E.toString(),_):Bl(E.toString(),_)}else Z(2);u.G=0,u.l&&u.l.sa(m),Kl(u),_o(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Z(2)):(this.j.info("Failed to ping google.com"),Z(1))};function Kl(u){if(u.G=0,u.ka=[],u.l){const m=Ml(u.h);(m.length!=0||u.i.length!=0)&&(F(u.ka,m),F(u.ka,u.i),u.h.i.length=0,B(u.i),u.i.length=0),u.l.ra()}}function Gl(u,m,_){var E=_ instanceof ti?Vn(_):new ti(_);if(E.g!="")m&&(E.g=m+"."+E.g),Di(E,E.s);else{var z=h.location;E=z.protocol,m=m?m+"."+z.hostname:z.hostname,z=+z.port;var Q=new ti(null);E&&ks(Q,E),m&&(Q.g=m),z&&Di(Q,z),_&&(Q.l=_),E=Q}return _=u.D,m=u.ya,_&&m&&ct(E,_,m),ct(E,"VER",u.la),ii(u,E),E}function Ql(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new vt(new ni({eb:_})):new vt(u.pa),m.Ha(u.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ia(){}n=Ia.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Io(){}Io.prototype.g=function(u,m){return new yn(u,m)};function yn(u,m){lt.call(this),this.g=new Ea(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!Y(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!Y(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Lr(this)}b(yn,lt),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){Yt(this.g)},yn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Pi(u),u=_);m.i.push(new mt(m.Ya++,u)),m.G==3&&br(m)},yn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,yn.aa.N.call(this)};function Yl(u){On.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}b(Yl,On);function Xl(){rr.call(this),this.status=1}b(Xl,rr);function Lr(u){this.g=u}b(Lr,Ia),Lr.prototype.ua=function(){St(this.g,"a")},Lr.prototype.ta=function(u){St(this.g,new Yl(u))},Lr.prototype.sa=function(u){St(this.g,new Xl)},Lr.prototype.ra=function(){St(this.g,"b")},Io.prototype.createWebChannel=Io.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,Kv=function(){return new Io},Wv=function(){return Jr()},qv=mn,cf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},it.NO_ERROR=0,it.TIMEOUT=8,it.HTTP_ERROR=6,ac=it,Rt.COMPLETE="complete",Hv=Rt,Xr.EventType=Tn,Tn.OPEN="a",Tn.CLOSE="b",Tn.ERROR="c",Tn.MESSAGE="d",lt.prototype.listen=lt.prototype.K,tl=Xr,vt.prototype.listenOnce=vt.prototype.L,vt.prototype.getLastError=vt.prototype.Ka,vt.prototype.getLastErrorCode=vt.prototype.Ba,vt.prototype.getStatus=vt.prototype.Z,vt.prototype.getResponseJson=vt.prototype.Oa,vt.prototype.getResponseText=vt.prototype.oa,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Ha,$v=vt}).apply(typeof Gu<"u"?Gu:typeof self<"u"?self:typeof window<"u"?window:{});const zy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let da="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=new Ff("@firebase/firestore");function Wo(){return no.logLevel}function ge(n,...e){if(no.logLevel<=Be.DEBUG){const t=e.map(Yf);no.debug(`Firestore (${da}): ${n}`,...t)}}function wi(n,...e){if(no.logLevel<=Be.ERROR){const t=e.map(Yf);no.error(`Firestore (${da}): ${n}`,...t)}}function na(n,...e){if(no.logLevel<=Be.WARN){const t=e.map(Yf);no.warn(`Firestore (${da}): ${n}`,...t)}}function Yf(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(n="Unexpected state"){const e=`FIRESTORE (${da}) INTERNAL ASSERTION FAILED: `+n;throw wi(e),new Error(e)}function at(n,e){n||be()}function Me(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Ti{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(hn.UNAUTHENTICATED))}shutdown(){}}class AC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class CC{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){at(this.o===void 0);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new cs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new cs,e.enqueueRetryable(()=>o(this.currentUser))};const c=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},h=p=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>h(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new cs)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(at(typeof i.accessToken=="string"),new Gv(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return at(e===null||typeof e=="string"),new hn(e)}}class PC{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class kC{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new PC(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class NC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){at(this.o===void 0);const i=l=>{l.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.R;return this.R=l.token,ge("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const o=l=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(at(typeof t.token=="string"),this.R=t.token,new xC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=DC(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%e.length))}return i}}function We(n,e){return n<e?-1:n>e?1:0}function ra(n,e,t){return n.length===e.length&&n.every((i,o)=>t(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{static now(){return Mt.fromMillis(Date.now())}static fromDate(e){return Mt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Mt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ve(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new Mt(0,0))}static max(){return new Oe(new Mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,t,i){t===void 0?t=0:t>e.length&&be(),i===void 0?i=e.length-t:i>e.length-t&&be(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return pl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof pl?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=e.get(o),c=t.get(o);if(l<c)return-1;if(l>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class _t extends pl{construct(e,t,i){return new _t(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ve(te.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new _t(t)}static emptyPath(){return new _t([])}}const bC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends pl{construct(e,t,i){return new en(e,t,i)}static isValidIdentifier(e){return bC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new en(["__name__"])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ve(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;o<e.length;){const h=e[o];if(h==="\\"){if(o+1===e.length)throw new ve(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ve(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else h==="`"?(c=!c,o++):h!=="."||c?(i+=h,o++):(l(),o++)}if(l(),c)throw new ve(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(t)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(_t.fromString(e))}static fromName(e){return new Ae(_t.fromString(e).popFirst(5))}static empty(){return new Ae(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return _t.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new _t(e.slice()))}}function LC(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Oe.fromTimestamp(i===1e9?new Mt(t+1,0):new Mt(t,i));return new fs(o,Ae.empty(),e)}function OC(n){return new fs(n.readTime,n.key,-1)}class fs{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new fs(Oe.min(),Ae.empty(),-1)}static max(){return new fs(Oe.max(),Ae.empty(),-1)}}function VC(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ae.comparator(n.documentKey,e.documentKey),t!==0?t:We(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ha(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==MC)throw n;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&be(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.reject(t)}static resolve(e){return new ee((t,i)=>{t(e)})}static reject(e){return new ee((t,i)=>{i(e)})}static waitFor(e){return new ee((t,i)=>{let o=0,l=0,c=!1;e.forEach(h=>{++o,h.next(()=>{++l,c&&l===o&&t()},p=>i(p))}),c=!0,l===o&&t()})}static or(e){let t=ee.resolve(!1);for(const i of e)t=t.next(o=>o?ee.resolve(o):i());return t}static forEach(e,t){const i=[];return e.forEach((o,l)=>{i.push(t.call(this,o,l))}),this.waitFor(i)}static mapArray(e,t){return new ee((i,o)=>{const l=e.length,c=new Array(l);let h=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next(v=>{c[y]=v,++h,h===l&&i(c)},v=>o(v))}})}static doWhile(e,t){return new ee((i,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):i()};l()})}}function UC(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function fa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}jc.oe=-1;function zc(n){return n==null}function Sc(n){return n===0&&1/n==-1/0}function jC(n){return typeof n=="number"&&Number.isInteger(n)&&!Sc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=By(e)),e=BC(n.get(t),e);return By(e)}function BC(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case"":t+="";break;default:t+=l}}return t}function By(n){return n+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Es(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Yv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,t){this.comparator=e,this.root=t||Zt.EMPTY}insert(e,t){return new It(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new It(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qu(this.root,e,this.comparator,!0)}}class Qu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Zt.RED,this.left=o??Zt.EMPTY,this.right=l??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Zt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Zt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw be();const e=this.left.check();if(e!==this.right.check())throw be();return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw be()}get value(){throw be()}get color(){throw be()}get left(){throw be()}get right(){throw be()}copy(e,t,i,o,l){return this}insert(e,t,i){return new Zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.comparator=e,this.data=new It(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Hy(this.data.getIterator())}getIteratorFrom(e){return new Hy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ft(this.comparator);return t.data=e,t}}class Hy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new $n([])}unionWith(e){let t=new Ft(en.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new $n(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ra(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Xv("Invalid base64 string: "+l):l}}(e);return new nn(t)}static fromUint8Array(e){const t=function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l}(e);return new nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const $C=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ps(n){if(at(!!n),typeof n=="string"){let e=0;const t=$C.exec(n);if(at(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:kt(n.seconds),nanos:kt(n.nanos)}}function kt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ms(n){return typeof n=="string"?nn.fromBase64String(n):nn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Bc(n){const e=n.mapValue.fields.__previous_value__;return Xf(e)?Bc(e):e}function ml(n){const e=ps(n.mapValue.fields.__local_write_time__.timestampValue);return new Mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,t,i,o,l,c,h,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=y}}class gl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new gl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof gl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function gs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Xf(n)?4:WC(n)?9007199254740991:qC(n)?10:11:be()}function Wr(n,e){if(n===e)return!0;const t=gs(n);if(t!==gs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ml(n).isEqual(ml(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=ps(o.timestampValue),h=ps(l.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(o,l){return ms(o.bytesValue).isEqual(ms(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(o,l){return kt(o.geoPointValue.latitude)===kt(l.geoPointValue.latitude)&&kt(o.geoPointValue.longitude)===kt(l.geoPointValue.longitude)}(n,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return kt(o.integerValue)===kt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=kt(o.doubleValue),h=kt(l.doubleValue);return c===h?Sc(c)===Sc(h):isNaN(c)&&isNaN(h)}return!1}(n,e);case 9:return ra(n.arrayValue.values||[],e.arrayValue.values||[],Wr);case 10:case 11:return function(o,l){const c=o.mapValue.fields||{},h=l.mapValue.fields||{};if($y(c)!==$y(h))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(h[p]===void 0||!Wr(c[p],h[p])))return!1;return!0}(n,e);default:return be()}}function yl(n,e){return(n.values||[]).find(t=>Wr(t,e))!==void 0}function ia(n,e){if(n===e)return 0;const t=gs(n),i=gs(e);if(t!==i)return We(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return We(n.booleanValue,e.booleanValue);case 2:return function(l,c){const h=kt(l.integerValue||l.doubleValue),p=kt(c.integerValue||c.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1}(n,e);case 3:return qy(n.timestampValue,e.timestampValue);case 4:return qy(ml(n),ml(e));case 5:return We(n.stringValue,e.stringValue);case 6:return function(l,c){const h=ms(l),p=ms(c);return h.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(l,c){const h=l.split("/"),p=c.split("/");for(let y=0;y<h.length&&y<p.length;y++){const v=We(h[y],p[y]);if(v!==0)return v}return We(h.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,c){const h=We(kt(l.latitude),kt(c.latitude));return h!==0?h:We(kt(l.longitude),kt(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Wy(n.arrayValue,e.arrayValue);case 10:return function(l,c){var h,p,y,v;const T=l.fields||{},I=c.fields||{},C=(h=T.value)===null||h===void 0?void 0:h.arrayValue,b=(p=I.value)===null||p===void 0?void 0:p.arrayValue,B=We(((y=C==null?void 0:C.values)===null||y===void 0?void 0:y.length)||0,((v=b==null?void 0:b.values)===null||v===void 0?void 0:v.length)||0);return B!==0?B:Wy(C,b)}(n.mapValue,e.mapValue);case 11:return function(l,c){if(l===Yu.mapValue&&c===Yu.mapValue)return 0;if(l===Yu.mapValue)return 1;if(c===Yu.mapValue)return-1;const h=l.fields||{},p=Object.keys(h),y=c.fields||{},v=Object.keys(y);p.sort(),v.sort();for(let T=0;T<p.length&&T<v.length;++T){const I=We(p[T],v[T]);if(I!==0)return I;const C=ia(h[p[T]],y[v[T]]);if(C!==0)return C}return We(p.length,v.length)}(n.mapValue,e.mapValue);default:throw be()}}function qy(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return We(n,e);const t=ps(n),i=ps(e),o=We(t.seconds,i.seconds);return o!==0?o:We(t.nanos,i.nanos)}function Wy(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=ia(t[o],i[o]);if(l)return l}return We(t.length,i.length)}function sa(n){return df(n)}function df(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=ps(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ms(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ae.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=df(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of i)l?l=!1:o+=",",o+=`${c}:${df(t.fields[c])}`;return o+"}"}(n.mapValue):be()}function lc(n){switch(gs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Bc(n);return e?16+lc(e):16;case 5:return 2*n.stringValue.length;case 6:return ms(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,l)=>o+lc(l),0)}(n.arrayValue);case 10:case 11:return function(i){let o=0;return Es(i.fields,(l,c)=>{o+=l.length+lc(c)}),o}(n.mapValue);default:throw be()}}function Ky(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function hf(n){return!!n&&"integerValue"in n}function Jf(n){return!!n&&"arrayValue"in n}function Gy(n){return!!n&&"nullValue"in n}function Qy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function uc(n){return!!n&&"mapValue"in n}function qC(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function ol(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Es(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=ol(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ol(n.arrayValue.values[t]);return e}return Object.assign({},n)}function WC(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!uc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ol(t)}setAll(e){let t=en.emptyPath(),i={},o=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=h.popLast()}c?i[h.lastSegment()]=ol(c):o.push(h.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());uc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];uc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Es(t,(o,l)=>e[o]=l);for(const o of i)delete e[o]}clone(){return new bn(ol(this.value))}}function Jv(n){const e=[];return Es(n.fields,(t,i)=>{const o=new en([t]);if(uc(i)){const l=Jv(i.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)}),new $n(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,t,i,o,l,c,h){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=c,this.documentState=h}static newInvalidDocument(e){return new fn(e,0,Oe.min(),Oe.min(),Oe.min(),bn.empty(),0)}static newFoundDocument(e,t,i,o){return new fn(e,1,t,Oe.min(),i,o,0)}static newNoDocument(e,t){return new fn(e,2,t,Oe.min(),Oe.min(),bn.empty(),0)}static newUnknownDocument(e,t){return new fn(e,3,t,Oe.min(),Oe.min(),bn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,t){this.position=e,this.inclusive=t}}function Yy(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?i=Ae.comparator(Ae.fromName(c.referenceValue),t.key):i=ia(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Xy(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Wr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,t="asc"){this.field=e,this.dir=t}}function KC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{}class bt extends Zv{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new QC(e,t,i):t==="array-contains"?new JC(e,i):t==="in"?new ZC(e,i):t==="not-in"?new eP(e,i):t==="array-contains-any"?new tP(e,i):new bt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new YC(e,i):new XC(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ia(t,this.value)):t!==null&&gs(this.value)===gs(t)&&this.matchesComparison(ia(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Sr extends Zv{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Sr(e,t)}matches(e){return ew(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ew(n){return n.op==="and"}function tw(n){return GC(n)&&ew(n)}function GC(n){for(const e of n.filters)if(e instanceof Sr)return!1;return!0}function ff(n){if(n instanceof bt)return n.field.canonicalString()+n.op.toString()+sa(n.value);if(tw(n))return n.filters.map(e=>ff(e)).join(",");{const e=n.filters.map(t=>ff(t)).join(",");return`${n.op}(${e})`}}function nw(n,e){return n instanceof bt?function(i,o){return o instanceof bt&&i.op===o.op&&i.field.isEqual(o.field)&&Wr(i.value,o.value)}(n,e):n instanceof Sr?function(i,o){return o instanceof Sr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((l,c,h)=>l&&nw(c,o.filters[h]),!0):!1}(n,e):void be()}function rw(n){return n instanceof bt?function(t){return`${t.field.canonicalString()} ${t.op} ${sa(t.value)}`}(n):n instanceof Sr?function(t){return t.op.toString()+" {"+t.getFilters().map(rw).join(" ,")+"}"}(n):"Filter"}class QC extends bt{constructor(e,t,i){super(e,t,i),this.key=Ae.fromName(i.referenceValue)}matches(e){const t=Ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class YC extends bt{constructor(e,t){super(e,"in",t),this.keys=iw("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class XC extends bt{constructor(e,t){super(e,"not-in",t),this.keys=iw("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function iw(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Ae.fromName(i.referenceValue))}class JC extends bt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Jf(t)&&yl(t.arrayValue,this.value)}}class ZC extends bt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&yl(this.value.arrayValue,t)}}class eP extends bt{constructor(e,t){super(e,"not-in",t)}matches(e){if(yl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!yl(this.value.arrayValue,t)}}class tP extends bt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Jf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>yl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e,t=null,i=[],o=[],l=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=c,this.endAt=h,this.ue=null}}function Jy(n,e=null,t=[],i=[],o=null,l=null,c=null){return new nP(n,e,t,i,o,l,c)}function Zf(n){const e=Me(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>ff(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),zc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>sa(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>sa(i)).join(",")),e.ue=t}return e.ue}function ep(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!KC(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!nw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Xy(n.startAt,e.startAt)&&Xy(n.endAt,e.endAt)}function pf(n){return Ae.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,t=null,i=[],o=[],l=null,c="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=c,this.startAt=h,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function rP(n,e,t,i,o,l,c,h){return new pa(n,e,t,i,o,l,c,h)}function tp(n){return new pa(n)}function Zy(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function sw(n){return n.collectionGroup!==null}function al(n){const e=Me(n);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Ft(en.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(h=h.add(y.field))})}),h})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new _l(l,i))}),t.has(en.keyField().canonicalString())||e.ce.push(new _l(en.keyField(),i))}return e.ce}function Hr(n){const e=Me(n);return e.le||(e.le=iP(e,al(n))),e.le}function iP(n,e){if(n.limitType==="F")return Jy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new _l(o.field,l)});const t=n.endAt?new Rc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Rc(n.startAt.position,n.startAt.inclusive):null;return Jy(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function mf(n,e){const t=n.filters.concat([e]);return new pa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function gf(n,e,t){return new pa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function $c(n,e){return ep(Hr(n),Hr(e))&&n.limitType===e.limitType}function ow(n){return`${Zf(Hr(n))}|lt:${n.limitType}`}function Ko(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>rw(o)).join(", ")}]`),zc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(o)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>sa(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>sa(o)).join(",")),`Target(${i})`}(Hr(n))}; limitType=${n.limitType})`}function Hc(n,e){return e.isFoundDocument()&&function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Ae.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(n,e)&&function(i,o){for(const l of al(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(n,e)&&function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0}(n,e)&&function(i,o){return!(i.startAt&&!function(c,h,p){const y=Yy(c,h,p);return c.inclusive?y<=0:y<0}(i.startAt,al(i),o)||i.endAt&&!function(c,h,p){const y=Yy(c,h,p);return c.inclusive?y>=0:y>0}(i.endAt,al(i),o))}(n,e)}function sP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function aw(n){return(e,t)=>{let i=!1;for(const o of al(n)){const l=oP(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function oP(n,e,t){const i=n.field.isKeyField()?Ae.comparator(e.key,t.key):function(l,c,h){const p=c.data.field(l),y=h.data.field(l);return p!==null&&y!==null?ia(p,y):be()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return be()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Es(this.inner,(t,i)=>{for(const[o,l]of i)e(o,l)})}isEmpty(){return Yv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP=new It(Ae.comparator);function Ei(){return aP}const lw=new It(Ae.comparator);function nl(...n){let e=lw;for(const t of n)e=e.insert(t.key,t);return e}function uw(n){let e=lw;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Ys(){return ll()}function cw(){return ll()}function ll(){return new ao(n=>n.toString(),(n,e)=>n.isEqual(e))}const lP=new It(Ae.comparator),uP=new Ft(Ae.comparator);function $e(...n){let e=uP;for(const t of n)e=e.add(t);return e}const cP=new Ft(We);function dP(){return cP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sc(e)?"-0":e}}function dw(n){return{integerValue:""+n}}function hP(n,e){return jC(e)?dw(e):np(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(){this._=void 0}}function fP(n,e,t){return n instanceof Ac?function(o,l){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Xf(l)&&(l=Bc(l)),l&&(c.fields.__previous_value__=l),{mapValue:c}}(t,e):n instanceof vl?fw(n,e):n instanceof wl?pw(n,e):function(o,l){const c=hw(o,l),h=e_(c)+e_(o.Pe);return hf(c)&&hf(o.Pe)?dw(h):np(o.serializer,h)}(n,e)}function pP(n,e,t){return n instanceof vl?fw(n,e):n instanceof wl?pw(n,e):t}function hw(n,e){return n instanceof Cc?function(i){return hf(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class Ac extends qc{}class vl extends qc{constructor(e){super(),this.elements=e}}function fw(n,e){const t=mw(e);for(const i of n.elements)t.some(o=>Wr(o,i))||t.push(i);return{arrayValue:{values:t}}}class wl extends qc{constructor(e){super(),this.elements=e}}function pw(n,e){let t=mw(e);for(const i of n.elements)t=t.filter(o=>!Wr(o,i));return{arrayValue:{values:t}}}class Cc extends qc{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function e_(n){return kt(n.integerValue||n.doubleValue)}function mw(n){return Jf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function mP(n,e){return n.field.isEqual(e.field)&&function(i,o){return i instanceof vl&&o instanceof vl||i instanceof wl&&o instanceof wl?ra(i.elements,o.elements,Wr):i instanceof Cc&&o instanceof Cc?Wr(i.Pe,o.Pe):i instanceof Ac&&o instanceof Ac}(n.transform,e.transform)}class gP{constructor(e,t){this.version=e,this.transformResults=t}}class wr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new wr}static exists(e){return new wr(void 0,e)}static updateTime(e){return new wr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Wc{}function gw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new _w(n.key,wr.none()):new Nl(n.key,n.data,wr.none());{const t=n.data,i=bn.empty();let o=new Ft(en.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),o=o.add(l)}return new Ts(n.key,i,new $n(o.toArray()),wr.none())}}function yP(n,e,t){n instanceof Nl?function(o,l,c){const h=o.value.clone(),p=n_(o.fieldTransforms,l,c.transformResults);h.setAll(p),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Ts?function(o,l,c){if(!cc(o.precondition,l))return void l.convertToUnknownDocument(c.version);const h=n_(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(yw(o)),p.setAll(h),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(n,e,t):function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function ul(n,e,t,i){return n instanceof Nl?function(l,c,h,p){if(!cc(l.precondition,c))return h;const y=l.value.clone(),v=r_(l.fieldTransforms,p,c);return y.setAll(v),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null}(n,e,t,i):n instanceof Ts?function(l,c,h,p){if(!cc(l.precondition,c))return h;const y=r_(l.fieldTransforms,p,c),v=c.data;return v.setAll(yw(l)),v.setAll(y),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(T=>T.field))}(n,e,t,i):function(l,c,h){return cc(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(n,e,t)}function _P(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),l=hw(i.transform,o||null);l!=null&&(t===null&&(t=bn.empty()),t.set(i.field,l))}return t||null}function t_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&ra(i,o,(l,c)=>mP(l,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Nl extends Wc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ts extends Wc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function yw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function n_(n,e,t){const i=new Map;at(n.length===t.length);for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,h=e.data.field(l.field);i.set(l.field,pP(c,h,t[o]))}return i}function r_(n,e,t){const i=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);i.set(o.field,fP(l,c,e))}return i}class _w extends Wc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vP extends Wc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&yP(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=ul(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=ul(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=cw();return this.mutations.forEach(o=>{const l=e.get(o.key),c=l.overlayedDocument;let h=this.applyToLocalView(c,l.mutatedFields);h=t.has(o.key)?null:h;const p=gw(c,h);p!==null&&i.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Oe.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),$e())}isEqual(e){return this.batchId===e.batchId&&ra(this.mutations,e.mutations,(t,i)=>t_(t,i))&&ra(this.baseMutations,e.baseMutations,(t,i)=>t_(t,i))}}class rp{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){at(e.mutations.length===i.length);let o=function(){return lP}();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,i[c].version);return new rp(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,Je;function IP(n){switch(n){default:return be();case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0}}function vw(n){if(n===void 0)return wi("GRPC error has no .code"),te.UNKNOWN;switch(n){case Dt.OK:return te.OK;case Dt.CANCELLED:return te.CANCELLED;case Dt.UNKNOWN:return te.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return te.INTERNAL;case Dt.UNAVAILABLE:return te.UNAVAILABLE;case Dt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Dt.NOT_FOUND:return te.NOT_FOUND;case Dt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Dt.ABORTED:return te.ABORTED;case Dt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Dt.DATA_LOSS:return te.DATA_LOSS;default:return be()}}(Je=Dt||(Dt={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP=new Xs([4294967295,4294967295],0);function i_(n){const e=SP().encode(n),t=new Bv;return t.update(e),new Uint8Array(t.digest())}function s_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Xs([t,i],0),new Xs([o,l],0)]}class ip{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new rl(`Invalid padding: ${t}`);if(i<0)throw new rl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new rl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new rl(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Xs.fromNumber(this.Te)}Ee(e,t,i){let o=e.add(t.multiply(Xs.fromNumber(i)));return o.compare(RP)===1&&(o=new Xs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=i_(e),[i,o]=s_(t);for(let l=0;l<this.hashCount;l++){const c=this.Ee(i,o,l);if(!this.de(c))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new ip(l,o,t);return i.forEach(h=>c.insert(h)),c}insert(e){if(this.Te===0)return;const t=i_(e),[i,o]=s_(t);for(let l=0;l<this.hashCount;l++){const c=this.Ee(i,o,l);this.Ae(c)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class rl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Dl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Kc(Oe.min(),o,new It(We),Ei(),$e())}}class Dl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Dl(i,t,$e(),$e(),$e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,t,i,o){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=o}}class ww{constructor(e,t){this.targetId=e,this.me=t}}class Ew{constructor(e,t,i=nn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class o_{constructor(){this.fe=0,this.ge=a_(),this.pe=nn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=$e(),t=$e(),i=$e();return this.ge.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:be()}}),new Dl(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=a_()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,at(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class AP{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ei(),this.qe=Xu(),this.Qe=Xu(),this.Ke=new It(We)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const i=this.ze(t);switch(e.state){case 0:this.je(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.je(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),i.De(e.resumeToken));break;default:be()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,o)=>{this.je(o)&&t(o)})}Je(e){const t=e.targetId,i=e.me.count,o=this.Ye(t);if(o){const l=o.target;if(pf(l))if(i===0){const c=new Ae(l.path);this.We(t,c,fn.newNoDocument(c,Oe.min()))}else at(i===1);else{const c=this.Ze(t);if(c!==i){const h=this.Xe(e),p=h?this.et(h,e,c):1;if(p!==0){this.He(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,y)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let c,h;try{c=ms(i).toUint8Array()}catch(p){if(p instanceof Xv)return na("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new ip(c,o,l)}catch(p){return na(p instanceof rl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.Te===0?null:h}et(e,t,i){return t.me.count===i-this.rt(e,t.targetId)?0:2}rt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let o=0;return i.forEach(l=>{const c=this.Le.nt(),h=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.We(t,l,null),o++)}),o}it(e){const t=new Map;this.Be.forEach((l,c)=>{const h=this.Ye(c);if(h){if(l.current&&pf(h.target)){const p=new Ae(h.target.path);this.st(p).has(c)||this.ot(c,p)||this.We(c,p,fn.newNoDocument(p,e))}l.be&&(t.set(c,l.ve()),l.Ce())}});let i=$e();this.Qe.forEach((l,c)=>{let h=!0;c.forEachWhile(p=>{const y=this.Ye(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(l))}),this.ke.forEach((l,c)=>c.setReadTime(e));const o=new Kc(e,t,this.Ke,this.ke,i);return this.ke=Ei(),this.qe=Xu(),this.Qe=Xu(),this.Ke=new It(We),o}Ue(e,t){if(!this.je(e))return;const i=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,i){if(!this.je(e))return;const o=this.ze(e);this.ot(e,t)?o.Fe(t,1):o.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new o_,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new Ft(We),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ft(We),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new o_),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Xu(){return new It(Ae.comparator)}function a_(){return new It(Ae.comparator)}const CP={asc:"ASCENDING",desc:"DESCENDING"},PP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kP={and:"AND",or:"OR"};class xP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function yf(n,e){return n.useProto3Json||zc(e)?e:{value:e}}function Pc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Tw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function NP(n,e){return Pc(n,e.toTimestamp())}function qr(n){return at(!!n),Oe.fromTimestamp(function(t){const i=ps(t);return new Mt(i.seconds,i.nanos)}(n))}function sp(n,e){return _f(n,e).canonicalString()}function _f(n,e){const t=function(o){return new _t(["projects",o.projectId,"databases",o.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Iw(n){const e=_t.fromString(n);return at(Pw(e)),e}function vf(n,e){return sp(n.databaseId,e.path)}function Kh(n,e){const t=Iw(e);if(t.get(1)!==n.databaseId.projectId)throw new ve(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ve(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ae(Rw(t))}function Sw(n,e){return sp(n.databaseId,e)}function DP(n){const e=Iw(n);return e.length===4?_t.emptyPath():Rw(e)}function wf(n){return new _t(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Rw(n){return at(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function l_(n,e,t){return{name:vf(n,e),fields:t.value.mapValue.fields}}function bP(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:be()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(y,v){return y.useProto3Json?(at(v===void 0||typeof v=="string"),nn.fromBase64String(v||"")):(at(v===void 0||v instanceof Buffer||v instanceof Uint8Array),nn.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(y){const v=y.code===void 0?te.UNKNOWN:vw(y.code);return new ve(v,y.message||"")}(c);t=new Ew(i,o,l,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Kh(n,i.document.name),l=qr(i.document.updateTime),c=i.document.createTime?qr(i.document.createTime):Oe.min(),h=new bn({mapValue:{fields:i.document.fields}}),p=fn.newFoundDocument(o,l,c,h),y=i.targetIds||[],v=i.removedTargetIds||[];t=new dc(y,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Kh(n,i.document),l=i.readTime?qr(i.readTime):Oe.min(),c=fn.newNoDocument(o,l),h=i.removedTargetIds||[];t=new dc([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Kh(n,i.document),l=i.removedTargetIds||[];t=new dc([],l,o,null)}else{if(!("filter"in e))return be();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,c=new TP(o,l),h=i.targetId;t=new ww(h,c)}}return t}function LP(n,e){let t;if(e instanceof Nl)t={update:l_(n,e.key,e.value)};else if(e instanceof _w)t={delete:vf(n,e.key)};else if(e instanceof Ts)t={update:l_(n,e.key,e.data),updateMask:$P(e.fieldMask)};else{if(!(e instanceof vP))return be();t={verify:vf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,c){const h=c.transform;if(h instanceof Ac)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof vl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof wl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Cc)return{fieldPath:c.field.canonicalString(),increment:h.Pe};throw be()}(0,i))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:NP(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:be()}(n,e.precondition)),t}function OP(n,e){return n&&n.length>0?(at(e!==void 0),n.map(t=>function(o,l){let c=o.updateTime?qr(o.updateTime):qr(l);return c.isEqual(Oe.min())&&(c=qr(l)),new gP(c,o.transformResults||[])}(t,e))):[]}function VP(n,e){return{documents:[Sw(n,e.path)]}}function MP(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Sw(n,o);const l=function(y){if(y.length!==0)return Cw(Sr.create(y,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(y){if(y.length!==0)return y.map(v=>function(I){return{field:Go(I.field),direction:jP(I.dir)}}(v))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=yf(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{ct:t,parent:o}}function FP(n){let e=DP(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){at(i===1);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=function(T){const I=Aw(T);return I instanceof Sr&&tw(I)?I.getFilters():[I]}(t.where));let c=[];t.orderBy&&(c=function(T){return T.map(I=>function(b){return new _l(Qo(b.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(I))}(t.orderBy));let h=null;t.limit&&(h=function(T){let I;return I=typeof T=="object"?T.value:T,zc(I)?null:I}(t.limit));let p=null;t.startAt&&(p=function(T){const I=!!T.before,C=T.values||[];return new Rc(C,I)}(t.startAt));let y=null;return t.endAt&&(y=function(T){const I=!T.before,C=T.values||[];return new Rc(C,I)}(t.endAt)),rP(e,o,c,l,h,"F",p,y)}function UP(n,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Aw(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Qo(t.unaryFilter.field);return bt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Qo(t.unaryFilter.field);return bt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Qo(t.unaryFilter.field);return bt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Qo(t.unaryFilter.field);return bt.create(c,"!=",{nullValue:"NULL_VALUE"});default:return be()}}(n):n.fieldFilter!==void 0?function(t){return bt.create(Qo(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return be()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Sr.create(t.compositeFilter.filters.map(i=>Aw(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return be()}}(t.compositeFilter.op))}(n):be()}function jP(n){return CP[n]}function zP(n){return PP[n]}function BP(n){return kP[n]}function Go(n){return{fieldPath:n.canonicalString()}}function Qo(n){return en.fromServerFormat(n.fieldPath)}function Cw(n){return n instanceof bt?function(t){if(t.op==="=="){if(Qy(t.value))return{unaryFilter:{field:Go(t.field),op:"IS_NAN"}};if(Gy(t.value))return{unaryFilter:{field:Go(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Qy(t.value))return{unaryFilter:{field:Go(t.field),op:"IS_NOT_NAN"}};if(Gy(t.value))return{unaryFilter:{field:Go(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Go(t.field),op:zP(t.op),value:t.value}}}(n):n instanceof Sr?function(t){const i=t.getFilters().map(o=>Cw(o));return i.length===1?i[0]:{compositeFilter:{op:BP(t.op),filters:i}}}(n):be()}function $P(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Pw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,t,i,o,l=Oe.min(),c=Oe.min(),h=nn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new os(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e){this.ht=e}}function qP(n){const e=FP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?gf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(){this.ln=new KP}addToCollectionParentIndex(e,t){return this.ln.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(fs.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(fs.min())}updateCollectionGroup(e,t,i){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class KP{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Ft(_t.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Ft(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Dn{static withCacheSize(e){return new Dn(e,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dn.DEFAULT_COLLECTION_PERCENTILE=10,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dn.DEFAULT=new Dn(41943040,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dn.DISABLED=new Dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new oa(0)}static Qn(){return new oa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_([n,e],[t,i]){const o=We(n,t);return o===0?We(e,i):o}class GP{constructor(e){this.Gn=e,this.buffer=new Ft(c_),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();c_(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class QP{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){ge("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){fa(t)?ge("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await ha(t)}await this.Yn(3e5)})}}class YP{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(jc.oe);const i=new GP(t);return this.Zn.forEachTarget(e,o=>i.Hn(o.sequenceNumber)).next(()=>this.Zn.er(e,o=>i.Hn(o))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Zn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(u_)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),u_):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let i,o,l,c,h,p,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,c=Date.now(),this.nthSequenceNumber(e,o))).next(T=>(i=T,h=Date.now(),this.removeTargets(e,i,t))).next(T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(T=>(y=Date.now(),Wo()<=Be.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${o} in `+(h-c)+`ms
	Removed ${l} targets in `+(p-h)+`ms
	Removed ${T} documents in `+(y-p)+`ms
Total Duration: ${y-v}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T})))}}function XP(n,e){return new YP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(){this.changes=new ao(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ee.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(i!==null&&ul(i.mutation,o,$n.empty(),Mt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,$e()).next(()=>i))}getLocalViewOfDocuments(e,t,i=$e()){const o=Ys();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,i).next(l=>{let c=nl();return l.forEach((h,p)=>{c=c.insert(h,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const i=Ys();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,$e()))}populateOverlays(e,t,i){const o=[];return i.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,i,o){let l=Ei();const c=ll(),h=function(){return ll()}();return t.forEach((p,y)=>{const v=i.get(y.key);o.has(y.key)&&(v===void 0||v.mutation instanceof Ts)?l=l.insert(y.key,y):v!==void 0?(c.set(y.key,v.mutation.getFieldMask()),ul(v.mutation,y,v.mutation.getFieldMask(),Mt.now())):c.set(y.key,$n.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((y,v)=>c.set(y,v)),t.forEach((y,v)=>{var T;return h.set(y,new ZP(v,(T=c.get(y))!==null&&T!==void 0?T:null))}),h))}recalculateAndSaveOverlays(e,t){const i=ll();let o=new It((c,h)=>c-h),l=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(p=>{const y=t.get(p);if(y===null)return;let v=i.get(p)||$n.empty();v=h.applyToLocalView(y,v),i.set(p,v);const T=(o.get(h.batchId)||$e()).add(p);o=o.insert(h.batchId,T)})}).next(()=>{const c=[],h=o.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),y=p.key,v=p.value,T=cw();v.forEach(I=>{if(!l.has(I)){const C=gw(t.get(I),i.get(I));C!==null&&T.set(I,C),l=l.add(I)}}),c.push(this.documentOverlayCache.saveOverlays(e,y,T))}return ee.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,o){return function(c){return Ae.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):sw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next(l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):ee.resolve(Ys());let h=-1,p=l;return c.next(y=>ee.forEach(y,(v,T)=>(h<T.largestBatchId&&(h=T.largestBatchId),l.get(v)?ee.resolve():this.remoteDocumentCache.getEntry(e,v).next(I=>{p=p.insert(v,I)}))).next(()=>this.populateOverlays(e,y,l)).next(()=>this.computeViews(e,p,y,$e())).next(v=>({batchId:h,changes:uw(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ae(t)).next(i=>{let o=nl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let c=nl();return this.indexManager.getCollectionParents(e,l).next(h=>ee.forEach(h,p=>{const y=function(T,I){return new pa(I,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next(v=>{v.forEach((T,I)=>{c=c.insert(T,I)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o))).next(c=>{l.forEach((p,y)=>{const v=y.getKey();c.get(v)===null&&(c=c.insert(v,fn.newInvalidDocument(v)))});let h=nl();return c.forEach((p,y)=>{const v=l.get(p);v!==void 0&&ul(v.mutation,y,$n.empty(),Mt.now()),Hc(t,y)&&(h=h.insert(p,y))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return ee.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:qr(o.createTime)}}(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(o){return{name:o.name,query:qP(o.bundledQuery),readTime:qr(o.readTime)}}(t)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(){this.overlays=new It(Ae.comparator),this.Er=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ys();return ee.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&i.set(o,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((o,l)=>{this.Tt(e,t,l)}),ee.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Er.get(i);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Er.delete(i)),ee.resolve()}getOverlaysForCollection(e,t,i){const o=Ys(),l=t.length+1,c=new Ae(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>i&&o.set(p.getKey(),p)}return ee.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new It((y,v)=>y-v);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let v=l.get(y.largestBatchId);v===null&&(v=Ys(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const h=Ys(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,v)=>h.set(y,v)),!(h.size()>=o)););return ee.resolve(h)}Tt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const c=this.Er.get(o.largestBatchId).delete(i.key);this.Er.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new EP(t,i));let l=this.Er.get(t);l===void 0&&(l=$e(),this.Er.set(t,l)),this.Er.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(){this.dr=new Ft(Ht.Ar),this.Rr=new Ft(Ht.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const i=new Ht(e,t);this.dr=this.dr.add(i),this.Rr=this.Rr.add(i)}mr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.gr(new Ht(e,t))}pr(e,t){e.forEach(i=>this.removeReference(i,t))}yr(e){const t=new Ae(new _t([])),i=new Ht(t,e),o=new Ht(t,e+1),l=[];return this.Rr.forEachInRange([i,o],c=>{this.gr(c),l.push(c.key)}),l}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new Ae(new _t([])),i=new Ht(t,e),o=new Ht(t,e+1);let l=$e();return this.Rr.forEachInRange([i,o],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new Ht(e,0),i=this.dr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ht{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return Ae.comparator(e.key,t.key)||We(e.br,t.br)}static Vr(e,t){return We(e.br,t.br)||Ae.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new Ft(Ht.Ar)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new wP(l,t,i,o);this.mutationQueue.push(c);for(const h of o)this.vr=this.vr.add(new Ht(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ee.resolve(c)}lookupMutationBatch(e,t){return ee.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Fr(i),l=o<0?0:o;return ee.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ht(t,0),o=new Ht(t,Number.POSITIVE_INFINITY),l=[];return this.vr.forEachInRange([i,o],c=>{const h=this.Cr(c.br);l.push(h)}),ee.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ft(We);return t.forEach(o=>{const l=new Ht(o,0),c=new Ht(o,Number.POSITIVE_INFINITY);this.vr.forEachInRange([l,c],h=>{i=i.add(h.br)})}),ee.resolve(this.Mr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;Ae.isDocumentKey(l)||(l=l.child(""));const c=new Ht(new Ae(l),0);let h=new Ft(We);return this.vr.forEachWhile(p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(h=h.add(p.br)),!0)},c),ee.resolve(this.Mr(h))}Mr(e){const t=[];return e.forEach(i=>{const o=this.Cr(i);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){at(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.vr;return ee.forEach(t.mutations,o=>{const l=new Ht(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.vr=i})}Ln(e){}containsKey(e,t){const i=new Ht(t,0),o=this.vr.firstAfterOrEqual(i);return ee.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e){this.Nr=e,this.docs=function(){return new It(Ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,c=this.Nr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ee.resolve(i?i.document.mutableCopy():fn.newInvalidDocument(t))}getEntries(e,t){let i=Ei();return t.forEach(o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():fn.newInvalidDocument(o))}),ee.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Ei();const c=t.path,h=new Ae(c.child("")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:y,value:{document:v}}=p.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||VC(OC(v),i)<=0||(o.has(v.key)||Hc(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return ee.resolve(l)}getAllFromCollectionGroup(e,t,i,o){be()}Lr(e,t){return ee.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new ok(this)}getSize(e){return ee.resolve(this.size)}}class ok extends JP{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.hr.addEntry(e,o)):this.hr.removeEntry(i)}),ee.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e){this.persistence=e,this.Br=new ao(t=>Zf(t),ep),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.kr=0,this.qr=new op,this.targetCount=0,this.Qr=oa.qn()}forEachTarget(e,t){return this.Br.forEach((i,o)=>t(o)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.kr&&(this.kr=t),ee.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new oa(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.Un(t),ee.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.Br.forEach((c,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.Br.delete(c),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),o++)}),ee.waitFor(l).next(()=>o)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const i=this.Br.get(t)||null;return ee.resolve(i)}addMatchingKeys(e,t,i){return this.qr.mr(t,i),ee.resolve()}removeMatchingKeys(e,t,i){this.qr.pr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(c=>{l.push(o.markPotentiallyOrphaned(e,c))}),ee.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const i=this.qr.Sr(t);return ee.resolve(i)}containsKey(e,t){return ee.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e,t){this.Kr={},this.overlays={},this.$r=new jc(0),this.Ur=!1,this.Ur=!0,this.Wr=new rk,this.referenceDelegate=e(this),this.Gr=new ak(this),this.indexManager=new WP,this.remoteDocumentCache=function(o){return new sk(o)}(i=>this.referenceDelegate.zr(i)),this.serializer=new HP(t),this.jr=new tk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Kr[e.toKey()];return i||(i=new ik(t,this.referenceDelegate),this.Kr[e.toKey()]=i),i}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,i){ge("MemoryPersistence","Starting transaction:",e);const o=new lk(this.$r.next());return this.referenceDelegate.Hr(),i(o).next(l=>this.referenceDelegate.Jr(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Yr(e,t){return ee.or(Object.values(this.Kr).map(i=>()=>i.containsKey(e,t)))}}class lk extends FC{constructor(e){super(),this.currentSequenceNumber=e}}class ap{constructor(e){this.persistence=e,this.Zr=new op,this.Xr=null}static ei(e){return new ap(e)}get ti(){if(this.Xr)return this.Xr;throw be()}addReference(e,t,i){return this.Zr.addReference(i,t),this.ti.delete(i.toString()),ee.resolve()}removeReference(e,t,i){return this.Zr.removeReference(i,t),this.ti.add(i.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(o=>this.ti.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.ti.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.ti,i=>{const o=Ae.fromPath(i);return this.ni(e,o).next(l=>{l||t.removeEntry(o,Oe.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(i=>{i?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return ee.or([()=>ee.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class kc{constructor(e,t){this.persistence=e,this.ri=new ao(i=>zC(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=XP(this,t)}static ei(e,t){return new kc(e,t)}Hr(){}Jr(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(o=>i+o))}nr(e){let t=0;return this.er(e,i=>{t++}).next(()=>t)}er(e,t){return ee.forEach(this.ri,(i,o)=>this.ir(e,i,o).next(l=>l?ee.resolve():t(o)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.Lr(e,c=>this.ir(e,c,t).next(h=>{h||(i++,l.removeEntry(c,Oe.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.ri.set(i,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,i){return this.ri.set(i,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),ee.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=lc(e.data.value)),t}ir(e,t,i){return ee.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.ri.get(t);return ee.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Wi=i,this.Gi=o}static zi(e,t){let i=$e(),o=$e();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new lp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return W0()?8:UC(pn())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.Xi(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.es(e,t,o,i).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new uk;return this.ts(e,t,c).next(h=>{if(l.result=h,this.Hi)return this.ns(e,t,c,h.size)})}).next(()=>l.result)}ns(e,t,i,o){return i.documentReadCount<this.Ji?(Wo()<=Be.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Ko(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),ee.resolve()):(Wo()<=Be.DEBUG&&ge("QueryEngine","Query:",Ko(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Yi*o?(Wo()<=Be.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Ko(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hr(t))):ee.resolve())}Xi(e,t){if(Zy(t))return ee.resolve(null);let i=Hr(t);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=gf(t,null,"F"),i=Hr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const c=$e(...l);return this.Zi.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,i).next(p=>{const y=this.rs(t,h);return this.ss(t,y,c,p.readTime)?this.Xi(e,gf(t,null,"F")):this.os(e,y,t,p)}))})))}es(e,t,i,o){return Zy(t)||o.isEqual(Oe.min())?ee.resolve(null):this.Zi.getDocuments(e,i).next(l=>{const c=this.rs(t,l);return this.ss(t,c,i,o)?ee.resolve(null):(Wo()<=Be.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ko(t)),this.os(e,c,t,LC(o,-1)).next(h=>h))})}rs(e,t){let i=new Ft(aw(e));return t.forEach((o,l)=>{Hc(e,l)&&(i=i.add(l))}),i}ss(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ts(e,t,i){return Wo()<=Be.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Ko(t)),this.Zi.getDocumentsMatchingQuery(e,t,fs.min(),i)}os(e,t,i,o){return this.Zi.getDocumentsMatchingQuery(e,i,o).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,t,i,o){this.persistence=e,this._s=t,this.serializer=o,this.us=new It(We),this.cs=new ao(l=>Zf(l),ep),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(i)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ek(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function hk(n,e,t,i){return new dk(n,e,t,i)}async function xw(n,e){const t=Me(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(l=>(o=l,t.Ps(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const c=[],h=[];let p=$e();for(const y of o){c.push(y.batchId);for(const v of y.mutations)p=p.add(v.key)}for(const y of l){h.push(y.batchId);for(const v of y.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(i,p).next(y=>({Ts:y,removedBatchIds:c,addedBatchIds:h}))})})}function fk(n,e){const t=Me(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),l=t.hs.newChangeBuffer({trackRemovals:!0});return function(h,p,y,v){const T=y.batch,I=T.keys();let C=ee.resolve();return I.forEach(b=>{C=C.next(()=>v.getEntry(p,b)).next(B=>{const F=y.docVersions.get(b);at(F!==null),B.version.compareTo(F)<0&&(T.applyToRemoteDocument(B,y),B.isValidDocument()&&(B.setReadTime(y.commitVersion),v.addEntry(B)))})}),C.next(()=>h.mutationQueue.removeMutationBatch(p,T))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let p=$e();for(let y=0;y<h.mutationResults.length;++y)h.mutationResults[y].transformResults.length>0&&(p=p.add(h.batch.mutations[y].key));return p}(e))).next(()=>t.localDocuments.getDocuments(i,o))})}function Nw(n){const e=Me(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function pk(n,e){const t=Me(n),i=e.snapshotVersion;let o=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.hs.newChangeBuffer({trackRemovals:!0});o=t.us;const h=[];e.targetChanges.forEach((v,T)=>{const I=o.get(T);if(!I)return;h.push(t.Gr.removeMatchingKeys(l,v.removedDocuments,T).next(()=>t.Gr.addMatchingKeys(l,v.addedDocuments,T)));let C=I.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?C=C.withResumeToken(nn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,i)),o=o.insert(T,C),function(B,F,W){return B.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0}(I,C,v)&&h.push(t.Gr.updateTargetData(l,C))});let p=Ei(),y=$e();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))}),h.push(mk(l,c,e.documentUpdates).next(v=>{p=v.Is,y=v.Es})),!i.isEqual(Oe.min())){const v=t.Gr.getLastRemoteSnapshotVersion(l).next(T=>t.Gr.setTargetsMetadata(l,l.currentSequenceNumber,i));h.push(v)}return ee.waitFor(h).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,y)).next(()=>p)}).then(l=>(t.us=o,l))}function mk(n,e,t){let i=$e(),o=$e();return t.forEach(l=>i=i.add(l)),e.getEntries(n,i).next(l=>{let c=Ei();return t.forEach((h,p)=>{const y=l.get(h);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(h)),p.isNoDocument()&&p.version.isEqual(Oe.min())?(e.removeEntry(h,p.readTime),c=c.insert(h,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),c=c.insert(h,p)):ge("LocalStore","Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",p.version)}),{Is:c,Es:o}})}function gk(n,e){const t=Me(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function yk(n,e){const t=Me(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.Gr.getTargetData(i,e).next(l=>l?(o=l,ee.resolve(o)):t.Gr.allocateTargetId(i).next(c=>(o=new os(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Gr.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.us.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.us=t.us.insert(i.targetId,i),t.cs.set(e,i.targetId)),i})}async function Ef(n,e,t){const i=Me(n),o=i.us.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,c=>i.persistence.referenceDelegate.removeTarget(c,o))}catch(c){if(!fa(c))throw c;ge("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}i.us=i.us.remove(e),i.cs.delete(o.target)}function d_(n,e,t){const i=Me(n);let o=Oe.min(),l=$e();return i.persistence.runTransaction("Execute query","readwrite",c=>function(p,y,v){const T=Me(p),I=T.cs.get(v);return I!==void 0?ee.resolve(T.us.get(I)):T.Gr.getTargetData(y,v)}(i,c,Hr(e)).next(h=>{if(h)return o=h.lastLimboFreeSnapshotVersion,i.Gr.getMatchingKeysForTargetId(c,h.targetId).next(p=>{l=p})}).next(()=>i._s.getDocumentsMatchingQuery(c,e,t?o:Oe.min(),t?l:$e())).next(h=>(_k(i,sP(e),h),{documents:h,ds:l})))}function _k(n,e,t){let i=n.ls.get(e)||Oe.min();t.forEach((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),n.ls.set(e,i)}class h_{constructor(){this.activeTargetIds=dP()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vk{constructor(){this._o=new h_,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,i){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new h_,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){ge("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){ge("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ju=null;function Gh(){return Ju===null?Ju=function(){return 268435456+Math.round(2147483648*Math.random())}():Ju++,"0x"+Ju.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn="WebChannelConnection";class Ik extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Fo=i+"://"+t.host,this.Mo=`projects/${o}/databases/${l}`,this.xo=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}Oo(t,i,o,l,c){const h=Gh(),p=this.No(t,i.toUriEncodedString());ge("RestConnection",`Sending RPC '${t}' ${h}:`,p,o);const y={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(y,l,c),this.Bo(t,p,y,o).then(v=>(ge("RestConnection",`Received RPC '${t}' ${h}: `,v),v),v=>{throw na("RestConnection",`RPC '${t}' ${h} failed with error: `,v,"url: ",p,"request:",o),v})}ko(t,i,o,l,c,h){return this.Oo(t,i,o,l,c)}Lo(t,i,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+da}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((l,c)=>t[c]=l),o&&o.headers.forEach((l,c)=>t[c]=l)}No(t,i){const o=Ek[t];return`${this.Fo}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,i,o){const l=Gh();return new Promise((c,h)=>{const p=new $v;p.setWithCredentials(!0),p.listenOnce(Hv.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case ac.NO_ERROR:const v=p.getResponseJson();ge(dn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),c(v);break;case ac.TIMEOUT:ge(dn,`RPC '${e}' ${l} timed out`),h(new ve(te.DEADLINE_EXCEEDED,"Request time out"));break;case ac.HTTP_ERROR:const T=p.getStatus();if(ge(dn,`RPC '${e}' ${l} failed with status:`,T,"response text:",p.getResponseText()),T>0){let I=p.getResponseJson();Array.isArray(I)&&(I=I[0]);const C=I==null?void 0:I.error;if(C&&C.status&&C.message){const b=function(F){const W=F.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(W)>=0?W:te.UNKNOWN}(C.status);h(new ve(b,C.message))}else h(new ve(te.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new ve(te.UNAVAILABLE,"Connection failed."));break;default:be()}}finally{ge(dn,`RPC '${e}' ${l} completed.`)}});const y=JSON.stringify(o);ge(dn,`RPC '${e}' ${l} sending request:`,o),p.send(t,"POST",y,i,15)})}qo(e,t,i){const o=Gh(),l=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Kv(),h=Wv(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Lo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const v=l.join("");ge(dn,`Creating RPC '${e}' stream ${o}: ${v}`,p);const T=c.createWebChannel(v,p);let I=!1,C=!1;const b=new Tk({Eo:F=>{C?ge(dn,`Not sending because RPC '${e}' stream ${o} is closed:`,F):(I||(ge(dn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),I=!0),ge(dn,`RPC '${e}' stream ${o} sending:`,F),T.send(F))},Ao:()=>T.close()}),B=(F,W,Y)=>{F.listen(W,J=>{try{Y(J)}catch(oe){setTimeout(()=>{throw oe},0)}})};return B(T,tl.EventType.OPEN,()=>{C||(ge(dn,`RPC '${e}' stream ${o} transport opened.`),b.So())}),B(T,tl.EventType.CLOSE,()=>{C||(C=!0,ge(dn,`RPC '${e}' stream ${o} transport closed`),b.Do())}),B(T,tl.EventType.ERROR,F=>{C||(C=!0,na(dn,`RPC '${e}' stream ${o} transport errored:`,F),b.Do(new ve(te.UNAVAILABLE,"The operation could not be completed")))}),B(T,tl.EventType.MESSAGE,F=>{var W;if(!C){const Y=F.data[0];at(!!Y);const J=Y,oe=(J==null?void 0:J.error)||((W=J[0])===null||W===void 0?void 0:W.error);if(oe){ge(dn,`RPC '${e}' stream ${o} received error:`,oe);const V=oe.status;let de=function(R){const k=Dt[R];if(k!==void 0)return vw(k)}(V),x=oe.message;de===void 0&&(de=te.INTERNAL,x="Unknown error status: "+V+" with message "+oe.message),C=!0,b.Do(new ve(de,x)),T.close()}else ge(dn,`RPC '${e}' stream ${o} received:`,Y),b.vo(Y)}}),B(h,qv.STAT_EVENT,F=>{F.stat===cf.PROXY?ge(dn,`RPC '${e}' stream ${o} detected buffering proxy`):F.stat===cf.NOPROXY&&ge(dn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{b.bo()},0),b}}function Qh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(n){return new xP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,t,i=1e3,o=1.5,l=6e4){this.li=e,this.timerId=t,this.Qo=i,this.Ko=o,this.$o=l,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),i=Math.max(0,Date.now()-this.Go),o=Math.max(0,t-i);o>0&&ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,o,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e,t,i,o,l,c,h,p){this.li=e,this.Yo=i,this.Zo=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new Dw(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(wi(t.toString()),wi("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.Xo===t&&this.I_(i,o)},i=>{e(()=>{const o=new ve(te.UNKNOWN,"Fetching auth token failed: "+i.message);return this.E_(o)})})}I_(e,t){const i=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{i(()=>this.listener.Ro())}),this.stream.mo(()=>{i(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(o=>{i(()=>this.E_(o))}),this.stream.onMessage(o=>{i(()=>++this.n_==1?this.A_(o):this.onNext(o))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return ge("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(ge("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Sk extends bw{constructor(e,t,i,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=bP(this.serializer,e),i=function(l){if(!("targetChange"in l))return Oe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Oe.min():c.readTime?qr(c.readTime):Oe.min()}(e);return this.listener.R_(t,i)}V_(e){const t={};t.database=wf(this.serializer),t.addTarget=function(l,c){let h;const p=c.target;if(h=pf(p)?{documents:VP(l,p)}:{query:MP(l,p).ct},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=Tw(l,c.resumeToken);const y=yf(l,c.expectedCount);y!==null&&(h.expectedCount=y)}else if(c.snapshotVersion.compareTo(Oe.min())>0){h.readTime=Pc(l,c.snapshotVersion.toTimestamp());const y=yf(l,c.expectedCount);y!==null&&(h.expectedCount=y)}return h}(this.serializer,e);const i=UP(this.serializer,e);i&&(t.labels=i),this.c_(t)}m_(e){const t={};t.database=wf(this.serializer),t.removeTarget=e,this.c_(t)}}class Rk extends bw{constructor(e,t,i,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,t){return this.connection.qo("Write",e,t)}A_(e){return at(!!e.streamToken),this.lastStreamToken=e.streamToken,at(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){at(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=OP(e.writeResults,e.commitTime),i=qr(e.commitTime);return this.listener.y_(i,t)}w_(){const e={};e.database=wf(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>LP(this.serializer,i))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak extends class{}{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.S_=!1}b_(){if(this.S_)throw new ve(te.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Oo(e,_f(t,i),o,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ve(te.UNKNOWN,l.toString())})}ko(e,t,i,o,l){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.ko(e,_f(t,i),o,c,h,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ve(te.UNKNOWN,c.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class Ck{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(wi(t),this.C_=!1):ge("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=l,this.Q_.uo(c=>{i.enqueueAndForget(async()=>{lo(this)&&(ge("RemoteStore","Restarting streams for network reachability change."),await async function(p){const y=Me(p);y.k_.add(4),await bl(y),y.K_.set("Unknown"),y.k_.delete(4),await Qc(y)}(this))})}),this.K_=new Ck(i,o)}}async function Qc(n){if(lo(n))for(const e of n.q_)await e(!0)}async function bl(n){for(const e of n.q_)await e(!1)}function Lw(n,e){const t=Me(n);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),hp(t)?dp(t):ma(t).s_()&&cp(t,e))}function up(n,e){const t=Me(n),i=ma(t);t.B_.delete(e),i.s_()&&Ow(t,e),t.B_.size===0&&(i.s_()?i.a_():lo(t)&&t.K_.set("Unknown"))}function cp(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ma(n).V_(e)}function Ow(n,e){n.U_.xe(e),ma(n).m_(e)}function dp(n){n.U_=new AP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.B_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),ma(n).start(),n.K_.F_()}function hp(n){return lo(n)&&!ma(n).i_()&&n.B_.size>0}function lo(n){return Me(n).k_.size===0}function Vw(n){n.U_=void 0}async function kk(n){n.K_.set("Online")}async function xk(n){n.B_.forEach((e,t)=>{cp(n,e)})}async function Nk(n,e){Vw(n),hp(n)?(n.K_.O_(e),dp(n)):n.K_.set("Unknown")}async function Dk(n,e,t){if(n.K_.set("Online"),e instanceof Ew&&e.state===2&&e.cause)try{await async function(o,l){const c=l.cause;for(const h of l.targetIds)o.B_.has(h)&&(await o.remoteSyncer.rejectListen(h,c),o.B_.delete(h),o.U_.removeTarget(h))}(n,e)}catch(i){ge("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await xc(n,i)}else if(e instanceof dc?n.U_.$e(e):e instanceof ww?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(Oe.min()))try{const i=await Nw(n.localStore);t.compareTo(i)>=0&&await function(l,c){const h=l.U_.it(c);return h.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.B_.get(y);v&&l.B_.set(y,v.withResumeToken(p.resumeToken,c))}}),h.targetMismatches.forEach((p,y)=>{const v=l.B_.get(p);if(!v)return;l.B_.set(p,v.withResumeToken(nn.EMPTY_BYTE_STRING,v.snapshotVersion)),Ow(l,p);const T=new os(v.target,p,y,v.sequenceNumber);cp(l,T)}),l.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(i){ge("RemoteStore","Failed to raise snapshot:",i),await xc(n,i)}}async function xc(n,e,t){if(!fa(e))throw e;n.k_.add(1),await bl(n),n.K_.set("Offline"),t||(t=()=>Nw(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ge("RemoteStore","Retrying IndexedDB access"),await t(),n.k_.delete(1),await Qc(n)})}function Mw(n,e){return e().catch(t=>xc(n,t,e))}async function Yc(n){const e=Me(n),t=ys(e);let i=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;bk(e);)try{const o=await gk(e.localStore,i);if(o===null){e.L_.length===0&&t.a_();break}i=o.batchId,Lk(e,o)}catch(o){await xc(e,o)}Fw(e)&&Uw(e)}function bk(n){return lo(n)&&n.L_.length<10}function Lk(n,e){n.L_.push(e);const t=ys(n);t.s_()&&t.f_&&t.g_(e.mutations)}function Fw(n){return lo(n)&&!ys(n).i_()&&n.L_.length>0}function Uw(n){ys(n).start()}async function Ok(n){ys(n).w_()}async function Vk(n){const e=ys(n);for(const t of n.L_)e.g_(t.mutations)}async function Mk(n,e,t){const i=n.L_.shift(),o=rp.from(i,e,t);await Mw(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),await Yc(n)}async function Fk(n,e){e&&ys(n).f_&&await async function(i,o){if(function(c){return IP(c)&&c!==te.ABORTED}(o.code)){const l=i.L_.shift();ys(i).__(),await Mw(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Yc(i)}}(n,e),Fw(n)&&Uw(n)}async function p_(n,e){const t=Me(n);t.asyncQueue.verifyOperationInProgress(),ge("RemoteStore","RemoteStore received new credentials");const i=lo(t);t.k_.add(3),await bl(t),i&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await Qc(t)}async function Uk(n,e){const t=Me(n);e?(t.k_.delete(2),await Qc(t)):e||(t.k_.add(2),await bl(t),t.K_.set("Unknown"))}function ma(n){return n.W_||(n.W_=function(t,i,o){const l=Me(t);return l.b_(),new Sk(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(n.datastore,n.asyncQueue,{Ro:kk.bind(null,n),mo:xk.bind(null,n),po:Nk.bind(null,n),R_:Dk.bind(null,n)}),n.q_.push(async e=>{e?(n.W_.__(),hp(n)?dp(n):n.K_.set("Unknown")):(await n.W_.stop(),Vw(n))})),n.W_}function ys(n){return n.G_||(n.G_=function(t,i,o){const l=Me(t);return l.b_(),new Rk(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:Ok.bind(null,n),po:Fk.bind(null,n),p_:Vk.bind(null,n),y_:Mk.bind(null,n)}),n.q_.push(async e=>{e?(n.G_.__(),await Yc(n)):(await n.G_.stop(),n.L_.length>0&&(ge("RemoteStore",`Stopping write stream with ${n.L_.length} pending writes`),n.L_=[]))})),n.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new cs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const c=Date.now()+i,h=new fp(e,t,c,o,l);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pp(n,e){if(wi("AsyncQueue",`${e}: ${n}`),fa(n))return new ve(te.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{static emptySet(e){return new ea(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ae.comparator(t.key,i.key):(t,i)=>Ae.comparator(t.key,i.key),this.keyedMap=nl(),this.sortedSet=new It(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ea)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new ea;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(){this.z_=new It(Ae.comparator)}track(e){const t=e.doc.key,i=this.z_.get(t);i?e.type!==0&&i.type===3?this.z_=this.z_.insert(t,e):e.type===3&&i.type!==1?this.z_=this.z_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.z_=this.z_.remove(t):e.type===1&&i.type===2?this.z_=this.z_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):be():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,i)=>{e.push(i)}),e}}class aa{constructor(e,t,i,o,l,c,h,p,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,l){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new aa(e,t,ea.emptySet(t),c,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$c(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class zk{constructor(){this.queries=g_(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,i){const o=Me(t),l=o.queries;o.queries=g_(),l.forEach((c,h)=>{for(const p of h.J_)p.onError(i)})})(this,new ve(te.ABORTED,"Firestore shutting down"))}}function g_(){return new ao(n=>ow(n),$c)}async function jw(n,e){const t=Me(n);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Y_()&&e.Z_()&&(i=2):(l=new jk,i=e.Z_()?0:1);try{switch(i){case 0:l.H_=await t.onListen(o,!0);break;case 1:l.H_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const h=pp(c,`Initialization of query '${Ko(e.query)}' failed`);return void e.onError(h)}t.queries.set(o,l),l.J_.push(e),e.ea(t.onlineState),l.H_&&e.ta(l.H_)&&mp(t)}async function zw(n,e){const t=Me(n),i=e.query;let o=3;const l=t.queries.get(i);if(l){const c=l.J_.indexOf(e);c>=0&&(l.J_.splice(c,1),l.J_.length===0?o=e.Z_()?0:1:!l.Y_()&&e.Z_()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function Bk(n,e){const t=Me(n);let i=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const h of c.J_)h.ta(o)&&(i=!0);c.H_=o}}i&&mp(t)}function $k(n,e,t){const i=Me(n),o=i.queries.get(e);if(o)for(const l of o.J_)l.onError(t);i.queries.delete(e)}function mp(n){n.X_.forEach(e=>{e.next()})}var Tf,y_;(y_=Tf||(Tf={})).na="default",y_.Cache="cache";class Bw{constructor(e,t,i){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=i||{}}ta(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new aa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const i=t!=="Offline";return(!this.options.ua||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=aa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Tf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e){this.key=e}}class Hw{constructor(e){this.key=e}}class Hk{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=$e(),this.mutatedKeys=$e(),this.Va=aw(e),this.ma=new ea(this.Va)}get fa(){return this.da}ga(e,t){const i=t?t.pa:new m_,o=t?t.ma:this.ma;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,h=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((v,T)=>{const I=o.get(v),C=Hc(this.query,T)?T:null,b=!!I&&this.mutatedKeys.has(I.key),B=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let F=!1;I&&C?I.data.isEqual(C.data)?b!==B&&(i.track({type:3,doc:C}),F=!0):this.ya(I,C)||(i.track({type:2,doc:C}),F=!0,(p&&this.Va(C,p)>0||y&&this.Va(C,y)<0)&&(h=!0)):!I&&C?(i.track({type:0,doc:C}),F=!0):I&&!C&&(i.track({type:1,doc:I}),F=!0,(p||y)&&(h=!0)),F&&(C?(c=c.add(C),l=B?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{ma:c,pa:i,ss:h,mutatedKeys:l}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const c=e.pa.j_();c.sort((v,T)=>function(C,b){const B=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be()}};return B(C)-B(b)}(v.type,T.type)||this.Va(v.doc,T.doc)),this.wa(i),o=o!=null&&o;const h=t&&!o?this.Sa():[],p=this.Ra.size===0&&this.current&&!o?1:0,y=p!==this.Aa;return this.Aa=p,c.length!==0||y?{snapshot:new aa(this.query,e.ma,l,c,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),ba:h}:{ba:h}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new m_,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=$e(),this.ma.forEach(i=>{this.Da(i.key)&&(this.Ra=this.Ra.add(i.key))});const t=[];return e.forEach(i=>{this.Ra.has(i)||t.push(new Hw(i))}),this.Ra.forEach(i=>{e.has(i)||t.push(new $w(i))}),t}va(e){this.da=e.ds,this.Ra=$e();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return aa.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class qk{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Wk{constructor(e){this.key=e,this.Fa=!1}}class Kk{constructor(e,t,i,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Ma={},this.xa=new ao(h=>ow(h),$c),this.Oa=new Map,this.Na=new Set,this.La=new It(Ae.comparator),this.Ba=new Map,this.ka=new op,this.qa={},this.Qa=new Map,this.Ka=oa.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function Gk(n,e,t=!0){const i=Yw(n);let o;const l=i.xa.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Ca()):o=await qw(i,e,t,!0),o}async function Qk(n,e){const t=Yw(n);await qw(t,e,!0,!1)}async function qw(n,e,t,i){const o=await yk(n.localStore,Hr(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let h;return i&&(h=await Yk(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&Lw(n.remoteStore,o),h}async function Yk(n,e,t,i,o){n.Ua=(T,I,C)=>async function(B,F,W,Y){let J=F.view.ga(W);J.ss&&(J=await d_(B.localStore,F.query,!1).then(({documents:x})=>F.view.ga(x,J)));const oe=Y&&Y.targetChanges.get(F.targetId),V=Y&&Y.targetMismatches.get(F.targetId)!=null,de=F.view.applyChanges(J,B.isPrimaryClient,oe,V);return v_(B,F.targetId,de.ba),de.snapshot}(n,T,I,C);const l=await d_(n.localStore,e,!0),c=new Hk(e,l.ds),h=c.ga(l.documents),p=Dl.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),y=c.applyChanges(h,n.isPrimaryClient,p);v_(n,t,y.ba);const v=new qk(e,t,c);return n.xa.set(e,v),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),y.snapshot}async function Xk(n,e,t){const i=Me(n),o=i.xa.get(e),l=i.Oa.get(o.targetId);if(l.length>1)return i.Oa.set(o.targetId,l.filter(c=>!$c(c,e))),void i.xa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Ef(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&up(i.remoteStore,o.targetId),If(i,o.targetId)}).catch(ha)):(If(i,o.targetId),await Ef(i.localStore,o.targetId,!0))}async function Jk(n,e){const t=Me(n),i=t.xa.get(e),o=t.Oa.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),up(t.remoteStore,i.targetId))}async function Zk(n,e,t){const i=o1(n);try{const o=await function(c,h){const p=Me(c),y=Mt.now(),v=h.reduce((C,b)=>C.add(b.key),$e());let T,I;return p.persistence.runTransaction("Locally write mutations","readwrite",C=>{let b=Ei(),B=$e();return p.hs.getEntries(C,v).next(F=>{b=F,b.forEach((W,Y)=>{Y.isValidDocument()||(B=B.add(W))})}).next(()=>p.localDocuments.getOverlayedDocuments(C,b)).next(F=>{T=F;const W=[];for(const Y of h){const J=_P(Y,T.get(Y.key).overlayedDocument);J!=null&&W.push(new Ts(Y.key,J,Jv(J.value.mapValue),wr.exists(!0)))}return p.mutationQueue.addMutationBatch(C,y,W,h)}).next(F=>{I=F;const W=F.applyToLocalDocumentSet(T,B);return p.documentOverlayCache.saveOverlays(C,F.batchId,W)})}).then(()=>({batchId:I.batchId,changes:uw(T)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(c,h,p){let y=c.qa[c.currentUser.toKey()];y||(y=new It(We)),y=y.insert(h,p),c.qa[c.currentUser.toKey()]=y}(i,o.batchId,t),await Ll(i,o.changes),await Yc(i.remoteStore)}catch(o){const l=pp(o,"Failed to persist write");t.reject(l)}}async function Ww(n,e){const t=Me(n);try{const i=await pk(t.localStore,e);e.targetChanges.forEach((o,l)=>{const c=t.Ba.get(l);c&&(at(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.Fa=!0:o.modifiedDocuments.size>0?at(c.Fa):o.removedDocuments.size>0&&(at(c.Fa),c.Fa=!1))}),await Ll(t,i,e)}catch(i){await ha(i)}}function __(n,e,t){const i=Me(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.xa.forEach((l,c)=>{const h=c.view.ea(e);h.snapshot&&o.push(h.snapshot)}),function(c,h){const p=Me(c);p.onlineState=h;let y=!1;p.queries.forEach((v,T)=>{for(const I of T.J_)I.ea(h)&&(y=!0)}),y&&mp(p)}(i.eventManager,e),o.length&&i.Ma.R_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function e1(n,e,t){const i=Me(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Ba.get(e),l=o&&o.key;if(l){let c=new It(Ae.comparator);c=c.insert(l,fn.newNoDocument(l,Oe.min()));const h=$e().add(l),p=new Kc(Oe.min(),new Map,new It(We),c,h);await Ww(i,p),i.La=i.La.remove(l),i.Ba.delete(e),gp(i)}else await Ef(i.localStore,e,!1).then(()=>If(i,e,t)).catch(ha)}async function t1(n,e){const t=Me(n),i=e.batch.batchId;try{const o=await fk(t.localStore,e);Gw(t,i,null),Kw(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Ll(t,o)}catch(o){await ha(o)}}async function n1(n,e,t){const i=Me(n);try{const o=await function(c,h){const p=Me(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let v;return p.mutationQueue.lookupMutationBatch(y,h).next(T=>(at(T!==null),v=T.keys(),p.mutationQueue.removeMutationBatch(y,T))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,v,h)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v)).next(()=>p.localDocuments.getDocuments(y,v))})}(i.localStore,e);Gw(i,e,t),Kw(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Ll(i,o)}catch(o){await ha(o)}}function Kw(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function Gw(n,e,t){const i=Me(n);let o=i.qa[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.qa[i.currentUser.toKey()]=o}}function If(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Oa.get(e))n.xa.delete(i),t&&n.Ma.Wa(i,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(i=>{n.ka.containsKey(i)||Qw(n,i)})}function Qw(n,e){n.Na.delete(e.path.canonicalString());const t=n.La.get(e);t!==null&&(up(n.remoteStore,t),n.La=n.La.remove(e),n.Ba.delete(t),gp(n))}function v_(n,e,t){for(const i of t)i instanceof $w?(n.ka.addReference(i.key,e),r1(n,i)):i instanceof Hw?(ge("SyncEngine","Document no longer in limbo: "+i.key),n.ka.removeReference(i.key,e),n.ka.containsKey(i.key)||Qw(n,i.key)):be()}function r1(n,e){const t=e.key,i=t.path.canonicalString();n.La.get(t)||n.Na.has(i)||(ge("SyncEngine","New document in limbo: "+t),n.Na.add(i),gp(n))}function gp(n){for(;n.Na.size>0&&n.La.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new Ae(_t.fromString(e)),i=n.Ka.next();n.Ba.set(i,new Wk(t)),n.La=n.La.insert(t,i),Lw(n.remoteStore,new os(Hr(tp(t.path)),i,"TargetPurposeLimboResolution",jc.oe))}}async function Ll(n,e,t){const i=Me(n),o=[],l=[],c=[];i.xa.isEmpty()||(i.xa.forEach((h,p)=>{c.push(i.Ua(p,e,t).then(y=>{var v;if((y||t)&&i.isPrimaryClient){const T=y?!y.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(y){o.push(y);const T=lp.zi(p.targetId,y);l.push(T)}}))}),await Promise.all(c),i.Ma.R_(o),await async function(p,y){const v=Me(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>ee.forEach(y,I=>ee.forEach(I.Wi,C=>v.persistence.referenceDelegate.addReference(T,I.targetId,C)).next(()=>ee.forEach(I.Gi,C=>v.persistence.referenceDelegate.removeReference(T,I.targetId,C)))))}catch(T){if(!fa(T))throw T;ge("LocalStore","Failed to update sequence numbers: "+T)}for(const T of y){const I=T.targetId;if(!T.fromCache){const C=v.us.get(I),b=C.snapshotVersion,B=C.withLastLimboFreeSnapshotVersion(b);v.us=v.us.insert(I,B)}}}(i.localStore,l))}async function i1(n,e){const t=Me(n);if(!t.currentUser.isEqual(e)){ge("SyncEngine","User change. New user:",e.toKey());const i=await xw(t.localStore,e);t.currentUser=e,function(l,c){l.Qa.forEach(h=>{h.forEach(p=>{p.reject(new ve(te.CANCELLED,c))})}),l.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ll(t,i.Ts)}}function s1(n,e){const t=Me(n),i=t.Ba.get(e);if(i&&i.Fa)return $e().add(i.key);{let o=$e();const l=t.Oa.get(e);if(!l)return o;for(const c of l){const h=t.xa.get(c);o=o.unionWith(h.view.fa)}return o}}function Yw(n){const e=Me(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ww.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=s1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=e1.bind(null,e),e.Ma.R_=Bk.bind(null,e.eventManager),e.Ma.Wa=$k.bind(null,e.eventManager),e}function o1(n){const e=Me(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=t1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=n1.bind(null,e),e}class Nc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gc(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return hk(this.persistence,new ck,e.initialUser,this.serializer)}ja(e){return new kw(ap.ei,this.serializer)}za(e){return new vk}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nc.provider={build:()=>new Nc};class a1 extends Nc{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){at(this.persistence.referenceDelegate instanceof kc);const i=this.persistence.referenceDelegate.garbageCollector;return new QP(i,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?Dn.withCacheSize(this.cacheSizeBytes):Dn.DEFAULT;return new kw(i=>kc.ei(i,t),this.serializer)}}class Sf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>__(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=i1.bind(null,this.syncEngine),await Uk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new zk}()}createDatastore(e){const t=Gc(e.databaseInfo.databaseId),i=function(l){return new Ik(l)}(e.databaseInfo);return function(l,c,h,p){return new Ak(l,c,h,p)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,o,l,c,h){return new Pk(i,o,l,c,h)}(this.localStore,this.datastore,e.asyncQueue,t=>__(this.syncEngine,t,0),function(){return f_.p()?new f_:new wk}())}createSyncEngine(e,t){return function(o,l,c,h,p,y,v){const T=new Kk(o,l,c,h,p,y);return v&&(T.$a=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Me(o);ge("RemoteStore","RemoteStore shutting down."),l.k_.add(5),await bl(l),l.Q_.shutdown(),l.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Sf.provider={build:()=>new Sf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):wi("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=hn.UNAUTHENTICATED,this.clientId=Qv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async c=>{ge("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(ge("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new cs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=pp(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Yh(n,e){n.asyncQueue.verifyOperationInProgress(),ge("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async o=>{i.isEqual(o)||(await xw(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function w_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await u1(n);ge("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>p_(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>p_(e.remoteStore,o)),n._onlineComponents=e}async function u1(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge("FirestoreClient","Using user provided OfflineComponentProvider");try{await Yh(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===te.FAILED_PRECONDITION||o.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;na("Error using user provided cache. Falling back to memory cache: "+t),await Yh(n,new Nc)}}else ge("FirestoreClient","Using default OfflineComponentProvider"),await Yh(n,new a1(void 0));return n._offlineComponents}async function Jw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge("FirestoreClient","Using user provided OnlineComponentProvider"),await w_(n,n._uninitializedComponentsProvider._online)):(ge("FirestoreClient","Using default OnlineComponentProvider"),await w_(n,new Sf))),n._onlineComponents}function c1(n){return Jw(n).then(e=>e.syncEngine)}async function Rf(n){const e=await Jw(n),t=e.eventManager;return t.onListen=Gk.bind(null,e.syncEngine),t.onUnlisten=Xk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Qk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Jk.bind(null,e.syncEngine),t}function d1(n,e,t={}){const i=new cs;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,h,p,y){const v=new Xw({next:I=>{v.eu(),c.enqueueAndForget(()=>zw(l,T)),I.fromCache&&p.source==="server"?y.reject(new ve(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(I)},error:I=>y.reject(I)}),T=new Bw(h,v,{includeMetadataChanges:!0,ua:!0});return jw(l,T)}(await Rf(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(n,e,t){if(!t)throw new ve(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function h1(n,e,t,i){if(e===!0&&i===!0)throw new ve(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function T_(n){if(!Ae.isDocumentKey(n))throw new ve(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function I_(n){if(Ae.isDocumentKey(n))throw new ve(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Xc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":be()}function Er(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ve(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xc(n);throw new ve(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ve(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ve(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}h1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Zw((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ve(te.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ve(te.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ve(te.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new S_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new S_(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new RC;switch(i.type){case"firstParty":return new kC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ve(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=E_.get(t);i&&(ge("ComponentProvider","Removing Datastore"),E_.delete(t),i.terminate())}(this),Promise.resolve()}}function f1(n,e,t,i={}){var o;const l=(n=Er(n,Jc))._getSettings(),c=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==c&&na("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},l),{host:c,ssl:!1})),i.mockUserToken){let h,p;if(typeof i.mockUserToken=="string")h=i.mockUserToken,p=hn.MOCK_USER;else{h=U0(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const y=i.mockUserToken.sub||i.mockUserToken.user_id;if(!y)throw new ve(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new hn(y)}n._authCredentials=new AC(new Gv(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Is(this.firestore,e,this._query)}}class wn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ds(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wn(this.firestore,e,this._key)}}class ds extends Is{constructor(e,t,i){super(e,t,tp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new Ae(e))}withConverter(e){return new ds(this.firestore,e,this._path)}}function Ws(n,e,...t){if(n=Ut(n),eE("collection","path",e),n instanceof Jc){const i=_t.fromString(e,...t);return I_(i),new ds(n,null,i)}{if(!(n instanceof wn||n instanceof ds))throw new ve(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(_t.fromString(e,...t));return I_(i),new ds(n.firestore,null,i)}}function Zc(n,e,...t){if(n=Ut(n),arguments.length===1&&(e=Qv.newId()),eE("doc","path",e),n instanceof Jc){const i=_t.fromString(e,...t);return T_(i),new wn(n,null,new Ae(i))}{if(!(n instanceof wn||n instanceof ds))throw new ve(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(_t.fromString(e,...t));return T_(i),new wn(n.firestore,n instanceof ds?n.converter:null,new Ae(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new Dw(this,"async_queue_retry"),this.fu=()=>{const i=Qh();i&&ge("AsyncQueue","Visibility state changed to "+i.visibilityState),this.r_.Jo()},this.gu=e;const t=Qh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=Qh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new cs;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!fa(e))throw e;ge("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(i=>{this.Au=i,this.Ru=!1;const o=function(c){let h=c.message||"";return c.stack&&(h=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),h}(i);throw wi("INTERNAL UNHANDLED ERROR: ",o),i}).then(i=>(this.Ru=!1,i))));return this.gu=t,t}enqueueAfterDelay(e,t,i){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const o=fp.createAndSchedule(this,e,t,i,l=>this.Su(l));return this.du.push(o),o}pu(){this.Au&&be()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}function A_(n){return function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of i)if(l in o&&typeof o[l]=="function")return!0;return!1}(n,["next","error","complete"])}class ro extends Jc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new R_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new R_(e),this._firestoreClient=void 0,await e}}}function p1(n,e){const t=typeof n=="object"?n:iv(),i=typeof n=="string"?n:"(default)",o=jf(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=M0("firestore");l&&f1(o,...l)}return o}function yp(n){if(n._terminated)throw new ve(te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||m1(n),n._firestoreClient}function m1(n){var e,t,i;const o=n._freezeSettings(),l=function(h,p,y,v){return new HC(h,p,y,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,Zw(v.experimentalLongPollingOptions),v.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new l1(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(h){const p=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e){this._byteString=e}static fromBase64String(e){try{return new la(nn.fromBase64String(e))}catch(t){throw new ve(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new la(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1=/^__.*__$/;class y1{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ts(e,this.data,this.fieldMask,t,this.fieldTransforms):new Nl(e,this.data,t,this.fieldTransforms)}}class tE{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ts(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function nE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be()}}class Ep{constructor(e,t,i,o,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Fu(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Ep(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:i,Nu:!1});return o.Lu(e),o}Bu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:i,Nu:!1});return o.Fu(),o}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Dc(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(nE(this.Mu)&&g1.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class _1{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Gc(e)}$u(e,t,i,o=!1){return new Ep({Mu:e,methodName:t,Ku:i,path:en.emptyPath(),Nu:!1,Qu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function td(n){const e=n._freezeSettings(),t=Gc(n._databaseId);return new _1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function rE(n,e,t,i,o,l={}){const c=n.$u(l.merge||l.mergeFields?2:0,e,t,o);Tp("Data must be an object, but it was:",c,i);const h=iE(i,c);let p,y;if(l.merge)p=new $n(c.fieldMask),y=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const T of l.mergeFields){const I=Af(e,T,t);if(!c.contains(I))throw new ve(te.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);oE(v,I)||v.push(I)}p=new $n(v),y=c.fieldTransforms.filter(T=>p.covers(T.field))}else p=null,y=c.fieldTransforms;return new y1(new bn(h),p,y)}class nd extends _p{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nd}}function v1(n,e,t,i){const o=n.$u(1,e,t);Tp("Data must be an object, but it was:",o,i);const l=[],c=bn.empty();Es(i,(p,y)=>{const v=Ip(e,p,t);y=Ut(y);const T=o.Bu(v);if(y instanceof nd)l.push(v);else{const I=Ol(y,T);I!=null&&(l.push(v),c.set(v,I))}});const h=new $n(l);return new tE(c,h,o.fieldTransforms)}function w1(n,e,t,i,o,l){const c=n.$u(1,e,t),h=[Af(e,i,t)],p=[o];if(l.length%2!=0)throw new ve(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<l.length;I+=2)h.push(Af(e,l[I])),p.push(l[I+1]);const y=[],v=bn.empty();for(let I=h.length-1;I>=0;--I)if(!oE(y,h[I])){const C=h[I];let b=p[I];b=Ut(b);const B=c.Bu(C);if(b instanceof nd)y.push(C);else{const F=Ol(b,B);F!=null&&(y.push(C),v.set(C,F))}}const T=new $n(y);return new tE(v,T,c.fieldTransforms)}function E1(n,e,t,i=!1){return Ol(t,n.$u(i?4:3,e))}function Ol(n,e){if(sE(n=Ut(n)))return Tp("Unsupported field value:",e,n),iE(n,e);if(n instanceof _p)return function(i,o){if(!nE(o.Mu))throw o.qu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.qu(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(i,o){const l=[];let c=0;for(const h of i){let p=Ol(h,o.ku(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}}(n,e)}return function(i,o){if((i=Ut(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return hP(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Mt.fromDate(i);return{timestampValue:Pc(o.serializer,l)}}if(i instanceof Mt){const l=new Mt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Pc(o.serializer,l)}}if(i instanceof vp)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof la)return{bytesValue:Tw(o.serializer,i._byteString)};if(i instanceof wn){const l=o.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw o.qu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:sp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof wp)return function(c,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw h.qu("VectorValues must only contain numeric values.");return np(h.serializer,p)})}}}}}}(i,o);throw o.qu(`Unsupported field value: ${Xc(i)}`)}(n,e)}function iE(n,e){const t={};return Yv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Es(n,(i,o)=>{const l=Ol(o,e.Ou(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function sE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Mt||n instanceof vp||n instanceof la||n instanceof wn||n instanceof _p||n instanceof wp)}function Tp(n,e,t){if(!sE(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const i=Xc(t);throw i==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+i)}}function Af(n,e,t){if((e=Ut(e))instanceof ed)return e._internalPath;if(typeof e=="string")return Ip(n,e);throw Dc("Field path arguments must be of type string or ",n,!1,void 0,t)}const T1=new RegExp("[~\\*/\\[\\]]");function Ip(n,e,t){if(e.search(T1)>=0)throw Dc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ed(...e.split("."))._internalPath}catch{throw Dc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Dc(n,e,t,i,o){const l=i&&!i.isEmpty(),c=o!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${o}`),p+=")"),new ve(te.INVALID_ARGUMENT,h+n+p)}function oE(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new I1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(rd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class I1 extends aE{data(){return super.data()}}function rd(n,e){return typeof e=="string"?Ip(n,e):e instanceof ed?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ve(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sp{}class uE extends Sp{}function S1(n,e,...t){let i=[];e instanceof Sp&&i.push(e),i=i.concat(t),function(l){const c=l.filter(p=>p instanceof Rp).length,h=l.filter(p=>p instanceof id).length;if(c>1||c>0&&h>0)throw new ve(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)n=o._apply(n);return n}class id extends uE{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new id(e,t,i)}_apply(e){const t=this._parse(e);return cE(e._query,t),new Is(e.firestore,e.converter,mf(e._query,t))}_parse(e){const t=td(e.firestore);return function(l,c,h,p,y,v,T){let I;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ve(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){P_(T,v);const C=[];for(const b of T)C.push(C_(p,l,b));I={arrayValue:{values:C}}}else I=C_(p,l,T)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||P_(T,v),I=E1(h,c,T,v==="in"||v==="not-in");return bt.create(y,v,I)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function R1(n,e,t){const i=e,o=rd("where",n);return id._create(o,i,t)}class Rp extends Sp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Rp(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Sr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,l){let c=o;const h=l.getFlattenedFilters();for(const p of h)cE(c,p),c=mf(c,p)}(e._query,t),new Is(e.firestore,e.converter,mf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ap extends uE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ap(e,t)}_apply(e){const t=function(o,l,c){if(o.startAt!==null)throw new ve(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ve(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _l(l,c)}(e._query,this._field,this._direction);return new Is(e.firestore,e.converter,function(o,l){const c=o.explicitOrderBy.concat([l]);return new pa(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function A1(n,e="asc"){const t=e,i=rd("orderBy",n);return Ap._create(i,t)}function C_(n,e,t){if(typeof(t=Ut(t))=="string"){if(t==="")throw new ve(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sw(e)&&t.indexOf("/")!==-1)throw new ve(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(_t.fromString(t));if(!Ae.isDocumentKey(i))throw new ve(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ky(n,new Ae(i))}if(t instanceof wn)return Ky(n,t._key);throw new ve(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xc(t)}.`)}function P_(n,e){if(!Array.isArray(n)||n.length===0)throw new ve(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function cE(n,e){const t=function(o,l){for(const c of o)for(const h of c.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ve(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ve(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class C1{convertValue(e,t="none"){switch(gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ms(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw be()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Es(e,(o,l)=>{i[o]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(c=>kt(c.doubleValue));return new wp(l)}convertGeoPoint(e){return new vp(kt(e.latitude),kt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Bc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(ml(e));default:return null}}convertTimestamp(e){const t=ps(e);return new Mt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=_t.fromString(e);at(Pw(i));const o=new gl(i.get(1),i.get(3)),l=new Ae(i.popFirst(5));return o.isEqual(t)||wi(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(n,e,t){let i;return i=n?n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hE extends aE{constructor(e,t,i,o,l,c){super(e,t,i,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(rd("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class hc extends hE{data(e={}){return super.data(e)}}class fE{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new il(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new hc(this._firestore,this._userDataWriter,i.key,i,new il(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map(h=>{const p=new hc(o._firestore,o._userDataWriter,h.doc.key,h.doc,new il(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}})}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(h=>l||h.type!==3).map(h=>{const p=new hc(o._firestore,o._userDataWriter,h.doc.key,h.doc,new il(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,v=-1;return h.type!==0&&(y=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),v=c.indexOf(h.doc.key)),{type:P1(h.type),doc:p,oldIndex:y,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function P1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be()}}class Cp extends C1{constructor(e){super(),this.firestore=e}convertBytes(e){return new la(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,t)}}function Zu(n){n=Er(n,Is);const e=Er(n.firestore,ro),t=yp(e),i=new Cp(e);return lE(n._query),d1(t,n._query).then(o=>new fE(e,i,n,o))}function k1(n,e,t){n=Er(n,wn);const i=Er(n.firestore,ro),o=dE(n.converter,e);return Pp(i,[rE(td(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,wr.none())])}function k_(n,e,t,...i){n=Er(n,wn);const o=Er(n.firestore,ro),l=td(o);let c;return c=typeof(e=Ut(e))=="string"||e instanceof ed?w1(l,"updateDoc",n._key,e,t,i):v1(l,"updateDoc",n._key,e),Pp(o,[c.toMutation(n._key,wr.exists(!0))])}function x_(n,e){const t=Er(n.firestore,ro),i=Zc(n),o=dE(n.converter,e);return Pp(t,[rE(td(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,wr.exists(!1))]).then(()=>i)}function pE(n,...e){var t,i,o;n=Ut(n);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||A_(e[c])||(l=e[c],c++);const h={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(A_(e[c])){const T=e[c];e[c]=(t=T.next)===null||t===void 0?void 0:t.bind(T),e[c+1]=(i=T.error)===null||i===void 0?void 0:i.bind(T),e[c+2]=(o=T.complete)===null||o===void 0?void 0:o.bind(T)}let p,y,v;if(n instanceof wn)y=Er(n.firestore,ro),v=tp(n._key.path),p={next:T=>{e[c]&&e[c](x1(y,n,T))},error:e[c+1],complete:e[c+2]};else{const T=Er(n,Is);y=Er(T.firestore,ro),v=T._query;const I=new Cp(y);p={next:C=>{e[c]&&e[c](new fE(y,I,T,C))},error:e[c+1],complete:e[c+2]},lE(n._query)}return function(I,C,b,B){const F=new Xw(B),W=new Bw(C,F,b);return I.asyncQueue.enqueueAndForget(async()=>jw(await Rf(I),W)),()=>{F.eu(),I.asyncQueue.enqueueAndForget(async()=>zw(await Rf(I),W))}}(yp(y),v,h,p)}function Pp(n,e){return function(i,o){const l=new cs;return i.asyncQueue.enqueueAndForget(async()=>Zk(await c1(i),o,l)),l.promise}(yp(n),e)}function x1(n,e,t){const i=t.docs.get(e._key),o=new Cp(n);return new hE(n,o,e._key,i,new il(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){da=o})(ua),ta(new Zs("firestore",(i,{instanceIdentifier:o,options:l})=>{const c=i.getProvider("app").getImmediate(),h=new ro(new CC(i.getProvider("auth-internal")),new NC(i.getProvider("app-check-internal")),function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ve(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gl(y.options.projectId,v)}(c,o),c);return l=Object.assign({useFetchStreams:t},l),h._setSettings(l),h},"PUBLIC").setMultipleInstances(!0)),us(zy,"4.7.5",e),us(zy,"4.7.5","esm2017")})();const N1={apiKey:"AIzaSyBCf2TJc3qTosmAAMJz7AUHVTND7QHglzk",authDomain:"webchat-18db1.firebaseapp.com",projectId:"webchat-18db1",storageBucket:"webchat-18db1.firebasestorage.app",messagingSenderId:"936631320798",appId:"1:936631320798:web:987db029380080ad51824f"},mE=rv(N1),sd=EC(mE),Ur=p1(mE);function D1(){const n=Il(),[e,t]=H.useState(""),[i,o]=H.useState(""),[l,c]=H.useState(null);function h(){c(null),!(e==""||i=="")&&oA(sd,e,i).then(()=>{n("/")}).catch(p=>{switch(p.code){case"auth/invalid-email":c("Invalid email!");break;case"auth/invalid-credential":c("Bad email or password!");break;default:c("An unkown error has occured!");break}})}return le.jsxs("div",{className:"w-fit m-auto border-2 border-blue-500 rounded p-4 mt-6 flex flex-col",children:[le.jsx("h1",{className:"m-auto text-3xl text-zinc-600 mb-6",children:"WebChat"}),le.jsx("hr",{}),le.jsx("input",{className:"m-auto border rounded mt-12 w-72 p-2 border-zinc-300 hover:border-blue-500  transition",type:"text",placeholder:"Email *",value:e,onChange:p=>t(p.target.value)}),le.jsx("input",{className:"border rounded w-72 p-2 border-zinc-300 mt-2 hover:border-blue-500  transition",placeholder:"Password *",type:"password",value:i,onChange:p=>o(p.target.value)}),l&&le.jsx("p",{className:"m-auto text-red-500 text-sm",children:l}),le.jsx("button",{className:"mt-24 border border-zinc-300 rounded p-2 text-lg hover:border-blue-500 hover:bg-blue-50 transition",onClick:h,children:"Login"}),le.jsxs("p",{className:"m-auto text-sm mt-1",children:["No account? Register ",le.jsx(Js,{to:"/register",className:"underline hover:text-blue-500 transition",children:"here"}),"!"]})]})}const gE=H.createContext({user:void 0,auth:void 0});function od(){return H.useContext(gE)}function b1({children:n}){const[e,t]=H.useState(void 0),[i,o]=H.useState(void 0);return H.useEffect(()=>uA(sd,l=>{o(l)}),[]),H.useEffect(()=>{if(!i)return;const l=Zc(Ur,"Users",i.uid);return pE(l,c=>{t(c.data())})},[i]),le.jsx(gE.Provider,{value:{user:e,auth:i},children:n})}function L1(){const n=Il();od();const[e,t]=H.useState(""),[i,o]=H.useState(""),[l,c]=H.useState(""),[h,p]=H.useState(null);function y(){if(!(e==""||i==""||l=="")){if(i!=l){p("Passwords must match!");return}sA(sd,e,i).then(v=>{console.log(v);const T=Zc(Ur,"Users",v.user.uid);k1(T,{ProfilePic:"https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png?20150327203541",DisplayName:e.split("@")[0]}),n("/")}).catch(v=>{switch(console.log(JSON.stringify(v)),v.code){case"auth/invalid-email":p("Invalid email!");break;case"auth/weak-password":p("Password is weak!");break;case"auth/email-already-in-use":p("Email already in use!");break;default:p("An unkown error has occured! : "+v.code);break}})}}return le.jsxs("div",{className:"w-fit m-auto border-2 border-blue-500 rounded p-4 mt-6 flex flex-col",children:[le.jsx("h1",{className:"m-auto text-3xl text-zinc-600 mb-6",children:"WebChat"}),le.jsx("hr",{}),le.jsx("input",{className:"m-auto border rounded mt-2 w-72 p-2 border-zinc-300 hover:border-blue-500  transition",type:"text",placeholder:"Email *",value:e,onChange:v=>t(v.target.value)}),le.jsx("input",{className:"border rounded w-72 p-2 border-zinc-300 mt-2 hover:border-blue-500  transition",placeholder:"Password *",type:"password",value:i,onChange:v=>o(v.target.value)}),le.jsx("input",{className:"border rounded w-72 p-2 border-zinc-300 mt-2 hover:border-blue-500  transition",placeholder:"Confirm Password *",type:"password",value:l,onChange:v=>c(v.target.value)}),h&&le.jsx("p",{className:"m-auto text-sm text-red-500",children:h}),le.jsx("button",{className:"mt-24 border border-zinc-300 rounded p-2 text-lg hover:border-blue-500 hover:bg-blue-50 transition",onClick:y,children:"Register"}),le.jsxs("p",{className:"m-auto text-sm mt-1",children:["Already have an account? Login ",le.jsx(Js,{to:"/login",className:"underline hover:text-blue-500 transition",children:"here"}),"!"]})]})}function O1(){const n=od(),[e,t]=H.useState([]),[i,o]=H.useState([]),[l,c]=H.useState(""),[h,p]=H.useState(""),[y,v]=H.useState({});H.useState("");async function T(){const Y=[];(await Zu(Ws(Ur,"Users"))).forEach(oe=>{const V={id:oe.id,DisplayName:oe.data().DisplayName,ProfilePic:oe.data().ProfilePic};V.id!=n.auth.uid&&Y.push(V)}),t(Y)}async function I(Y){let J=null;if(W(Y),(await Zu(Ws(Ur,"Conversations"))).forEach(V=>{(V.data().userOne==n.auth.uid&&V.data().userTwo==Y||V.data().userOne==Y&&V.data().userTwo==n.auth.uid)&&(J=V.id)}),J==null){const V=await x_(Ws(Ur,"Conversations"),{userOne:n.auth.uid,userTwo:Y});c(V.id)}J!=null&&(c(J),C(J))}async function C(Y){let J=[];(await Zu(Ws(Ur,"Messages"))).forEach(V=>{V.data().conversationId==Y&&J.push(V.data())}),o(J)}async function b(){await x_(Ws(Ur,"Messages"),{conversationId:l,message:h,senderId:n.auth.uid,time:new Date().getMonth()+"-"+new Date().getDay()+"T"+new Date().getHours()+":"+new Date().getMinutes()+":"+new Date().getSeconds()})}function B(Y){let J=[Y.time.split("T")[0].split("-"),Y.time.split("T")[1].split(":")];return J[0]*30*24*60*60+J[1]*60*60+J[3]*60+J[4]*60}function F(Y){return Y.docs.map(oe=>oe.data()).sort((oe,V)=>B(oe)-B(V))}async function W(Y){(await Zu(Ws(Ur,"Users"))).forEach(oe=>{oe.id==Y&&v({ProfilePic:oe.data().ProfilePic,DisplayName:oe.data().DisplayName})})}return T(),H.useEffect(()=>pE(S1(Ws(Ur,"Messages"),R1("conversationId","==",l),A1("time")),J=>{o(F(J))}),[i]),le.jsxs("div",{className:"flex min-h-screen",children:[le.jsxs("nav",{className:"w-96 border-r-2 border-blue-500 h-screen flex flex-col justify-between sticky top-0",children:[le.jsx("div",{className:"p-2",children:e.map(Y=>le.jsxs(Js,{onClick:()=>I(Y.id),className:"flex p-2 gap-2 items-center rounded border border-transparent hover:bg-blue-50 hover:border-blue-500 transition-all",children:[le.jsx("img",{className:"w-16 h-16 rounded-full border p-1 border-blue-500",src:Y.ProfilePic}),le.jsx("p",{className:"text-xl",children:Y.DisplayName})]},Y.id))}),le.jsxs(Js,{className:"sticky bottom-0 flex items-center p-4 gap-2 border-t-2 border-blue-500 hover:bg-blue-50 transition-all",to:"/settings",children:[le.jsx("img",{className:"w-12 h-12 rounded-full border p-1 border-blue-500",src:n.user.ProfilePic}),le.jsx("p",{className:"text-xl",children:n.user.DisplayName}),le.jsx("img",{className:"ml-auto",src:"/settings.svg"})]})]}),le.jsxs("div",{className:"flex flex-col flex-1",children:[le.jsx("div",{className:"p-4",children:le.jsx("div",{className:"max-h-[836px] overflow-scroll overflow-x-hidden",children:i.length<1?le.jsx("div",{className:"text-xl p-1 mx-auto border-b-2 border-blue-500",children:"Select a conversation to start chatting!"}):i.map(Y=>Y.senderId==n.auth.uid?le.jsxs("div",{className:"flex p-2 gap-2 ml-auto w-2/3",children:[le.jsxs("div",{className:"flex flex-col ml-auto",children:[le.jsx("p",{className:"text-sm font-bold ml-auto",children:n.user.DisplayName}),le.jsx("p",{className:"bg-blue-200 p-2 rounded-lg mt-1",children:Y.message}),le.jsx("p",{className:"text-sm ml-auto",children:Y.time.split("T")[1]})]}),le.jsx("img",{className:"w-12 h-12 rounded-full border border-blue-500",src:n.user.ProfilePic})]}):le.jsxs("div",{className:"flex p-2 gap-2 w-2/3",children:[le.jsx("img",{className:"w-12 h-12 rounded-full border border-blue-500",src:y.ProfilePic}),le.jsxs("div",{className:"flex flex-col",children:[le.jsx("p",{className:"text-sm font-bold",children:y.DisplayName}),le.jsx("p",{className:"bg-blue-200 p-2 rounded-lg mt-1",children:Y.message}),le.jsx("p",{className:"text-sm",children:Y.time.split("T")[1]})]})]}))})}),le.jsxs("div",{className:"mt-auto w-full p-4 flex gap-2",children:[le.jsx("input",{className:"bg-gray-50 border border-blue-300 rounded-full p-2 w-full hover:border-blue-500 transition-all",placeholder:"Message",type:"text",value:h,onChange:Y=>p(Y.target.value)}),le.jsx("button",{className:"bg-blue-300 hover:bg-blue-500 rounded-full transition-all p-4",onClick:()=>b(),children:le.jsx("img",{src:"send.svg"})})]})]})]})}function V1(){const n=Il(),e=od(),[t,i]=H.useState(e.user.ProfilePic),[o,l]=H.useState(""),[c,h]=H.useState(e.user.DisplayName),[p,y]=H.useState(""),[v,T]=H.useState(e.auth.email),[I,C]=H.useState(""),[b,B]=H.useState(""),[F,W]=H.useState(""),[Y,J]=H.useState("");console.log(e);const oe=Zc(Ur,"Users",e.auth.uid);function V(){i(o),k_(oe,{ProfilePic:o}),l("")}function de(){h(p),k_(oe,{DisplayName:p}),y("")}function x(){alert("Nem lehet nem megerositett emaillal!")}function S(){alert("Nem lehet nem megerositett emaillal!")}function R(){cA(sd),n("/login")}return le.jsxs("div",{className:"flex flex-col p-4 gap-4 mx-auto max-w-screen-xl",children:[le.jsxs("div",{className:"flex justify-between",children:[le.jsx(Js,{to:"/",children:le.jsxs("button",{className:"flex gap-2 p-2 bg-blue-100 border border-blue-300 rounded-md hover:bg-blue-200 hover:border-blue-500 transition-all",children:[le.jsx("img",{src:"back.svg"}),"Return"]})}),le.jsxs("button",{onClick:R,className:"flex gap-2 p-2 bg-blue-100 border border-blue-300 rounded-md hover:bg-blue-200 hover:border-blue-500 transition-all",children:["Logout",le.jsx("img",{src:"logout.svg"})]})]}),le.jsxs("div",{className:"flex gap-4",children:[le.jsx("img",{className:"w-24 h-24 rounded-full border border-blue-500 mr-32",src:t}),le.jsxs("div",{className:"flex items-center gap-4 w-full",children:[le.jsx("input",{placeholder:"Image url",className:"border border-blue-300 rounded-full bg-gray-50 p-3 hover:border-blue-500 transition-all w-1/3",type:"text",value:o,onChange:k=>l(k.target.value)}),le.jsx("button",{onClick:V,className:"border border-blue-300 bg-blue-100 hover:border-blue-500 hover:bg-blue-200 transition-all rounded-full p-3",children:"Upload"})]})]}),le.jsx("hr",{className:"border border-blue-300"}),le.jsxs("div",{className:"flex gap-4 items-center",children:[le.jsx("p",{className:"text-3xl w-56",children:c}),le.jsx("input",{placeholder:"Display name",className:"border border-blue-300 rounded-full bg-gray-50 p-3 hover:border-blue-500 transition-all w-1/3",type:"text",value:p,onChange:k=>y(k.target.value)}),le.jsx("button",{onClick:de,className:"border border-blue-300 bg-blue-100 hover:border-blue-500 hover:bg-blue-200 transition-all rounded-full p-3",children:"Change name"})]}),le.jsxs("div",{className:"flex gap-4 items-center",children:[le.jsx("p",{className:"text-3xl w-56",children:v}),le.jsx("input",{placeholder:"Email",className:"border border-blue-300 rounded-full bg-gray-50 p-3 hover:border-blue-500 transition-all w-1/3",type:"text",value:I,onChange:k=>C(k.target.value)}),le.jsx("button",{onClick:x,className:"border border-blue-300 bg-blue-100 hover:border-blue-500 hover:bg-blue-200 transition-all rounded-full p-3",children:"Change email"})]}),le.jsxs("div",{className:"flex gap-4 items-center",children:[le.jsx("input",{value:F,onChange:k=>W(k.target.value),className:"border border-blue-300 rounded-full bg-gray-50 p-3 hover:border-blue-500 transition-all w-1/3",type:"password",placeholder:"New password"}),le.jsx("input",{value:Y,onChange:k=>J(k.target.value),className:"border border-blue-300 rounded-full bg-gray-50 p-3 hover:border-blue-500 transition-all w-1/3",type:"password",placeholder:"Confirm new password"}),le.jsx("input",{placeholder:"Current password",className:"border border-blue-300 rounded-full bg-gray-50 p-3 hover:border-blue-500 transition-all w-1/3",type:"password",value:b,onChange:k=>B(k.target.value)}),le.jsx("button",{onClick:S,className:"border border-blue-300 bg-blue-100 hover:border-blue-500 hover:bg-blue-200 transition-all rounded-full p-3",children:"New password"})]})]})}function M1(){const n=od(),e=Il();return H.useEffect(()=>{n.auth===null&&e("/login")},[n]),n.user?le.jsx(qI,{}):le.jsx("p",{className:"fixed top-0 left-0 w-full h-screen bg-white flex justify-center items-center",children:"Loading..."})}const F1=g0([{element:le.jsx(M1,{}),children:[{path:"/",element:le.jsx(O1,{})},{path:"/settings",element:le.jsx(V1,{})}]},{path:"/login",element:le.jsx(D1,{})},{path:"/register",element:le.jsx(L1,{})}]);AT.createRoot(document.getElementById("root")).render(le.jsx(b1,{children:le.jsx(k0,{router:F1})}));
